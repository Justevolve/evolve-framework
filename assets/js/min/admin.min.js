"use strict";if(function(e){function t(e){return/string|number|boolean/.test(typeof e)}e.evExtendObject=function(i,n){if(t(i))return i;var o=i;return e.each(n,function(i,a){void 0===o[i]?t(n[i])?o[i]=a:o[i]={}:t(o[i])&&(o[i]=e.evExtendObject(o[i],n[i]))}),o},e.evSaveRichTextareas=function(t){"undefined"!=typeof tinymce&&e(".ev-rich",t).each(function(){tinymce.get(this.id).save()})},e.fn.serializeObject=function(){var t=this,i={},n={},o={validate:/^[a-zA-Z_][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(e,t,i){return e[t]=i,e},this.push_counter=function(e){return void 0===n[e]&&(n[e]=0),n[e]++},e.each(e(this).serializeArray(),function(){if(o.validate.test(this.name)){for(var n,a=this.name.match(o.key),r=this.value,s=this.name;void 0!==(n=a.pop());)s=s.replace(new RegExp("\\["+n+"\\]$"),""),n.match(o.push)?r=t.build([],t.push_counter(s),r):n.match(o.fixed)?r=t.build([],n,r):n.match(o.named)&&(r=t.build({},n,r));i=e.extend(!0,i,r)}}),e.each(i,function(e,t){i[e].push&&(i[e]=i[e].filter(function(e){return void 0!==e&&null!==e&&~e}))}),i}}(jQuery),function(e){"function"!=typeof e.deparam&&(e.deparam=function(t,i){var n={},o={true:!0,false:!1,null:null};return e.each(t.replace(/\+/g," ").split("&"),function(t,a){var r,s=a.split("="),l=decodeURIComponent(s[0]),c=n,d=0,p=l.split("]["),u=p.length-1;if(/\[/.test(p[0])&&/\]$/.test(p[u])?(p[u]=p[u].replace(/\]$/,""),u=(p=p.shift().split("[").concat(p)).length-1):u=0,2===s.length)if(r=decodeURIComponent(s[1]),i&&(r=r&&!isNaN(r)?+r:"undefined"===r?void 0:void 0!==o[r]?o[r]:r),u)for(;d<=u;d++)c=c[l=""===p[d]?c.length:p[d]]=d<u?c[l]||(p[d+1]&&isNaN(p[d+1])?{}:[]):r;else e.isArray(n[l])?n[l].push(r):void 0!==n[l]?n[l]=[n[l],r]:n[l]=r;else l&&(n[l]=i?void 0:"")}),n})}(jQuery),"function"!=typeof String.prototype.replaceLast&&(String.prototype.replaceLast=function(e,t){var i=this.lastIndexOf(e);return i>=0?this.substring(0,i)+t+this.substring(i+e.length):this.toString()}),"undefined"==typeof jQuery)throw new Error("jQuery is required.");!function(e){e.evf={componentID:".ev-component",namespace:".evf",ui:{event:"ui-build",signature:"ev-ui",components:[],components_count:0,components_built:0,add:function(t,i){e.evf.ui.components.push({selector:t,callback:i}),e.evf.ui.components_count++},do_build:function(){e.each(e.evf.ui.components,function(){e.evf.ui.components_built++;var t=this.selector,i=this.callback,n=e(t);(n=n.filter(function(){return"1"!==e(this).attr("data-"+e.evf.ui.signature)})).length?(n.attr("data-"+e.evf.ui.signature,"1"),i.call(n),e.evf.ui.end_build()):e.evf.ui.end_build()})},end_build:function(){e.evf.ui.components_count===e.evf.ui.components_built&&setTimeout(function(){e(".ev-tab-container").addClass("ev-tab-container-loaded")},5)},build:function(){e.evf.ui.components_built=0,e.evf.ui.do_build(),e(window).trigger(e.evf.resolveEventName(e.evf.ui.event,e.evf.namespace))}},resolveNamespace:function(t){return""!==t&&-1===t.indexOf(".")&&(t="."+t),e.evf.namespace+t},resolveEventName:function(t,i){var n="";return e.each(t.split(" "),function(){n+=" "+this+e.evf.resolveNamespace(i)}),n=n.trim()},on:function(t,i,n,o){e(t).on(e.evf.resolveEventName(i,n),o)},one:function(t,i,n,o){e(t).one(e.evf.resolveEventName(i,n),o)},delegate:function(t,i,n,o){e(document).on(e.evf.resolveEventName(i,n),t,o)},undelegate:function(t,i){e(document).off(e.evf.resolveEventName(t,i))},template:function(t,i){if("undefined"==typeof _)throw new Error("Underscore is required.");var n=t;if("string"==typeof t&&(n=e("script[type='text/template'][data-template='"+t+"']")),!n.length)throw new Error("Template '"+t+"' not found.");var o={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return parseFloat(ev_framework.wp_version)<4.5?_.template(n.html(),i,o):_.template(n.html(),o)(i)}},e(document).on("ready",function(){e.evf.ui.build(),e.evf.tabs(".ev-tabs"+e.evf.componentID),e.evf.accordion(".ev-accordion"+e.evf.componentID)})}(jQuery),function(e){e.evf.key=function(t,i,n){if("function"!=typeof i)throw new Error("Callback is not a function.");var o={enter:13,left:37,up:38,right:39,down:40,esc:27,space:32,backspace:8,tab:9},a="ev";(n=e.extend({stop:!0,namespace:"ev",one:!1},n)).namespace&&(a="."+n.namespace);var r=function(e){if(o[t]&&e.which===o[t]){var a=i(e);if(void 0!==a)return a;if(n.stop)return!1}return!0};n.one?e(window).one("keydown."+a,r):e(window).on("keydown."+a,r)}}(jQuery),function(e){e.evf.tabs=function(t,i){function n(n,o){var a=null,r=e(o);if(e(i.triggersClass+"[id='"+r[0].id+"']").length>1&&0==r.parents(".ev-tabs").length)return e(i.triggersClass).removeClass(i.activeClass).removeAttr("aria-selected"),e(i.triggersClass+"[id='"+r[0].id+"']").not(r).trigger(i.eventTrigger+"."+i.namespace),r.addClass(i.activeClass).attr("aria-selected","true"),!1;"object"==typeof t?a=e(n):"string"==typeof t&&(a=r.parents(n).first());var s=e("> "+i.navClass,a),l=e(i.triggersClass,s),c=e("> "+i.panelsContainerClass,a),d=e("> "+i.tabsClass,c),p=0;switch(l.each(function(e,t){this===o&&(p=e)}),a.data("push")){case"hash":e.evf.history.pushHash(r);break;case"querystring":e.evf.history.pushQueryString(r,"tab")}return a.trigger(e.evf.resolveEventName("switch",i.namespace)),l.removeClass(i.activeClass).removeAttr("aria-selected"),d.removeClass(i.activeClass).attr("aria-hidden","true"),r.addClass(i.activeClass).attr("aria-selected","true"),d.eq(p).addClass(i.activeClass).removeAttr("aria-hidden"),a.trigger(e.evf.resolveEventName("switched",i.namespace)),!1}if(i=e.extend({namespace:"tabs",navClass:".ev-tabs-nav",triggersClass:".ev-tab-trigger",panelsContainerClass:".ev-tab-container",tabsClass:".ev-tab",activeClass:"ev-active",eventTrigger:"click"},i),"object"==typeof t?e.evf.on(i.triggersClass,i.eventTrigger,i.namespace,function(){return n(t,this)}):"string"==typeof t&&e.evf.delegate(i.triggersClass,i.eventTrigger,i.namespace,function(){return n(t,this)}),""!=window.location.hash){var o=i.triggersClass+"[href='"+window.location.hash+"']";o+=","+i.triggersClass+"[data-target='"+window.location.hash+"']",e(o).trigger(e.evf.resolveEventName(i.eventTrigger,i.namespace))}}}(jQuery),function(e){e.evf.accordion=function(t,i){function n(n,o){var a=null,r=e(o);"object"==typeof t?a=e(n):"string"==typeof t&&(a=r.parents(n).first());var s=!1!==i.mode?i.mode:a.attr("data-mode"),l=e(i.triggersClass,a),c=e(i.toggleClass,a),d=0;switch(l.each(function(e,t){this===o&&(d=e)}),a.data("push")){case"hash":e.evf.history.pushHash(r);break;case"querystring":e.evf.history.pushQueryString(r,"toggle")}return a.trigger(e.evf.resolveEventName("switch",i.namespace)),"toggle"!==s?"true"==r.attr("aria-selected")?(r.removeAttr("aria-selected"),c.eq(d).removeClass(i.activeClass).attr("aria-hidden","true")):(l.removeAttr("aria-selected"),r.attr("aria-selected","true"),c.removeClass(i.activeClass).attr("aria-hidden","true"),c.eq(d).addClass(i.activeClass).removeAttr("aria-hidden")):"true"==r.attr("aria-selected")?(r.removeAttr("aria-selected"),c.eq(d).removeClass(i.activeClass).attr("aria-hidden","true")):(r.attr("aria-selected","true"),c.eq(d).addClass(i.activeClass).removeAttr("aria-hidden")),a.trigger(e.evf.resolveEventName("switched",i.namespace)),!1}if(i=e.extend({namespace:"accordion",accordionClass:".ev-accordion",toggleClass:".ev-toggle",triggersClass:".ev-toggle-trigger",contentClass:".ev-toggle-content",activeClass:"ev-active",eventTrigger:"click focus",mode:!1},i),"object"==typeof t?e.evf.on(i.triggersClass,i.eventTrigger,i.namespace,function(){return n(t,this)}):"string"==typeof t&&e.evf.delegate(i.triggersClass,i.eventTrigger,i.namespace,function(){return n(t,this)}),""!=window.location.hash){var o=i.triggersClass+"[href='"+window.location.hash+"']";o+=","+i.triggersClass+"[data-target='"+window.location.hash+"']",e(o).trigger(e.evf.resolveEventName(i.eventTrigger,i.namespace))}}}(jQuery),function(e){e.evf.delegate(".ev-modal-close","click","modal",function(t){return e(this).parents(".ev-modal-container").first().data("ev-modal").close(),!1}),e.evf.key("esc",function(){var t=e(".ev-modal-container");if(t.length)return t.last().data("ev-modal").close(),!1}),e.evf.modal=function(t,i,n){n=e.extend({save:function(){},close:function(){},class:"",wait:!1,simple:!1},n);var o=this;o.config=n,this.close=function(){n.close(),e(".ev-modal-container[data-key='"+t+"']").nextAll(".ev-modal-container").remove(),e(".ev-modal-container[data-key='"+t+"']").remove(),e(".ev-modal-container").length||e("body").removeClass("ev-modal-open"),e(window).trigger("ev-modal-close")},this.save=function(i){var o=e(".ev-modal-container[data-key='"+t+"']"+" .ev-modal-footer .ev-save").attr("data-nonce");n.wait?n.save(i,this.close,o):(n.save(i,null,o),this.close())},this.open=function(a){if("function"!=typeof a)throw new Error("Content is not a function.");var r=".ev-modal-container[data-key='"+t+"']";e(r).remove();var s=n.class;n.simple&&(s+=" ev-modal-container-simple");var l='<div class="ev-modal-container '+s+'" data-key="'+t+'">';l+='<div class="ev-modal-wrapper">',l+='<a class="ev-modal-close" href="#"><i data-icon="ev-modal-close" class="ev-icon ev-component" aria-hidden="true"></i></a>',l+='<div class="ev-modal-wrapper-inner">',l+="</div>",l+="</div>",l=e(l+="</div>"),e("body").hasClass("ev-modal-open")?e(".ev-modal-container").last().after(l):(l.appendTo(e("#ev-modals-container")),e("body").addClass("ev-modal-open")),e(".ev-modal-container").last().data("ev-modal",o),a(e(r+" .ev-modal-wrapper-inner"),t,i)},this.init=function(){var i=".ev-modal-container[data-key='"+t+"']",n=i+" .ev-modal-footer .ev-save",a=i+" form",r="modal-form-"+t;e.evf.undelegate("submit",r),e.evf.undelegate("click",r),e.evf.delegate(n,"click",r,function(){return e(a).trigger("submit."+r),!1}),e.evf.delegate(a,"submit",r,function(){return e.evSaveRichTextareas(this),ev_idle_button(e(n)),o.save(e(this).serializeObject()),e.evf.undelegate("submit",r),e.evf.undelegate("click",r),!1})},this.init()}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function t(t,i){var n,o,a,r,s,c=e('<div class="minicolors" />'),d=e.minicolors.defaults;if(!t.data("minicolors-initialized")){if(i=e.extend(!0,{},d,i),c.addClass("minicolors-theme-"+i.theme).toggleClass("minicolors-with-opacity",i.opacity).toggleClass("minicolors-no-data-uris",!0!==i.dataUris),void 0!==i.position&&e.each(i.position.split(" "),function(){c.addClass("minicolors-position-"+this)}),n="rgb"===i.format?i.opacity?"25":"20":i.keywords?"11":"7",t.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",i).prop("size",n).wrap(c).after('<div class="minicolors-panel minicolors-slider-'+i.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),i.inline||(t.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),t.next(".minicolors-input-swatch").on("click",function(e){e.preventDefault(),t.focus()})),(r=t.parent().find(".minicolors-panel")).on("selectstart",function(){return!1}).end(),i.swatches&&0!==i.swatches.length)for(i.swatches.length>7&&(i.swatches.length=7),r.addClass("minicolors-with-swatches"),o=e('<ul class="minicolors-swatches"></ul>').appendTo(r),s=0;s<i.swatches.length;++s)a=i.swatches[s],a=m(a)?v(a,!0):O(h(a,!0)),e('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(o).data("swatch-color",i.swatches[s]).find(".minicolors-swatch-color").css({backgroundColor:C(a),opacity:a.a}),i.swatches[s]=a;i.inline&&t.parent().addClass("minicolors-inline"),l(t,!1),t.data("minicolors-initialized",!0)}}function i(e){var t=e.parent();e.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),t.before(e).remove()}function n(e){var t=e.parent(),i=t.find(".minicolors-panel"),n=e.data("minicolors-settings");!e.data("minicolors-initialized")||e.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus")||(o(),t.addClass("minicolors-focus"),i.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(e.get(0))}))}function o(){e(".minicolors-focus").each(function(){var t=e(this),i=t.find(".minicolors-input"),n=t.find(".minicolors-panel"),o=i.data("minicolors-settings");n.fadeOut(o.hideSpeed,function(){o.hide&&o.hide.call(i.get(0)),t.removeClass("minicolors-focus")})})}function a(e,t,i){var n,o,a,s,l=e.parents(".minicolors").find(".minicolors-input"),c=l.data("minicolors-settings"),d=e.find("[class$=-picker]"),p=e.offset().left,u=e.offset().top,h=Math.round(t.pageX-p),v=Math.round(t.pageY-u),f=i?c.animationSpeed:0;t.originalEvent.changedTouches&&(h=t.originalEvent.changedTouches[0].pageX-p,v=t.originalEvent.changedTouches[0].pageY-u),0>h&&(h=0),0>v&&(v=0),h>e.width()&&(h=e.width()),v>e.height()&&(v=e.height()),e.parent().is(".minicolors-slider-wheel")&&d.parent().is(".minicolors-grid")&&(n=75-h,o=75-v,a=Math.sqrt(n*n+o*o),0>(s=Math.atan2(o,n))&&(s+=2*Math.PI),a>75&&(a=75,h=75-75*Math.cos(s),v=75-75*Math.sin(s)),h=Math.round(h),v=Math.round(v)),e.is(".minicolors-grid")?d.stop(!0).animate({top:v+"px",left:h+"px"},f,c.animationEasing,function(){r(l,e)}):d.stop(!0).animate({top:v+"px"},f,c.animationEasing,function(){r(l,e)})}function r(e,t){function i(e,t){var i,n;return e.length&&t?(i=e.offset().left,n=e.offset().top,{x:i-t.offset().left+e.outerWidth()/2,y:n-t.offset().top+e.outerHeight()/2}):null}var n,o,a,r,l,d,p,u=e.val(),h=e.attr("data-opacity"),v=e.parent(),f=e.data("minicolors-settings"),m=v.find(".minicolors-input-swatch"),w=v.find(".minicolors-grid"),y=v.find(".minicolors-slider"),b=v.find(".minicolors-opacity-slider"),C=w.find("[class$=-picker]"),x=y.find("[class$=-picker]"),k=b.find("[class$=-picker]"),O=i(C,w),$=i(x,y),S=i(k,b);if(t.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(f.control){case"wheel":r=w.width()/2-O.x,l=w.height()/2-O.y,d=Math.sqrt(r*r+l*l),0>(p=Math.atan2(l,r))&&(p+=2*Math.PI),d>75&&(d=75,O.x=69-75*Math.cos(p),O.y=69-75*Math.sin(p)),o=g(d/.75,0,100),u=_({h:n=g(180*p/Math.PI,0,360),s:o,b:a=g(100-Math.floor($.y*(100/y.height())),0,100)}),y.css("backgroundColor",_({h:n,s:o,b:100}));break;case"saturation":u=_({h:n=g(parseInt(O.x*(360/w.width()),10),0,360),s:o=g(100-Math.floor($.y*(100/y.height())),0,100),b:a=g(100-Math.floor(O.y*(100/w.height())),0,100)}),y.css("backgroundColor",_({h:n,s:100,b:a})),v.find(".minicolors-grid-inner").css("opacity",o/100);break;case"brightness":u=_({h:n=g(parseInt(O.x*(360/w.width()),10),0,360),s:o=g(100-Math.floor(O.y*(100/w.height())),0,100),b:a=g(100-Math.floor($.y*(100/y.height())),0,100)}),y.css("backgroundColor",_({h:n,s:o,b:100})),v.find(".minicolors-grid-inner").css("opacity",1-a/100);break;default:u=_({h:n=g(360-parseInt($.y*(360/y.height()),10),0,360),s:o=g(Math.floor(O.x*(100/w.width())),0,100),b:a=g(100-Math.floor(O.y*(100/w.height())),0,100)}),w.css("backgroundColor",_({h:n,s:100,b:100}))}s(e,u,h=f.opacity?parseFloat(1-S.y/b.height()).toFixed(2):1)}else m.find("span").css({backgroundColor:u,opacity:h}),c(e,u,h)}function s(e,t,i){var n,o=e.parent(),a=e.data("minicolors-settings"),r=o.find(".minicolors-input-swatch");a.opacity&&e.attr("data-opacity",i),"rgb"===a.format?(n=m(t)?v(t,!0):O(h(t,!0)),i=""===e.attr("data-opacity")?1:g(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),(isNaN(i)||!a.opacity)&&(i=1),t=e.minicolors("rgbObject").a<=1&&n&&a.opacity?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(i)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):(m(t)&&(t=b(t)),t=u(t,a.letterCase)),e.val(t),r.find("span").css({backgroundColor:t,opacity:i}),c(e,t,i)}function l(t,i){var n,o,a,r,s,l,d,p,y,C,k=t.parent(),O=t.data("minicolors-settings"),$=k.find(".minicolors-input-swatch"),S=k.find(".minicolors-grid"),I=k.find(".minicolors-slider"),T=k.find(".minicolors-opacity-slider"),j=S.find("[class$=-picker]"),z=I.find("[class$=-picker]"),F=T.find("[class$=-picker]");switch(m(t.val())?(n=b(t.val()),(s=g(parseFloat(w(t.val())).toFixed(2),0,1))&&t.attr("data-opacity",s)):n=u(h(t.val(),!0),O.letterCase),n||(n=u(f(O.defaultValue,!0),O.letterCase)),o=x(n),r=O.keywords?e.map(O.keywords.split(","),function(t){return e.trim(t.toLowerCase())}):[],l=""!==t.val()&&e.inArray(t.val().toLowerCase(),r)>-1?u(t.val()):m(t.val())?v(t.val()):n,i||t.val(l),O.opacity&&(a=""===t.attr("data-opacity")?1:g(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),isNaN(a)&&(a=1),t.attr("data-opacity",a),$.find("span").css("opacity",a),p=g(T.height()-T.height()*a,0,T.height()),F.css("top",p+"px")),"transparent"===t.val().toLowerCase()&&$.find("span").css("opacity",0),$.find("span").css("backgroundColor",n),O.control){case"wheel":y=g(Math.ceil(.75*o.s),0,S.height()/2),C=o.h*Math.PI/180,d=g(75-Math.cos(C)*y,0,S.width()),p=g(75-Math.sin(C)*y,0,S.height()),j.css({top:p+"px",left:d+"px"}),p=150-o.b/(100/S.height()),""===n&&(p=0),z.css("top",p+"px"),I.css("backgroundColor",_({h:o.h,s:o.s,b:100}));break;case"saturation":d=g(5*o.h/12,0,150),p=g(S.height()-Math.ceil(o.b/(100/S.height())),0,S.height()),j.css({top:p+"px",left:d+"px"}),p=g(I.height()-o.s*(I.height()/100),0,I.height()),z.css("top",p+"px"),I.css("backgroundColor",_({h:o.h,s:100,b:o.b})),k.find(".minicolors-grid-inner").css("opacity",o.s/100);break;case"brightness":d=g(5*o.h/12,0,150),p=g(S.height()-Math.ceil(o.s/(100/S.height())),0,S.height()),j.css({top:p+"px",left:d+"px"}),p=g(I.height()-o.b*(I.height()/100),0,I.height()),z.css("top",p+"px"),I.css("backgroundColor",_({h:o.h,s:o.s,b:100})),k.find(".minicolors-grid-inner").css("opacity",1-o.b/100);break;default:d=g(Math.ceil(o.s/(100/S.width())),0,S.width()),p=g(S.height()-Math.ceil(o.b/(100/S.height())),0,S.height()),j.css({top:p+"px",left:d+"px"}),p=g(I.height()-o.h/(360/I.height()),0,I.height()),z.css("top",p+"px"),S.css("backgroundColor",_({h:o.h,s:100,b:100}))}t.data("minicolors-initialized")&&c(t,l,a)}function c(e,t,i){var n,o,a=e.data("minicolors-settings"),r=e.data("minicolors-lastChange");if(!r||r.value!==t||r.opacity!==i){if(e.data("minicolors-lastChange",{value:t,opacity:i}),a.swatches&&0!==a.swatches.length){for(n=m(t)?v(t,!0):O(t),-1,o=0;o<a.swatches.length;++o)if(n.r===a.swatches[o].r&&n.g===a.swatches[o].g&&n.b===a.swatches[o].b&&n.a===a.swatches[o].a){o;break}e.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==o&&e.parent().find(".minicolors-swatches .minicolors-swatch").eq(o).addClass("selected")}a.change&&(a.changeDelay?(clearTimeout(e.data("minicolors-changeTimeout")),e.data("minicolors-changeTimeout",setTimeout(function(){a.change.call(e.get(0),t,i)},a.changeDelay))):a.change.call(e.get(0),t,i)),e.trigger("change").trigger("input")}}function d(t){var i=O(h(e(t).val(),!0)),n=e(t).attr("data-opacity");return i?(void 0!==n&&e.extend(i,{a:parseFloat(n)}),i):null}function p(t,i){var n=O(h(e(t).val(),!0)),o=e(t).attr("data-opacity");return n?(void 0===o&&(o=1),i?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(o)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):null}function u(e,t){return"uppercase"===t?e.toUpperCase():e.toLowerCase()}function h(e,t){return(e=e.replace(/^#/g,"")).match(/^[A-F0-9]{3,6}/gi)?3!==e.length&&6!==e.length?"":(3===e.length&&t&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#"+e):""}function v(e,t){var i=e.replace(/[^\d,.]/g,"").split(",");return i[0]=g(parseInt(i[0],10),0,255),i[1]=g(parseInt(i[1],10),0,255),i[2]=g(parseInt(i[2],10),0,255),i[3]&&(i[3]=g(parseFloat(i[3],10),0,1)),t?{r:i[0],g:i[1],b:i[2],a:i[3]?i[3]:null}:void 0!==i[3]&&i[3]<=1?"rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")":"rgb("+i[0]+", "+i[1]+", "+i[2]+")"}function f(e,t){return m(e)?v(e):h(e,t)}function g(e,t,i){return t>e&&(e=t),e>i&&(e=i),e}function m(e){var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!t||4!==t.length)}function w(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===e.length?e[4]:"1"}function y(e){var t={},i=Math.round(e.h),n=Math.round(255*e.s/100),o=Math.round(255*e.b/100);if(0===n)t.r=t.g=t.b=o;else{var a=o,r=(255-n)*o/255,s=i%60*(a-r)/60;360===i&&(i=0),60>i?(t.r=a,t.b=r,t.g=r+s):120>i?(t.g=a,t.b=r,t.r=a-s):180>i?(t.g=a,t.r=r,t.b=r+s):240>i?(t.b=a,t.r=r,t.g=a-s):300>i?(t.b=a,t.g=r,t.r=r+s):360>i?(t.r=a,t.g=r,t.b=a-s):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}function b(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}function C(t){var i=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.each(i,function(e,t){1===t.length&&(i[e]="0"+t)}),"#"+i.join("")}function _(e){return C(y(e))}function x(e){var t=k(O(e));return 0===t.s&&(t.h=360),t}function k(e){var t={h:0,s:0,b:0},i=Math.min(e.r,e.g,e.b),n=Math.max(e.r,e.g,e.b),o=n-i;return t.b=n,t.s=0!==n?255*o/n:0,0!==t.s?e.r===n?t.h=(e.g-e.b)/o:e.g===n?t.h=2+(e.b-e.r)/o:t.h=4+(e.r-e.g)/o:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}function O(e){return e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16),{r:e>>16,g:(65280&e)>>8,b:255&e}}e.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},e.extend(e.fn,{minicolors:function(a,r){switch(a){case"destroy":return e(this).each(function(){i(e(this))}),e(this);case"hide":return o(),e(this);case"opacity":return void 0===r?e(this).attr("data-opacity"):(e(this).each(function(){l(e(this).attr("data-opacity",r))}),e(this));case"rgbObject":return d(e(this));case"rgbString":case"rgbaString":return p(e(this),"rgbaString"===a);case"settings":return void 0===r?e(this).data("minicolors-settings"):(e(this).each(function(){var t=e(this).data("minicolors-settings")||{};i(e(this)),e(this).minicolors(e.extend(!0,t,r))}),e(this));case"show":return n(e(this).eq(0)),e(this);case"value":return void 0===r?e(this).val():(e(this).each(function(){"object"==typeof r&&null!==typeof r?(r.opacity&&e(this).attr("data-opacity",g(r.opacity,0,1)),r.color&&e(this).val(r.color)):e(this).val(r),l(e(this))}),e(this));default:return"create"!==a&&(r=a),e(this).each(function(){t(e(this),r)}),e(this)}}}),e(document).on("mousedown.minicolors touchstart.minicolors",function(t){e(t.target).parents().add(t.target).hasClass("minicolors")||o()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(t){var i=e(this);t.preventDefault(),e(document).data("minicolors-target",i),a(i,t,!0)}).on("mousemove.minicolors touchmove.minicolors",function(t){var i=e(document).data("minicolors-target");i&&a(i,t)}).on("mouseup.minicolors touchend.minicolors",function(){e(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(t){t.preventDefault();var i=e(this),n=i.parents(".minicolors").find(".minicolors-input"),o=i.data("swatch-color");s(n,o,w(o)),l(n)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(t){var i=e(this).parent().find(".minicolors-input");t.preventDefault(),n(i)}).on("focus.minicolors",".minicolors-input",function(){var t=e(this);t.data("minicolors-initialized")&&n(t)}).on("blur.minicolors",".minicolors-input",function(){var t,i,n,o,a,r=e(this),s=r.data("minicolors-settings");r.data("minicolors-initialized")&&(t=s.keywords?e.map(s.keywords.split(","),function(t){return e.trim(t.toLowerCase())}):[],""!==r.val()&&e.inArray(r.val().toLowerCase(),t)>-1?a=r.val():(m(r.val())?n=v(r.val(),!0):(i=h(r.val(),!0),n=i?O(i):null),a=null===n?s.defaultValue:"rgb"===s.format?v(s.opacity?"rgba("+n.r+","+n.g+","+n.b+","+r.attr("data-opacity")+")":"rgb("+n.r+","+n.g+","+n.b+")"):C(n)),o=s.opacity?r.attr("data-opacity"):1,"transparent"===a.toLowerCase()&&(o=0),r.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",o),r.val(a),""===r.val()&&r.val(f(s.defaultValue,!0)),r.val(u(r.val(),s.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(t){var i=e(this);if(i.data("minicolors-initialized"))switch(t.keyCode){case 9:o();break;case 13:case 27:o(),i.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var t=e(this);t.data("minicolors-initialized")&&l(t,!0)}).on("paste.minicolors",".minicolors-input",function(){var t=e(this);t.data("minicolors-initialized")&&setTimeout(function(){l(t,!0)},1)})}),function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(!(e=n(String(e||"").toLowerCase()))||!e.length)return[];var t,i,a,s,l=[],c=e.split(/ +/);for(t=0,i=c.length;i>t;t++){if(a=o(c[t]),this.settings.diacritics)for(s in r)r.hasOwnProperty(s)&&(a=a.replace(new RegExp(s,"g"),r[s]));l.push({string:c[t],regex:new RegExp(a,"i")})}return l},e.prototype.iterator=function(e,t){(a(e)?Array.prototype.forEach||function(e){for(var t=0,i=this.length;i>t;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)}).apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var i,n,o;e=this.prepareSearch(e,t),n=e.tokens,i=e.options.fields,o=n.length;var a=function(e,t){var i,n;return e?(e=String(e||""),-1===(n=e.search(t.regex))?0:(i=t.string.length/e.length,0===n&&(i+=.5),i)):0},r=function(){var e=i.length;return e?1===e?function(e,t){return a(t[i[0]],e)}:function(t,n){for(var o=0,r=0;e>o;o++)r+=a(n[i[o]],t);return r/e}:function(){return 0}}();return o?1===o?function(e){return r(n[0],e)}:"and"===e.options.conjunction?function(e){for(var t,i=0,a=0;o>i;i++){if(0>=(t=r(n[i],e)))return 0;a+=t}return a/o}:function(e){for(var t=0,i=0;o>t;t++)i+=r(n[t],e);return i/o}:function(){return 0}},e.prototype.getSortFunction=function(e,i){var n,o,a,r,s,l,c,d,p,u,h;if(a=this,e=a.prepareSearch(e,i),h=!e.query&&i.sort_empty||i.sort,p=function(e,t){return"$score"===e?t.score:a.items[t.id][e]},s=[],h)for(n=0,o=h.length;o>n;n++)(e.query||"$score"!==h[n].field)&&s.push(h[n]);if(e.query){for(u=!0,n=0,o=s.length;o>n;n++)if("$score"===s[n].field){u=!1;break}u&&s.unshift({field:"$score",direction:"desc"})}else for(n=0,o=s.length;o>n;n++)if("$score"===s[n].field){s.splice(n,1);break}for(d=[],n=0,o=s.length;o>n;n++)d.push("desc"===s[n].direction?-1:1);return(l=s.length)?1===l?(r=s[0].field,c=d[0],function(e,i){return c*t(p(r,e),p(r,i))}):function(e,i){var n,o,a;for(n=0;l>n;n++)if(a=s[n].field,o=d[n]*t(p(a,e),p(a,i)))return o;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;var n=(t=i({},t)).fields,o=t.sort,r=t.sort_empty;return n&&!a(n)&&(t.fields=[n]),o&&!a(o)&&(t.sort=[o]),r&&!a(r)&&(t.sort_empty=[r]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var i,n,o,a,r=this;return n=this.prepareSearch(e,t),t=n.options,e=n.query,a=t.score||r.getScoreFunction(n),e.length?r.iterator(r.items,function(e,o){i=a(e),(!1===t.filter||i>0)&&n.items.push({score:i,id:o})}):r.iterator(r.items,function(e,t){n.items.push({score:1,id:t})}),(o=r.getSortFunction(n,t))&&n.items.sort(o),n.total=n.items.length,"number"==typeof t.limit&&(n.items=n.items.slice(0,t.limit)),n};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:t>e?-1:0:(e=s(String(e||"")),t=s(String(t||"")),e>t?1:t>e?-1:0)},i=function(e){var t,i,n,o;for(t=1,i=arguments.length;i>t;t++)if(o=arguments[t])for(n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);return e},n=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},o=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},a=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},s=function(){var e,t,i,n,o="",a={};for(i in r)if(r.hasOwnProperty(i))for(n=r[i].substring(2,r[i].length-1),o+=n,e=0,t=n.length;t>e;e++)a[n.charAt(e)]=i;var s=new RegExp("["+o+"]","g");return function(e){return e.replace(s,function(e){return a[e]}).toLowerCase()}}();return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var i,n,o,a=this,r=[];if(a.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(i=0,n=e.length;n>i;i++)"string"==typeof e[i]?r.push(e[i]):(a.plugins.settings[e[i].name]=e[i].options,r.push(e[i].name));else if(e)for(o in e)e.hasOwnProperty(o)&&(a.plugins.settings[o]=e[o],r.push(o));for(;r.length;)a.require(r.shift())},e.prototype.loadPlugin=function(t){var i=this,n=i.plugins,o=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=o.fn.apply(i,[i.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]},e.define=function(t,i){e.plugins[t]={name:t,fn:i}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,i){var n=function(e,t){if("string"!=typeof t||t.length){var i="string"==typeof t?new RegExp(t,"i"):t,n=function(e){var t=0;if(3===e.nodeType){var o=e.data.search(i);if(o>=0&&e.data.length>0){var a=e.data.match(i),r=document.createElement("span");r.className="highlight";var s=e.splitText(o),l=(s.splitText(a[0].length),s.cloneNode(!0));r.appendChild(l),s.parentNode.replaceChild(r,s),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=n(e.childNodes[c]);return t};return e.each(function(){n(this)})}},o=function(){};o.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=0)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},o.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=o.prototype[t[i]]};var a=/Mac/.test(navigator.userAgent),r=a?91:17,s=a?18:17,l=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,c=function(e){return void 0!==e},d=function(e){return void 0===e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},p=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},u=function(e){return(e+"").replace(/\$/g,"$$$$")},h={};h.before=function(e,t,i){var n=e[t];e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)}},h.after=function(e,t,i){var n=e[t];e[t]=function(){var t=n.apply(e,arguments);return i.apply(e,arguments),t}};var v=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},f=function(e,t){var i;return function(){var n=this,o=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,o)},t)}},g=function(e,t,i){var n,o=e.trigger,a={};e.trigger=function(){var i=arguments[0];return-1===t.indexOf(i)?o.apply(e,arguments):void(a[i]=arguments)},i.apply(e,[]),e.trigger=o;for(n in a)a.hasOwnProperty(n)&&o.apply(e,a[n])},m=function(e,t,i,n){e.on(t,i,function(t){for(var i=t.target;i&&i.parentNode!==e[0];)i=i.parentNode;return t.currentTarget=i,n.apply(this,[t])})},w=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-n,t.length=n}return t},y=function(e,t,i){var n,o,a={};if(i)for(n=0,o=i.length;o>n;n++)a[i[n]]=e.css(i[n]);else a=e.css();t.css(a)},b=function(t,i){if(!t)return 0;var n=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");y(i,n,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var o=n.width();return n.remove(),o},C=function(e){var t=null,i=function(i,n){var o,a,r,s,l,c,d,p;i=i||window.event||{},n=n||{},i.metaKey||i.altKey||(n.force||!1!==e.data("grow"))&&(o=e.val(),i.type&&"keydown"===i.type.toLowerCase()&&(a=i.keyCode,r=a>=97&&122>=a||a>=65&&90>=a||a>=48&&57>=a||32===a,46===a||8===a?(p=w(e[0])).length?o=o.substring(0,p.start)+o.substring(p.start+p.length):8===a&&p.start?o=o.substring(0,p.start-1)+o.substring(p.start+1):46===a&&void 0!==p.start&&(o=o.substring(0,p.start)+o.substring(p.start+1)):r&&(c=i.shiftKey,d=String.fromCharCode(i.keyCode),d=c?d.toUpperCase():d.toLowerCase(),o+=d)),s=e.attr("placeholder"),!o&&s&&(o=s),(l=b(o,e)+4)!==t&&(t=l,e.width(l),e.triggerHandler("resize")))};e.on("keydown keyup update blur",i),i()},_=function(i,n){var o,a,r,s,l=this;(s=i[0]).selectize=l;var c=window.getComputedStyle&&window.getComputedStyle(s,null);if(r=c?c.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction,r=r||i.parents("[dir]:first").attr("dir")||"",e.extend(l,{order:0,settings:n,$input:i,tabIndex:i.attr("tabindex")||"",tagType:"select"===s.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++_.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:i.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?l.onSearchChange:f(l.onSearchChange,n.loadThrottle)}),l.sifter=new t(this.options,{diacritics:n.diacritics}),l.settings.options){for(o=0,a=l.settings.options.length;a>o;o++)l.registerOption(l.settings.options[o]);delete l.settings.options}if(l.settings.optgroups){for(o=0,a=l.settings.optgroups.length;a>o;o++)l.registerOptionGroup(l.settings.optgroups[o]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return o.mixin(_),i.mixin(_),e.extend(_.prototype,{setup:function(){var t,i,n,o,c,d,p,u,h,v=this,f=v.settings,g=v.eventNS,w=e(window),y=e(document),b=v.$input;if(p=v.settings.mode,u=b.attr("class")||"",t=e("<div>").addClass(f.wrapperClass).addClass(u).addClass(p),i=e("<div>").addClass(f.inputClass).addClass("items").appendTo(t),n=e('<input type="text" autocomplete="off" />').appendTo(i).attr("tabindex",b.is(":disabled")?"-1":v.tabIndex),d=e(f.dropdownParent||t),o=e("<div>").addClass(f.dropdownClass).addClass(p).hide().appendTo(d),c=e("<div>").addClass(f.dropdownContentClass).appendTo(o),v.settings.copyClassesToDropdown&&o.addClass(u),t.css({width:b[0].style.width}),v.plugins.names.length&&(h="plugin-"+v.plugins.names.join(" plugin-"),t.addClass(h),o.addClass(h)),(null===f.maxItems||f.maxItems>1)&&1===v.tagType&&b.attr("multiple","multiple"),v.settings.placeholder&&n.attr("placeholder",f.placeholder),!v.settings.splitOn&&v.settings.delimiter){var _=v.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");v.settings.splitOn=new RegExp("\\s*"+_+"+\\s*")}b.attr("autocorrect")&&n.attr("autocorrect",b.attr("autocorrect")),b.attr("autocapitalize")&&n.attr("autocapitalize",b.attr("autocapitalize")),v.$wrapper=t,v.$control=i,v.$control_input=n,v.$dropdown=o,v.$dropdown_content=c,o.on("mouseenter","[data-selectable]",function(){return v.onOptionHover.apply(v,arguments)}),o.on("mousedown click","[data-selectable]",function(){return v.onOptionSelect.apply(v,arguments)}),m(i,"mousedown","*:not(input)",function(){return v.onItemSelect.apply(v,arguments)}),C(n),i.on({mousedown:function(){return v.onMouseDown.apply(v,arguments)},click:function(){return v.onClick.apply(v,arguments)}}),n.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return v.onKeyDown.apply(v,arguments)},keyup:function(){return v.onKeyUp.apply(v,arguments)},keypress:function(){return v.onKeyPress.apply(v,arguments)},resize:function(){v.positionDropdown.apply(v,[])},blur:function(){return v.onBlur.apply(v,arguments)},focus:function(){return v.ignoreBlur=!1,v.onFocus.apply(v,arguments)},paste:function(){return v.onPaste.apply(v,arguments)}}),y.on("keydown"+g,function(e){v.isCmdDown=e[a?"metaKey":"ctrlKey"],v.isCtrlDown=e[a?"altKey":"ctrlKey"],v.isShiftDown=e.shiftKey}),y.on("keyup"+g,function(e){e.keyCode===s&&(v.isCtrlDown=!1),16===e.keyCode&&(v.isShiftDown=!1),e.keyCode===r&&(v.isCmdDown=!1)}),y.on("mousedown"+g,function(e){if(v.isFocused){if(e.target===v.$dropdown[0]||e.target.parentNode===v.$dropdown[0])return!1;v.$control.has(e.target).length||e.target===v.$control[0]||v.blur(e.target)}}),w.on(["scroll"+g,"resize"+g].join(" "),function(){v.isOpen&&v.positionDropdown.apply(v,arguments)}),w.on("mousemove"+g,function(){v.ignoreHover=!1}),this.revertSettings={$children:b.children().detach(),tabindex:b.attr("tabindex")},b.attr("tabindex",-1).hide().after(v.$wrapper),e.isArray(f.items)&&(v.setValue(f.items),delete f.items),l&&b.on("invalid"+g,function(e){e.preventDefault(),v.isInvalid=!0,v.refreshState()}),v.updateOriginalInput(),v.refreshItems(),v.refreshState(),v.updatePlaceholder(),v.isSetup=!0,b.is(":disabled")&&v.disable(),v.on("change",this.onChange),b.data("selectize",v),b.addClass("selectized"),v.trigger("initialize"),!0===f.preload&&v.onSearchChange("")},setupTemplates:function(){var t=this,i=t.settings.labelField,n=t.settings.optgroupLabelField,o={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[i])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[i])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},o,t.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]])&&this.on(e,t)},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(t){var i=this,n=t.isDefaultPrevented();if(e(t.target),i.isFocused){if(t.target!==i.$control_input[0])return"single"===i.settings.mode?i.isOpen?i.close():i.open():n||i.setActiveItem(null),!1}else n||window.setTimeout(function(){i.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var i=this;i.isFull()||i.isInputHidden||i.isLocked?t.preventDefault():i.settings.splitOn&&setTimeout(function(){for(var t=e.trim(i.$control_input.val()||"").split(i.settings.splitOn),n=0,o=t.length;o>n;n++)i.createItem(t[n])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target,this.$control_input[0],this);{if(!t.isLocked){switch(e.keyCode){case 65:if(t.isCmdDown)return void t.selectAll();break;case 27:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,-1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case 13:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case 37:return void t.advanceSelection(-1,e);case 39:return void t.advanceSelection(1,e);case 9:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case 8:case 46:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(a?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()}9!==e.keyCode&&e.preventDefault()}},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(n){i.apply(t,[e,n])})))},onFocus:function(e){var t=this,i=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(e);var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),(t||document.body).focus(),i.ignoreFocus=!1,i.trigger("blur")};i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var i,n,o=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),(n=e(t.currentTarget)).hasClass("create")?o.createItem(null,function(){o.settings.closeAfterSelect&&o.close()}):void 0!==(i=n.attr("data-value"))&&(o.lastQuery=null,o.setTextboxValue(""),o.addItem(i),o.settings.closeAfterSelect?o.close():!o.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&o.setActiveOption(o.getOption(i)))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){g(this,t?[]:["change"],function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,i){var n,o,a,r,s,l,c,d,p=this;if("single"!==p.settings.mode){if(!(t=e(t)).length)return e(p.$activeItems).removeClass("active"),p.$activeItems=[],void(p.isFocused&&p.showInput());if("mousedown"===(n=i&&i.type.toLowerCase())&&p.isShiftDown&&p.$activeItems.length){for(d=p.$control.children(".active:last"),(r=Array.prototype.indexOf.apply(p.$control[0].childNodes,[d[0]]))>(s=Array.prototype.indexOf.apply(p.$control[0].childNodes,[t[0]]))&&(c=r,r=s,s=c),o=r;s>=o;o++)l=p.$control[0].childNodes[o],-1===p.$activeItems.indexOf(l)&&(e(l).addClass("active"),p.$activeItems.push(l));i.preventDefault()}else"mousedown"===n&&p.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(a=p.$activeItems.indexOf(t[0]),p.$activeItems.splice(a,1),t.removeClass("active")):p.$activeItems.push(t.addClass("active")[0]):(e(p.$activeItems).removeClass("active"),p.$activeItems=[t.addClass("active")[0]]);p.hideInput(),this.isFocused||p.focus()}},setActiveOption:function(t,i,n){var o,a,r,s,l,d=this;d.$activeOption&&d.$activeOption.removeClass("active"),d.$activeOption=null,(t=e(t)).length&&(d.$activeOption=t.addClass("active"),(i||!c(i))&&(o=d.$dropdown_content.height(),a=d.$activeOption.outerHeight(!0),i=d.$dropdown_content.scrollTop()||0,r=d.$activeOption.offset().top-d.$dropdown_content.offset().top+i,s=r,l=r-o+a,r+a>o+i?d.$dropdown_content.stop().animate({scrollTop:l},n?d.settings.scrollDuration:0):i>r&&d.$dropdown_content.stop().animate({scrollTop:s},n?d.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var i,n,o,a=this,r=a.settings,s=this.getSearchOptions();if(r.score&&"function"!=typeof(o=a.settings.score.apply(this,[t])))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==a.lastQuery?(a.lastQuery=t,n=a.sifter.search(t,e.extend(s,{score:o})),a.currentResults=n):n=e.extend(!0,{},a.currentResults),r.hideSelected)for(i=n.items.length-1;i>=0;i--)-1!==a.items.indexOf(d(n.items[i].id))&&n.items.splice(i,1);return n},refreshOptions:function(t){var i,o,a,r,s,l,c,p,u,h,v,f,g,m,w,y;void 0===t&&(t=!0);var b=this,C=e.trim(b.$control_input.val()),_=b.search(C),x=b.$dropdown_content,k=b.$activeOption&&d(b.$activeOption.attr("data-value"));for(r=_.items.length,"number"==typeof b.settings.maxOptions&&(r=Math.min(r,b.settings.maxOptions)),s={},l=[],i=0;r>i;i++)for(c=b.options[_.items[i].id],p=b.render("option",c),u=c[b.settings.optgroupField]||"",h=e.isArray(u)?u:[u],o=0,a=h&&h.length;a>o;o++)u=h[o],b.optgroups.hasOwnProperty(u)||(u=""),s.hasOwnProperty(u)||(s[u]=[],l.push(u)),s[u].push(p);for(this.settings.lockOptgroupOrder&&l.sort(function(e,t){return(b.optgroups[e].$order||0)-(b.optgroups[t].$order||0)}),v=[],i=0,r=l.length;r>i;i++)u=l[i],b.optgroups.hasOwnProperty(u)&&s[u].length?(f=b.render("optgroup_header",b.optgroups[u])||"",f+=s[u].join(""),v.push(b.render("optgroup",e.extend({},b.optgroups[u],{html:f})))):v.push(s[u].join(""));if(x.html(v.join("")),b.settings.highlight&&_.query.length&&_.tokens.length)for(i=0,r=_.tokens.length;r>i;i++)n(x,_.tokens[i].regex);if(!b.settings.hideSelected)for(i=0,r=b.items.length;r>i;i++)b.getOption(b.items[i]).addClass("selected");(g=b.canCreate(C))&&(x.prepend(b.render("option_create",{input:C})),y=e(x[0].childNodes[0])),b.hasOptions=_.items.length>0||g,b.hasOptions?(_.items.length>0?((w=k&&b.getOption(k))&&w.length?m=w:"single"===b.settings.mode&&b.items.length&&(m=b.getOption(b.items[0])),m&&m.length||(m=y&&!b.settings.addPrecedence?b.getAdjacentOption(y,1):x.find("[data-selectable]:first"))):m=y,b.setActiveOption(m),t&&!b.isOpen&&b.open()):(b.setActiveOption(null),t&&b.isOpen&&b.close())},addOption:function(t){var i,n,o,a=this;if(e.isArray(t))for(i=0,n=t.length;n>i;i++)a.addOption(t[i]);else(o=a.registerOption(t))&&(a.userOptions[o]=!0,a.lastQuery=null,a.trigger("option_add",o,t))},registerOption:function(e){var t=d(e[this.settings.valueField]);return!(!t||this.options.hasOwnProperty(t))&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=d(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,i){var n,o,a,r,s,l,c,p=this;if(t=d(t),a=d(i[p.settings.valueField]),null!==t&&p.options.hasOwnProperty(t)){if("string"!=typeof a)throw new Error("Value must be set in option data");c=p.options[t].$order,a!==t&&(delete p.options[t],-1!==(r=p.items.indexOf(t))&&p.items.splice(r,1,a)),i.$order=i.$order||c,p.options[a]=i,s=p.renderCache.item,l=p.renderCache.option,s&&(delete s[t],delete s[a]),l&&(delete l[t],delete l[a]),-1!==p.items.indexOf(a)&&(n=p.getItem(t),o=e(p.render("item",i)),n.hasClass("active")&&o.addClass("active"),n.replaceWith(o)),p.lastQuery=null,p.isOpen&&p.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=d(e);var n=i.renderCache.item,o=i.renderCache.option;n&&delete n[e],o&&delete o[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,i){var n=this.$dropdown.find("[data-selectable]"),o=n.index(t)+i;return o>=0&&o<n.length?n.eq(o):e()},getElementWithValue:function(t,i){if(void 0!==(t=d(t))&&null!==t)for(var n=0,o=i.length;o>n;n++)if(i[n].getAttribute("data-value")===t)return e(i[n]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,i){for(var n=e.isArray(t)?t:[t],o=0,a=n.length;a>o;o++)this.isPending=a-1>o,this.addItem(n[o],i)},addItem:function(t,i){g(this,i?[]:["change"],function(){var n,o,a,r,s,l=this,c=l.settings.mode;return t=d(t),-1!==l.items.indexOf(t)?void("single"===c&&l.close()):void(l.options.hasOwnProperty(t)&&("single"===c&&l.clear(i),"multi"===c&&l.isFull()||(n=e(l.render("item",l.options[t])),s=l.isFull(),l.items.splice(l.caretPos,0,t),l.insertAtCaret(n),(!l.isPending||!s&&l.isFull())&&l.refreshState(),l.isSetup&&(a=l.$dropdown_content.find("[data-selectable]"),l.isPending||(o=l.getOption(t),r=l.getAdjacentOption(o,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==c),r&&l.setActiveOption(l.getOption(r))),!a.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",t,n),l.updateOriginalInput({silent:i})))))})},removeItem:function(e,t){var i,n,o,a=this;i="object"==typeof e?e:a.getItem(e),e=d(i.attr("data-value")),-1!==(n=a.items.indexOf(e))&&(i.remove(),i.hasClass("active")&&(o=a.$activeItems.indexOf(i[0]),a.$activeItems.splice(o,1)),a.items.splice(n,1),a.lastQuery=null,!a.settings.persist&&a.userOptions.hasOwnProperty(e)&&a.removeOption(e,t),n<a.caretPos&&a.setCaret(a.caretPos-1),a.refreshState(),a.updatePlaceholder(),a.updateOriginalInput({silent:t}),a.positionDropdown(),a.trigger("item_remove",e,i))},createItem:function(t,i){var n=this,o=n.caretPos;t=t||e.trim(n.$control_input.val()||"");var a=arguments[arguments.length-1];if("function"!=typeof a&&(a=function(){}),"boolean"!=typeof i&&(i=!0),!n.canCreate(t))return a(),!1;n.lock();var r="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},s=v(function(e){if(n.unlock(),!e||"object"!=typeof e)return a();var t=d(e[n.settings.valueField]);return"string"!=typeof t?a():(n.setTextboxValue(""),n.addOption(e),n.setCaret(o),n.addItem(t),n.refreshOptions(i&&"single"!==n.settings.mode),void a(e))}),l=r.apply(this,[t,s]);return void 0!==l&&s(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e=this;e.isRequired&&(e.items.length&&(e.isInvalid=!1),e.$control_input.prop("required",void 0)),e.refreshClasses()},refreshClasses:function(){var t=this,i=t.isFull(),n=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",n).toggleClass("full",i).toggleClass("not-full",!i).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!i&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,n,o,a=this;if(e=e||{},1===a.tagType){for(n=[],t=0,i=a.items.length;i>t;t++)o=a.options[a.items[t]][a.settings.labelField]||"",n.push('<option value="'+p(a.items[t])+'" selected="selected">'+p(o)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),a.$input.html(n.join(""))}else a.$input.val(a.getValue()),a.$input.attr("value",a.$input.val());a.isSetup&&(e.silent||a.trigger("change",a.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var i=Math.min(this.caretPos,this.items.length);0===i?this.$control.prepend(t):e(this.$control[0].childNodes[i]).before(t),this.setCaret(i+1)},deleteSelection:function(t){var i,n,o,a,r,s,l,c,d,p=this;if(o=t&&8===t.keyCode?-1:1,a=w(p.$control_input[0]),p.$activeOption&&!p.settings.hideSelected&&(l=p.getAdjacentOption(p.$activeOption,-1).attr("data-value")),r=[],p.$activeItems.length){for(d=p.$control.children(".active:"+(o>0?"last":"first")),s=p.$control.children(":not(input)").index(d),o>0&&s++,i=0,n=p.$activeItems.length;n>i;i++)r.push(e(p.$activeItems[i]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(p.isFocused||"single"===p.settings.mode)&&p.items.length&&(0>o&&0===a.start&&0===a.length?r.push(p.items[p.caretPos-1]):o>0&&a.start===p.$control_input.val().length&&r.push(p.items[p.caretPos]));if(!r.length||"function"==typeof p.settings.onDelete&&!1===p.settings.onDelete.apply(p,[r]))return!1;for(void 0!==s&&p.setCaret(s);r.length;)p.removeItem(r.pop());return p.showInput(),p.positionDropdown(),p.refreshOptions(!0),l&&(c=p.getOption(l)).length&&p.setActiveOption(c),!0},advanceSelection:function(e,t){var i,n,o,a,r,s=this;0!==e&&(s.rtl&&(e*=-1),i=e>0?"last":"first",n=w(s.$control_input[0]),s.isFocused&&!s.isInputHidden?(a=s.$control_input.val().length,(0>e?0===n.start&&0===n.length:n.start===a)&&!a&&s.advanceCaret(e,t)):(r=s.$control.children(".active:"+i)).length&&(o=s.$control.children(":not(input)").index(r),s.setActiveItem(null),s.setCaret(e>0?o+1:o)))},advanceCaret:function(e,t){var i,n,o=this;0!==e&&(i=e>0?"next":"prev",o.isShiftDown?(n=o.$control_input[i]()).length&&(o.hideInput(),o.setActiveItem(n),t&&t.preventDefault()):o.setCaret(o.caretPos+e))},setCaret:function(t){var i=this;if(t="single"===i.settings.mode?i.items.length:Math.max(0,Math.min(i.items.length,t)),!i.isPending){var n,o,a,r;for(n=0,o=(a=i.$control.children(":not(input)")).length;o>n;n++)r=e(a[n]).detach(),t>n?i.$control_input.before(r):i.$control.append(r)}i.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,i=t.eventNS,n=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(i),e(document).off(i),e(document.body).off(i),delete t.$input[0].selectize},render:function(e,t){var i,n,o="",a=!1,r=this,s=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===e||"item"===e)&&(i=d(t[r.settings.valueField]),a=!!i),a&&(c(r.renderCache[e])||(r.renderCache[e]={}),r.renderCache[e].hasOwnProperty(i))?r.renderCache[e][i]:(o=r.settings.render[e].apply(this,[t,p]),("option"===e||"option_create"===e)&&(o=o.replace(s,"<$1 data-selectable")),"optgroup"===e&&(n=t[r.settings.optgroupValueField]||"",o=o.replace(s,'<$1 data-group="'+u(p(n))+'"')),("option"===e||"item"===e)&&(o=o.replace(s,'<$1 data-value="'+u(p(i||""))+'"')),a&&(r.renderCache[e][i]=o),o)},clearCache:function(e){var t=this;void 0===e?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var i=t.settings.createFilter;return!(!e.length||"function"==typeof i&&!i.apply(t,[e])||"string"==typeof i&&!new RegExp(i).test(e)||i instanceof RegExp&&!i.test(e))}}),_.count=0,_.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var i=e.fn.selectize.defaults,n=e.extend({},i,t),o=n.dataAttr,a=n.labelField,r=n.valueField,s=n.optgroupField,l=n.optgroupLabelField,c=n.optgroupValueField,p=function(t,i){var s,l,c,d,p=t.attr(o);if(p)for(i.options=JSON.parse(p),s=0,l=i.options.length;l>s;s++)i.items.push(i.options[s][r]);else{var u=e.trim(t.val()||"");if(!n.allowEmptyOption&&!u.length)return;for(s=0,l=(c=u.split(n.delimiter)).length;l>s;s++)d={},d[a]=c[s],d[r]=c[s],i.options.push(d);i.items=c}},u=function(t,i){var p,u,h,v,f=i.options,g={},m=function(e){var t=o&&e.attr(o);return"string"==typeof t&&t.length?JSON.parse(t):null},w=function(t,o){t=e(t);var l=d(t.attr("value"));if(l||n.allowEmptyOption)if(g.hasOwnProperty(l)){if(o){var c=g[l][s];c?e.isArray(c)?c.push(o):g[l][s]=[c,o]:g[l][s]=o}}else{var p=m(t)||{};p[a]=p[a]||t.text(),p[r]=p[r]||l,p[s]=p[s]||o,g[l]=p,f.push(p),t.is(":selected")&&i.items.push(l)}};for(i.maxItems=t.attr("multiple")?null:1,p=0,u=(v=t.children()).length;u>p;p++)"optgroup"===(h=v[p].tagName.toLowerCase())?function(t){var n,o,a,r,s;for((a=(t=e(t)).attr("label"))&&(r=m(t)||{},r[l]=a,r[c]=a,i.optgroups.push(r)),n=0,o=(s=e("option",t)).length;o>n;n++)w(s[n],a)}(v[p]):"option"===h&&w(v[p])};return this.each(function(){if(!this.selectize){var o=e(this),a=this.tagName.toLowerCase(),r=o.attr("placeholder")||o.attr("data-placeholder");r||n.allowEmptyOption||(r=o.children('option[value=""]').text());var s={placeholder:r,options:[],optgroups:[],items:[]};"select"===a?u(o,s):p(o,s),new _(o,e.extend(!0,{},i,s,t))}})},e.fn.selectize.defaults=_.defaults,e.fn.selectize.support={validity:l},_.define("drag_drop",function(){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var t=this;t.lock=function(){var e=t.lock;return function(){var i=t.$control.data("sortable");return i&&i.disable(),e.apply(t,arguments)}}(),t.unlock=function(){var e=t.unlock;return function(){var i=t.$control.data("sortable");return i&&i.enable(),e.apply(t,arguments)}}(),t.setup=function(){var i=t.setup;return function(){i.apply(this,arguments);var n=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),n.css({overflow:"visible"})},stop:function(){n.css({overflow:"hidden"});var i=t.$activeItems?t.$activeItems.slice():null,o=[];n.children("[data-value]").each(function(){o.push(e(this).attr("data-value"))}),t.setValue(o),t.setActiveItem(i)}})}}()}}),_.define("dropdown_header",function(t){var i=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),i.setup=function(){var n=i.setup;return function(){n.apply(i,arguments),i.$dropdown_header=e(t.html(t)),i.$dropdown.prepend(i.$dropdown_header)}}()}),_.define("optgroup_columns",function(t){var i=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,i){var n=t.closest("[data-group]").find("[data-selectable]"),o=n.index(t)+i;return o>=0&&o<n.length?n.eq(o):e()},this.onKeyDown=function(){var e=i.onKeyDown;return function(t){var n,o,a,r;return!this.isOpen||37!==t.keyCode&&39!==t.keyCode?e.apply(this,arguments):(i.ignoreHover=!0,r=this.$activeOption.closest("[data-group]"),n=r.find("[data-selectable]").index(this.$activeOption),r=37===t.keyCode?r.prev("[data-group]"):r.next("[data-group]"),a=r.find("[data-selectable]"),void((o=a.eq(Math.min(a.length-1,n))).length&&this.setActiveOption(o)))}}();var n=function(){var e,t=n.width,i=document;return void 0===t&&(e=i.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,i.body.appendChild(e),t=n.width=e.offsetWidth-e.clientWidth,i.body.removeChild(e)),t},o=function(){var o,a,r,s,l,c,d;if(d=e("[data-group]",i.$dropdown_content),(a=d.length)&&i.$dropdown_content.width()){if(t.equalizeHeight){for(r=0,o=0;a>o;o++)r=Math.max(r,d.eq(o).height());d.css({height:r})}t.equalizeWidth&&(c=i.$dropdown_content.innerWidth()-n(),s=Math.round(c/a),d.css({width:s}),a>1&&(l=c-s*(a-1),d.eq(a-1).css({width:l})))}};(t.equalizeHeight||t.equalizeWidth)&&(h.after(this,"positionDropdown",o),h.after(this,"refreshOptions",o))}),_.define("remove_button",function(t){if("single"!==this.settings.mode){var i=this,n='<a href="javascript:void(0)" class="'+(t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t)).className+'" tabindex="-1" title="'+p(t.title)+'">'+t.label+"</a>",o=function(e,t){var i=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,i)+t+e.substring(i)};this.setup=function(){var a=i.setup;return function(){if(t.append){var r=i.settings.render.item;i.settings.render.item=function(){return o(r.apply(this,arguments),n)}}a.apply(this,arguments),this.$control.on("click","."+t.className,function(t){if(t.preventDefault(),!i.isLocked){var n=e(t.currentTarget).parent();i.setActiveItem(n),i.deleteSelection()&&i.setCaret(i.items.length)}})}}()}}),_.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var i=t.onKeyDown;return function(t){var n,o;return 8===t.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1)>=0&&n<this.items.length?(o=this.options[this.items[n]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[o])),this.refreshOptions(!0)),void t.preventDefault()):i.apply(this,arguments)}}()}),_}),function(e,t){e(document).on("ev-repeatable-sortable-stop",function(t,i){var n=e(".wp-editor-area",i).first(),o=n.attr("id"),a=n.parents(".wp-editor-wrap").first(),r=n.clone();r.removeClass("wp-editor-area"),r.removeAttr("aria-hidden"),r.removeAttr("style"),a.replaceWith(r),tinymce.remove("#"+o),r.wp_editor({})}),e.fn.wp_editor=function(t){e(this);if(e(this).is("textarea")||console.warn("Element must be a textarea"),"undefined"!=typeof tinyMCEPreInit&&"undefined"!=typeof QTags&&"undefined"!=typeof ap_vars||console.warn("js_wp_editor( $settings ); must be loaded"),!e(this).is("textarea")||"undefined"==typeof tinyMCEPreInit||"undefined"==typeof QTags||"undefined"==typeof ap_vars)return this;var i={mode:"tmce",mceInit:{theme:"modern",skin:"lightgray",language:"en",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignleft"],deep:!1,remove:"none"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["aligncenter"],deep:!1,remove:"none"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignright"],deep:!1,remove:"none"}],strikethrough:{inline:"del",deep:!0,split:!0}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,paste_webkit_styles:"font-weight font-style color",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",wpeditimage_disable_captions:!1,wpeditimage_html5_captions:!1,plugins:"charmap,hr,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview,image",content_css:ap_vars.includes_url+"css/dashicons.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/mediaelementplayer.min.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/wp-mediaelement.css?ver=3.9,"+ap_vars.includes_url+"js/tinymce/skins/wordpress/wp-content.css?ver=3.9",selector:"#apid",resize:"vertical",menubar:!1,wpautop:!0,indent:!1,toolbar1:"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,fullscreen,wp_adv",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:":prev,:next",body_class:"apid"}},n=new RegExp("apid","g");tinyMCEPreInit.mceInit.apid&&(i.mceInit=tinyMCEPreInit.mceInit.apid);var t=e.extend(!0,i,t);return void 0===switchEditors.evswitchto&&(switchEditors.evswitchto=function(e){var t=e.id,i=t.length,n=t.substr(0,i-5),o=t.substr(i-4);return this.go(n,o),!1}),this.each(function(){if(e(this).is("textarea")){var i=e(this).attr("id");e.each(t.mceInit,function(o,a){"string"==e.type(a)&&(t.mceInit[o]=a.replace(n,i))}),t.mode="tmce"==t.mode?"tmce":"html";var o=e.extend({},t.mceInit,{selector:"#"+i});tinyMCEPreInit.mceInit[i]=o,e(this).addClass("wp-editor-area").show();var a=this;if(e(this).closest(".wp-editor-wrap").length){var r=e(this).closest(".wp-editor-wrap").parent();e(this).closest(".wp-editor-wrap").before(e(this).clone()),e(this).closest(".wp-editor-wrap").remove(),a=r.find('textarea[id="'+i+'"]')}var s=e('<div id="wp-'+i+'-wrap" class="wp-core-ui wp-editor-wrap '+t.mode+'-active" />'),l=e('<div id="wp-'+i+'-editor-tools" class="wp-editor-tools hide-if-no-js" />'),c=e('<div class="wp-editor-tabs" />'),d=e('<a id="'+i+'-html" class="ev-switch-editor switch-html" onclick="switchEditors.evswitchto(this);">'+ev_framework.editor.text+"</a>"),p=e('<a id="'+i+'-tmce" class="ev-switch-editor switch-tmce" onclick="switchEditors.evswitchto(this);">'+ev_framework.editor.visual+"</a>"),u=e('<div id="wp-'+i+'-media-buttons" class="wp-media-buttons" />'),h=e('<a href="#" id="insert-media-button" class="button insert-media add_media" data-editor="'+i+'" title="'+ev_framework.editor.add_media+'"><span class="wp-media-buttons-icon"></span> '+ev_framework.editor.add_media+"</a>"),v=e('<div id="wp-'+i+'-editor-container" class="wp-editor-container" />');ap_vars.upload_files&&(h.appendTo(u),u.appendTo(l)),p.appendTo(c),d.appendTo(c),c.appendTo(l),l.appendTo(s),v.appendTo(s),v.append(e(a).clone().addClass("wp-editor-area")),e(a).before(s),e(a).remove(),new QTags(i),QTags._buttonsInit(),switchEditors.go(i,t.mode),e(s).on("click",".insert-media",function(t){var i=e(t.currentTarget),n=i.data("editor"),o={frame:"post",state:"insert",title:wp.media.view.l10n.addMedia,multiple:!0};t.preventDefault(),i.blur(),i.hasClass("gallery")&&(o.state="gallery",o.title=wp.media.view.l10n.createGalleryTitle),wp.media.editor.open(n,o)})}else console.warn("Element must be a textarea")})}}(jQuery,window),function(e){var t={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},i={duration:"fast",direction:"both",easing:"linear",offset:0},n=/^(?:html)$/i,o=function(t,i){i=i||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle);var n=!(!document.defaultView||!document.defaultView.getComputedStyle),o={top:parseFloat(n?i.borderTopWidth:e.css(t,"borderTopWidth"))||0,left:parseFloat(n?i.borderLeftWidth:e.css(t,"borderLeftWidth"))||0,bottom:parseFloat(n?i.borderBottomWidth:e.css(t,"borderBottomWidth"))||0,right:parseFloat(n?i.borderRightWidth:e.css(t,"borderRightWidth"))||0};return{top:o.top,left:o.left,bottom:o.bottom,right:o.right,vertical:o.top+o.bottom,horizontal:o.left+o.right}},a=function(t){var i=e(window),a=n.test(t[0].nodeName);return{border:a?{top:0,left:0,bottom:0,right:0}:o(t[0]),scroll:{top:(a?i:t).scrollTop(),left:(a?i:t).scrollLeft()},scrollbar:{right:a?0:t.innerWidth()-t[0].clientWidth,bottom:a?0:t.innerHeight()-t[0].clientHeight},rect:function(){var e=t[0].getBoundingClientRect();return{top:a?0:e.top,left:a?0:e.left,bottom:a?t[0].clientHeight:e.bottom,right:a?t[0].clientWidth:e.right}}()}};e.fn.extend({scrollintoview:function(o){(o=e.extend({},i,o)).direction=t["string"==typeof o.direction&&o.direction.toLowerCase()]||t.both;var r="";!0===o.direction.x&&(r="horizontal"),!0===o.direction.y&&(r=r?"both":"vertical");var s=this.eq(0),l=s.closest(":scrollable("+r+")");if(l.length>0){l=l.eq(0);var c={e:a(s),s:a(l)},d={top:c.e.rect.top-(c.s.rect.top+c.s.border.top),bottom:c.s.rect.bottom-c.s.border.bottom-c.s.scrollbar.bottom-c.e.rect.bottom,left:c.e.rect.left-(c.s.rect.left+c.s.border.left),right:c.s.rect.right-c.s.border.right-c.s.scrollbar.right-c.e.rect.right},p={};!0===o.direction.y&&(d.top<0?p.scrollTop=c.s.scroll.top+d.top:d.top>0&&d.bottom<0&&(p.scrollTop=c.s.scroll.top+Math.min(d.top,-d.bottom)),p.scrollTop+=parseInt(o.offset,10)),!0===o.direction.x&&(d.left<0?p.scrollLeft=c.s.scroll.left+d.left:d.left>0&&d.right<0&&(p.scrollLeft=c.s.scroll.left+Math.min(d.left,-d.right)),p.scrollLeft+=parseInt(o.offset,10)),e.isEmptyObject(p)?e.isFunction(o.complete)&&o.complete.call(l[0]):(n.test(l[0].nodeName)&&(l=e("html,body")),l.animate(p,o.duration,o.easing).eq(0).queue(function(t){e.isFunction(o.complete)&&o.complete.call(l[0]),t()}))}return this}});var r={auto:!0,scroll:!0,visible:!1,hidden:!1};e.extend(e.expr[":"],{scrollable:function(e,i,o,a){var s=t["string"==typeof o[3]&&o[3].toLowerCase()]||t.both,l=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,c={x:r[l.overflowX.toLowerCase()]||!1,y:r[l.overflowY.toLowerCase()]||!1,isRoot:n.test(e.nodeName)};if(!c.x&&!c.y&&!c.isRoot)return!1;var d={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(c.x||c.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(c.y||c.isRoot)&&this.height.scroll>this.height.client}};return s.y&&d.scrollableY()||s.x&&d.scrollableX()}})}(jQuery),function(e){e.evf.history={},e.evf.history.push=function(e){history&&history.pushState&&history.pushState(null,null,e)},e.evf.history.pushQueryString=function(t,i){t=e(t);var n="",o=window.location.toString();if(t.attr("href")&&0===t.attr("href").indexOf("#")?n=t.attr("href"):t.attr("data-target")&&0===t.attr("data-target").indexOf("#")&&(n=t.attr("data-target")),""!==(n=n.replace("#",""))){if(""===window.location.search)o+="?"+i+"="+n;else{var a=window.location.search.substring(1),r=e.deparam(a);r[i]=n,o=o.replace(a,e.param(r))}e.evf.history.push(o)}},e.evf.history.pushHash=function(t){var i="";(t=e(t)).attr("href")&&0===t.attr("href").indexOf("#")?i=t.attr("href"):t.attr("data-target")&&0===t.attr("data-target").indexOf("#")&&(i=t.attr("data-target")),""!==i&&e.evf.history.push(i)}}(jQuery),function(e){function t(t,n,o){var a=t.outerHeight(),r=t.outerWidth(),s=n.outerHeight()+i/2,l=n.outerWidth(),c={},d=t.offset().top,p=d-e(window).scrollTop();e("body").is(".admin-bar")&&(p-=e("#wpadminbar").outerHeight()),c.left=t.offset().left-l/2+r/2,n.removeClass("ev-tooltip-expand-top ev-tooltip-expand-bottom ev-tooltip-expand-left ev-tooltip-expand-right ev-tooltip-vertical ev-tooltip-horizontal");var u=o&&"vertical"!=o?"ev-tooltip-horizontal":"ev-tooltip-vertical";s<=p?(d+=2,n.addClass("ev-tooltip-expand-top"),c.top=d-s):(d-=2,n.addClass("ev-tooltip-expand-bottom"),c.top=d+a+i/2),n.addClass(u).css(c)}var i=16;window.ev_tooltip_destroy=function(t){var i=e("body").get(0).style;if("transition"in i||"WebkitTransition"in i||"MozTransition"in i||"msTransition"in i||"OTransition"in i){e(this).on("transitionend.ev webkitTransitionEnd.ev oTransitionEnd.ev MSTransitionEnd.ev",function(e){t.remove()})}else t.remove();t.removeClass("ev-tooltip-active")},window.ev_seek_and_destroy_tooltips=function(){e(".ev-tooltip-container").remove()},window.ev_create_tooltip=function(i,n,o){var a=e(i);if(!(void 0!==n&&n||void 0!==(n=a.attr("data-title")||a.attr("title"))&&""!==n))return!1;o=e.extend(!0,{},{class:"",mode:"horizontal"},o),ev_seek_and_destroy_tooltips();var r="ev-tooltip-container "+o.class,s=e('<div class="'+r+'"></div>').appendTo("body");return a.data("ev-tooltip",s),s.html(n).css({top:0,left:0}),e(window).on("resize scroll",function(){t(a,s,o.mode)}),t(a,s,o.mode),s.show(),s.addClass("ev-tooltip-active"),s},e.evf.delegate(".ev-tooltip","mouseover","tooltip",function(){ev_create_tooltip(e(this))}),e.evf.delegate(".ev-tooltip","mouseout click","tooltip",function(){var t=e(this).data("ev-tooltip");t&&window.ev_tooltip_destroy(t)}),e.evf.delegate(".ev-tooltip-container","click","tooltip",function(){window.ev_tooltip_destroy(e(this))})}(jQuery),function(e){window.Ev_MediaSelector=function(t){window.ev_ms_obj=this,window.ev_ms_obj.options=e.extend({},{title:void 0,multiple:!1,type:"",button:void 0,close:function(){},select:function(e){}},t),window.ev_ms_obj.frame=null,window.ev_ms_obj.open=function(e){var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"ev-media-selector",title:window.ev_ms_obj.options.title,allowLocalEdits:!1,displaySettings:!1,displayUserSettings:!1,multiple:window.ev_ms_obj.options.multiple,library:wp.media.query({type:window.ev_ms_obj.options.type})},wp.media.controller.Library.prototype.defaults)});window.ev_ms_obj.frame=wp.media({title:window.ev_ms_obj.options.title,button:{text:window.ev_ms_obj.options.button},state:"ev-media-selector",states:[new t]}),window.ev_ms_obj.frame.on("open",function(){var t=window.ev_ms_obj.frame.state("ev-media-selector").get("selection");t.reset(),_.each(e,function(e){var i=wp.media.attachment(e);i.fetch(),t.add(i?[i]:[])})}),window.ev_ms_obj.frame.on("select",function(){var e=window.ev_ms_obj.frame.state("ev-media-selector").get("selection"),t=window.ev_ms_obj.options.multiple?e.toJSON():e.first().toJSON();window.ev_ms_obj.options.select(t)}),window.ev_ms_obj.frame.on("close",function(){window.ev_ms_obj.options.close()}),window.ev_ms_obj.frame.open()}}}(jQuery),function(e){function t(t){var i=(t=e(t).get(0)).getBoundingClientRect();i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)||e(t).scrollintoview({duration:300,direction:"vertical",offset:40})}function i(e,t,i,n){return e.substr(0,t)+i+e.substr(t+n)}e.evf.ui.add(".ev-sortable .ev-container-repeatable-inner-wrapper",function(){var t=null,n=function(i){if(null!==t)return!1;var n=0;return n=e(i).parents(".ev-bundle-fields-wrapper").length?e(i).parents(".ev-bundle-fields-wrapper").first():e(i).parents(".ev-field-inner").first(),t=n.outerHeight(),e.evSaveRichTextareas(n),e("#wpbody").css("padding-bottom",t+10),!1},o=function(){t=null,e("#wpbody").css("padding-bottom","")};e(document).off("mousedown.ev_sortable").off("mouseup.ev_sortable"),e(document).on("mousedown.ev_sortable",".ev-sortable-handle",function(){n(e(this))}),e(document).on("mouseup.ev_sortable",".ev-sortable-handle",function(){o()}),e(this).sortable({handle:".ev-sortable-handle",items:"> .ev-field-inner, .ev-bundle-fields-wrapper",tolerance:"pointer",distance:10,start:function(i,n){var a={height:t};e(".ui-sortable-placeholder").css(a),o()},stop:function(t,n){var o=e(n.item).parents(".ev-sortable").first(),a=e("> .ev-field-inner, .ev-bundle-fields-wrapper",o),r=e(n.item).parents(".ev-repeatable").length;a.each(function(t,n){e("[name]",n).each(function(){var n=e(this).attr("name"),o=new RegExp(/\[\d+\]/g),a=n.match(o),s=0;if(a&&a.length){for(var l=0;l<a.length;l++)a[l]=l===r-1?"["+t+"]":a[l];for(var c=null;null!==(c=o.exec(n));)n=i(n,c.index,a[s],a[s].length),s++;e(this).attr("name",n)}})}),e(document).trigger("ev-repeatable-sortable-stop",[e(n.item)])}})}),e.evf.delegate(".ev-repeatable-remove","click","repeatable",function(){var t=e(this).parents(".ev-field").first(),i=e(".ev-container, .ev-bundle-fields-wrapper",t).first();return e(this).parents(".ev-field-inner, .ev-bundle-fields-wrapper").first().remove(),e(".ev-field-inner",i).length||t.addClass("ev-no-fields"),!1}),e.evf.delegate(".ev-repeat-remove-all","click","repeatable",function(){var t=e(this).parents(".ev-field").first(),i=e(".ev-container",t).first();return e(".ev-field-inner, .ev-bundle-fields-wrapper",i).remove(),t.addClass("ev-no-fields"),!1}),e.evf.delegate(".ev-field.ev-repeatable .ev-repeat","click","repeatable",function(){var i=e(this),n=i.parents(".ev-field.ev-repeatable").first(),o=i.parents(".ev-field-inner, .ev-bundle-fields-wrapper").first(),a=i.parents(".ev-container-repeatable-inner-wrapper").first(),r=e(".ev-empty-state",n),s=function(){var e=parseInt(r.attr("data-count"),10);return e+=1,r.attr("data-count",e),e},l=function(t,i){e(".ev-field-inner",i).each(function(){e(".ev-repeatable-controls",this).first();var t=parseInt(r.attr("data-count"),10);e("[name]",h).each(function(){e(this).attr("name",this.name.replaceLast("[]","["+t+"]"))})})},c=r.attr("data-key"),d=e("script[type='text/template'][data-template='"+c+"']"),p=i.attr("data-mode"),u=function(i,r){s();r?"append"===r?i.insertAfter(o):"prepend"===r&&i.insertBefore(o):i.appendTo(a),l(0,n),n.removeClass("ev-no-fields"),setTimeout(function(){e.evf.ui.build(),t(i)},1)};if(i.attr("data-action"))window[i.attr("data-action")](d,u);else{var h=e(e.evf.template(d,{}));u(h,p)}return!1})}(jQuery),function(e){e.evf.delegate(".ev-close-persistent-message","click","messages",function(){return e(this).parents(".ev-persistent-message").first().remove(),!1}),window.ev_save_options_tab_button=function(e,t){return!1},window.ev_save_options_tab=function(t){e.evSaveRichTextareas(t);var i=e("form",t).first(),n=e(".ev-btn-type-save[data-callback]",i).first(),o=i.serialize().replace(/%5B%5D/g,"[]"),a=e("#ev").val();return o+="&action="+n.attr("data-callback"),o+="&nonce="+a,ev_idle_button(n),e.post(i.attr("action"),o,function(e){ev_unidle_button(n,e)},"json"),!1},e.evf.on(".ev-admin-page .ev-tab > form","submit","save-options-tab",function(){var t=e(this).parents(".ev-tab").first();return window.ev_save_options_tab(t),!1})}(jQuery),function(e){e.evf.ui.add(".ev-image-upload[data-multiple][data-sortable] .ev-image-placeholder-container",function(){e(this).sortable({items:"> .ev-image-placeholder",update:function(t,i){var n=e(t.target).parents(".ev-image-upload").first(),o=e("input[data-id]",n),a=[];e(".ev-image-placeholder",n).each(function(){a.push(e("img[data-id]",e(this)).attr("data-id"))}),o.val(a.join(","))}})}),e.evf.delegate(".ev-image-upload .ev-upload-remove","click","image_upload",function(){var t=e(this).parents(".ev-image-upload").first(),i=e(".ev-image-placeholder-container",t),n=void 0!==t.attr("data-multiple"),o=e("input[data-id]",t);if(n){e(this).parents(".ev-image-placeholder").first().remove();var a=e(".ev-image-placeholder",t);if(a.length){var r=[];a.each(function(){r.push(e("img[data-id]",e(this)).attr("data-id"))}),o.val(r.join(","))}else{t.removeClass("ev-image-uploaded"),o.val("");var s=e("script[type='text/template'][data-template='ev-image-placeholder']");i.append(e.evf.template(s,{url:"",id:""}))}}else o.val(""),e("img",t).attr("src",""),t.removeClass("ev-image-uploaded");return!1}),e.evf.delegate(".ev-image-upload .ev-remove-all-action","click","image_upload",function(){var t=e(this).parents(".ev-image-upload").first(),i=e(".ev-image-placeholder",t),n=e("input[data-id]",t);return i.remove(),t.removeClass("ev-image-uploaded"),n.val(""),!1}),e.evf.delegate(".ev-image-upload .ev-edit-action, .ev-image-upload .ev-upload-action","click","image_upload",function(){var t=e(this).parents(".ev-image-upload").first(),i=e(".ev-image-placeholder-container",t),n=t.attr("data-thumb-size"),o=void 0!==t.attr("data-multiple"),a=e("input[data-id]",t).val();return new window.Ev_MediaSelector({type:"image",multiple:o,select:function(a){var r=e("script[type='text/template'][data-template='ev-image-placeholder']"),s="";if(i.html(""),o)s=_.pluck(a,"id").join(","),e.each(a,function(){var t="";this.sizes&&this.sizes.full&&(t=this.sizes.full.url),this.sizes&&this.sizes[n]&&(t=this.sizes[n].url),i.append(e.evf.template(r,{url:t,id:this.id}))});else{var l="";s=a.id,l=a.sizes&&a.sizes.full?a.sizes.full.url:a.url,a.sizes&&a.sizes[n]&&(l=a.sizes[n].url),i.append(e.evf.template(r,{url:l,id:s}))}t.addClass("ev-image-uploaded"),e("input[data-id]",t).val(s)}}).open(a.split(",")),!1})}(jQuery),function(e){e.evf.ui.add(".ev-attachment-upload-container[data-multiple][data-sortable]",function(){e(this).sortable({items:"> .ev-attachment-placeholder",update:function(t,i){var n=e(t.target),o=e("input[data-id]",n),a=[];e(".ev-attachment-placeholder",n).each(function(){a.push(e("[data-id]",e(this)).attr("data-id"))}),o.val(a.join(","))}})}),e.evf.delegate(".ev-attachment-placeholder .ev-upload-remove","click","attachment_upload",function(){var t=e(this).parents(".ev-attachment-placeholder").first(),i=e(this).parents(".ev-attachment-upload-container").first(),n=void 0!==i.attr("data-multiple"),o=e("input[data-id]",i);if(t.remove(),n){var a=e(".ev-attachment-placeholder",i);if(a.length){var r=[];a.each(function(){r.push(e("[data-id]",e(this)).attr("data-id"))}),o.val(r.join(","))}else i.removeClass("ev-attachment-uploaded"),o.val("")}else o.val(""),e("img",i).attr("src",""),i.removeClass("ev-attachment-uploaded");return!1}),e.evf.delegate(".ev-attachment-upload-container .ev-remove-all-action","click","attachment_upload",function(){var t=e(this).parents(".ev-attachment-upload-container").first(),i=e(".ev-attachment-placeholder",t),n=e("input[data-id]",t);return i.remove(),t.removeClass("ev-attachment-uploaded"),n.val(""),!1}),e.evf.delegate(".ev-attachment-upload-container .ev-edit-action, .ev-attachment-upload-container .ev-upload-action","click","attachment_upload",function(){var t=e(this).parents(".ev-attachment-upload-container").first(),i=t.attr("data-type"),n=(t.attr("data-thumb-size"),void 0!==t.attr("data-multiple")),o=e("input[data-id]",t).val();return new window.Ev_MediaSelector({type:i,multiple:n,select:function(i){var o="",a=e(".ev-attachment-upload-action",t),r=e("script[type='text/template'][data-template='ev-attachment-placeholder']");if(e(".ev-attachment-placeholder",t).remove(),n)o=_.pluck(i,"id").join(","),e.each(i,function(){var t=this.url.split(/[\\/]/).pop()+" ("+this.filesizeHumanReadable+")",i=this.type;this.subtype&&(i+="-"+this.subtype),a.before(e.evf.template(r,{type:i,id:this.id,title:this.title,extension:t,url:this.url}))});else{o=i.id;var s=i.url.split(/[\\/]/).pop()+" ("+i.filesizeHumanReadable+")",l=i.type;i.subtype&&(l+="-"+i.subtype),a.before(e.evf.template(r,{type:l,id:o,title:i.title,extension:s,url:i.url}))}t.addClass("ev-attachment-uploaded"),e("input[data-id]",t).val(o)}}).open(o.split(",")),!1})}(jQuery),function(e){e.evf.ui.add("select.ev-multiple-select-input-ajax",function(){e(this).each(function(){var t=e(this).attr("data-action"),i=e(this).attr("data-value-field"),n=e(this).attr("data-label-field"),o=e(this).attr("data-search-field"),a=e(this).attr("data-nonce"),r=e(this).attr("data-max")?parseInt(e(this).attr("data-max"),10):1e3,s=e(this).attr("data-create")?parseInt(e(this).attr("data-create"),10):0;e(this).selectize({plugins:["remove_button","drag_drop"],valueField:i,labelField:n,searchField:[o],dropdownParent:"body",create:s,maxItems:r,load:function(i,n){if(!i.length)return n();e.ajax({url:ajaxurl,type:"POST",data:{action:t,search:i,nonce:a},error:function(){n()},success:function(t){n(e.parseJSON(t))}})},render:{item:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"},option:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"}}})})}),e.evf.ui.add("input.ev-multiple-select-input",function(){e(this).each(function(){var t=e.parseJSON(e(this).attr("data-options")),i=e(this).attr("data-max")?parseInt(e(this).attr("data-max"),10):t.length;e(this).selectize({plugins:["remove_button","drag_drop"],options:t,valueField:"val",labelField:"label",searchField:["label"],dropdownParent:"body",maxItems:i,create:!1,render:{item:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.label),i+="</div>"},option:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.label),i+="</div>"}}})})})}(jQuery),function(e){function t(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}function i(e){return e=e.replace("rgba(",""),e=e.replace(")",""),e=e.replace(" ",""),(e=e.split(","))[e.length-1]}e.evf.delegate(".ev-color-preset","click","color",function(){var t=e(this).parents(".ev-color-presets-manager-wrapper").first(),i=e("[data-hex-value-input]",t);return e(this).hasClass("ev-selected")?(e(this).removeClass("ev-selected"),i.val("")):(e(".ev-selected",t).removeClass("ev-selected"),e(this).addClass("ev-selected"),i.val(e(this).attr("data-hex"))),!1}),e.evf.delegate("[data-color-delete-preset]","click","color",function(){var t=e(this),i=e(this).parents(".ev-color-preset").first(),n=i.attr("data-id"),o=e(this).parents(".ev-color-user-presets").first(),a=e(this).parents(".ev-color-presets-wrapper").first();return n&&(i.remove(),window.ev_seek_and_destroy_tooltips(),e(".ev-color-preset",a).length||e("body").removeClass("ev-has-color-presets"),e(".ev-color-preset",o).length?o.addClass("ev-color-has-user-presets"):o.removeClass("ev-color-has-user-presets"),ev_framework.color.presets=_.without(ev_framework.color.presets,_.findWhere(ev_framework.color.presets,{user:!0,id:n})),e.post(ajaxurl,{action:"ev_color_delete_preset",nonce:t.attr("data-nonce"),id:n},function(e){})),!1}),e.evf.delegate("[data-color-save-preset]","click","color",function(){var t=e(this),i=t.parents(".ev-color-wrapper").first(),n=e(".ev-color-input",i).val();if(n){var o=prompt(ev_framework.color.new_preset_name);if(!o)return!1;ev_idle_button(t),e.post(ajaxurl,{action:"ev_color_save_preset",nonce:t.attr("data-nonce"),hex:n,name:o,id:ev_framework.color.presets.length+1},function(i){ev_framework.color.presets.user||(ev_framework.color.presets.user=[]),ev_framework.color.presets.user.push({user:!0,hex:n,label:o}),e("body").addClass("ev-has-color-presets"),ev_unidle_button(t)})}return!1}),e.evf.delegate("[data-color-presets]","click","color",function(){var n=e(this),o=n.parents(".ev-color-wrapper").first(),a=e(".ev-color-input",o),r=a.attr("data-opacity"),s=e("[data-input-color-opacity]",o),l={hex:a.val()};return new e.evf.modal("ev-color-presets",l,{simple:!0,save:function(e,n,o){e.hex&&(r&&(-1===e.hex.indexOf("#")?s.val(i(e.hex)):s.val("1"),a.attr("data-opacity",s.val())),r||-1===e.hex.indexOf("rgba(")||(e.hex=t(e.hex)),a.val(e.hex).trigger("keyup"))}}).open(function(t,i,o){var a={action:"ev_color_presets_modal_load",nonce:n.attr("data-nonce"),data:o},r=".ev-modal-container[data-key='"+i+"']";e(r+" .ev-modal-wrapper").addClass("ev-loading"),e.post(ajaxurl,a,function(i){i=e(i),e(r+" .ev-modal-wrapper").removeClass("ev-loading"),t.html(i),setTimeout(function(){e.evf.ui.build()},1)})}),!1}),e.evf.ui.add("input.ev-color-input",function(){e(this).each(function(){var t=e(this),i=t.parents(".ev-color-wrapper").first(),n=t.attr("data-opacity"),o={control:"wheel",change:function(o,a){t.css("border-color",o),void 0!==n&&e("[data-input-color-opacity]",i).val(a),""!==o?i.addClass("ev-color-can-be-saved"):i.removeClass("ev-color-can-be-saved")}};void 0!==n&&(o.opacity=!0,o.format="rgb"),e(this).minicolors(o).trigger("change")})})}(jQuery),function(e){window.evf_ui_rich_textareas=0,e.evf.ui.add("textarea.ev-rich",function(){e(this).each(function(){window.evf_ui_rich_textareas++;var t=e(this).attr("id");t=(t=t.replace(/\[/g,"_")).replace(/\]/g,"_"),e(this).attr("id",t+"-"+window.evf_ui_rich_textareas),e(this).wp_editor()})})}(jQuery),function(e){e.evf.delegate(".ev-selected-icon-wrapper","click","icon",function(){var t=e(this),i=t.parents(".ev-field").first(),n=e(".ev-selected-icon-wrapper",i),o={prefix:e("[data-prefix]",i).val(),set:e("[data-set]",i).val(),icon:e("[data-icon]",i).val(),color:e("[data-color]",i).val(),size:e("[data-size]",i).val()};return new e.evf.modal("ev-icon",o,{simple:!0,save:function(t,o,a){e("[data-prefix]",i).val(t.prefix),e("[data-set]",i).val(t.set),e("[data-icon]",i).val(t.icon),e("[data-color]",i).val(t.color.color),e("[data-size]",i).val(t.size),e("[data-preview]",i).attr("class","").css("color",""),e("[data-preview]",i).attr("class","ev-icon ev-component "+t.prefix+" "+t.icon).css("color",t.color.color),t.icon?n.removeClass("ev-empty"):n.addClass("ev-empty")}}).open(function(i,n,o){var a={action:"ev_icon_modal_load",data:o,nonce:t.attr("data-nonce")},r=".ev-modal-container[data-key='"+n+"']";e(r+" .ev-modal-wrapper").addClass("ev-loading"),e.post(ajaxurl,a,function(t){t=e(t),e(r+" .ev-modal-wrapper").removeClass("ev-loading"),i.html(t),e("[data-icon-search]",i).focus(),setTimeout(function(){e.evf.ui.build()},1)})}),!1}),e.evf.delegate(".ev-icon-remove","click","icon",function(){var t=e(this).parents(".ev-field").first();return e(".ev-selected-icon-wrapper",t).addClass("ev-empty"),e("[data-prefix]",t).val(""),e("[data-set]",t).val(""),e("[data-icon]",t).val(""),e("[data-color]",t).val(""),e("[data-size]",t).val(""),e("[data-preview]",t).attr("class","ev-icon ev-component").css("color",""),!1}),e.evf.delegate("input[data-icon-search]","keydown","icon",function(e){if(13==e.which)return!1}),e.evf.delegate("input[data-icon-search]","keyup","icon",function(){var t=e(this).parents(".ev-icon-sets-external-wrapper").first(),i=e(this).val(),n=e(".ev-icon",t);if(""!=i?e(".ev-icon-sets",t).addClass("ev-searching"):e(".ev-icon-sets",t).removeClass("ev-searching"),n.removeClass("ev-found"),n=n.filter('[data-icon-stripped*="'+i+'"]').addClass("ev-found"),e(".ev-icon-search-results",t).addClass("ev-search-icon-results-visible"),n.length){var o=n.length>1?2:1;e(".ev-icon-search-results",t).html(ev_icon_field[o].replace("%s",n.length))}else""!=i?e(".ev-icon-search-results",t).html(ev_icon_field[0]):e(".ev-icon-search-results",t).removeClass("ev-search-icon-results-visible")}),e.evf.delegate(".ev-icon-sets i","click","icon",function(){var t=e(this),i=e(this).parents(".ev-icon-sets-external-wrapper").first(),n=e(".ev-icon",i),o=e("[name='color[color]']",i).val(),a=e("[data-icon-size]",i).val(),r=e(".ev-selected-icon-preview",i);n.removeClass("ev-found ev-selected"),t.addClass("ev-selected"),e(".ev-icon-sets",i).removeClass("ev-searching"),e("[data-icon-prefix]",i).val(t.attr("data-prefix")),e("[data-icon-set]",i).val(t.attr("data-set")),e("[data-icon-name]",i).val(t.attr("data-icon-name")),r.removeAttr("class").attr("class","ev-selected-icon-preview ev-icon ev-component "+t.attr("data-prefix")+" "+t.attr("data-icon-name")).css({color:o,"font-size":a}),e("input[data-icon-search]",i).val(""),e(".ev-icon-search-results",i).html("").removeClass("ev-search-icon-results-visible")}),e.evf.delegate(".ev-icon-sets-controls-field-wrapper [name='color[color]']","change","icon",function(){var t=e(this).parents(".ev-icon-sets-external-wrapper").first();e(".ev-selected-icon-preview",t).css({color:e(this).val()})}),e.evf.delegate(".ev-icon-sets-controls-field-wrapper [name='size']","input","icon",function(){var t=e(this).parents(".ev-icon-sets-external-wrapper").first();e(".ev-selected-icon-preview",t).css({"font-size":e(this).val()})})}(jQuery),function(e){function t(t){switch(t.attr("data-type")){case"radio":return e("input[type='radio'][name]:checked",t).first();case"select":return e("select[name]",t).first();case"checkbox":return e("input[type='checkbox'][name]",t).first()}return!1}function i(i){var n=i.parents(".ev-tab-container").first();i.parents(".ev-field-bundle").length&&(n=i.parents(".ev-field-bundle").first());var o=i.attr("data-slave"),a=e("[data-controller='"+o+"']",n),r=t(a);if(r){var s=r.val();r.is("[type='checkbox']")&&(s=r.is(":checked")?"1":"0");var l=i.attr("data-controller-value");if(-1!=l.indexOf(","))-1==(l=l.split(",")).indexOf(s)||a.hasClass("ev-hidden")?(i.addClass("ev-hidden"),e("[data-slave='"+i.attr("data-controller")+"']",n).addClass("ev-hidden")):(i.removeClass("ev-hidden"),e("[data-slave='"+i.attr("data-controller")+"']",n).removeClass("ev-hidden"));else{(-1!==l.indexOf("!=")?(l=l.replace("!=",""))==s:l!=s)||a.hasClass("ev-hidden")?(i.addClass("ev-hidden"),e("[data-slave='"+i.attr("data-controller")+"']",n).addClass("ev-hidden")):(i.removeClass("ev-hidden"),e("[data-slave='"+i.attr("data-controller")+"']",n).removeClass("ev-hidden"))}i.is("[data-controller]")&&t(i).trigger("change")}}e.evf.delegate(".ev-help-popup .ev-help-handle","click","field",function(){var t={},i=e(".ev-help-popup-text",this).html();return new e.evf.modal("ev-help-popup",t,{simple:!0}).open(function(e,t,n){e.html(i)}),!1}),e.evf.ui.add("[data-slave]",function(){e(this).each(function(){i(e(this))})}),e.evf.delegate("[data-controller] :input","change","field",function(){var n=e(this).parents(".ev-field").first();if(e(this).is(t(n))){var o=n.parents(".ev-tab-container").first();n.parents(".ev-field-bundle").length&&(o=n.parents(".ev-field-bundle").first());e(this).val();var a=e(this).parents("[data-controller]").first().attr("data-controller"),r=e("[data-slave='"+a+"']",o);r.each(function(){i(e(this))});var s=r.not(".ev-hidden").last(),l=e(this).parents(".ev-tabs").first();if(s.length&&l.length&&l.css("overflow-y")){var c=s.position().top+2*s.outerHeight();l.get(0).scrollTop=c}}})}(jQuery),function(e){function t(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)}e(document).on("input.ev_link",".ev-link-input-wrapper input",function(){""!==e(this).val()?e(this).parent().addClass("ev-not-empty"):e(this).parent().removeClass("ev-not-empty")}),e.evf.delegate(".ev-link-ctrl-btn","click","link",function(){var t=e(this),i=e(this).parents(".ev-link-ctrl").first(),n={url:e("[data-link-url]",i).val(),target:e("[data-link-target]",i).val(),rel:e("[data-link-rel]",i).val(),title:e("[data-link-title]",i).val(),class:e("[data-link-class]",i).val()};return new e.evf.modal("ev-link",n,{simple:!0,close:function(){e(window).off("keydown.ev_link")},save:function(n,o,a){e("[data-link-url]",i).val(n.url),e("[data-link-target]",i).val(n.target),e("[data-link-rel]",i).val(n.rel),e("[data-link-title]",i).val(n.title),e("[data-link-class]",i).val(n.class),t.removeClass("ev-link-on"),""!=n.url&&t.addClass("ev-link-on")}}).open(function(t,o,a){var r={action:"ev_link_modal_load",nonce:i.attr("data-nonce"),data:a},s=".ev-modal-container[data-key='"+o+"']";(a.rel||n.title||n.class)&&e(s).addClass("ev-link-modal-expanded"),e(s+" .ev-modal-wrapper").addClass("ev-loading"),e(window).off("keydown.ev_link"),e(window).on("keydown.ev_link",function(t){if(9==t.which)return e('.ev-modal-container[data-key="ev-link"]').addClass("ev-link-modal-expanded"),e(window).off("keydown.ev_link"),!1}),e.post(ajaxurl,r,function(i){i=e(i),e(s+" .ev-modal-wrapper").removeClass("ev-loading"),t.html(i),setTimeout(function(){e.evf.ui.build()},1)})}),!1}),e.evf.ui.add(".ev-link-input-wrapper input",function(){e(this).trigger("input.ev_link")}),e.evf.ui.add(".ev-link-url-wrapper [name='url']",function(){var i=e(this).attr("data-nonce");e(this).selectize({plugins:[],valueField:"id",labelField:"text",searchField:["text"],dropdownParent:"body",create:!0,createOnBlur:!0,maxItems:1,load:function(n,o){if(!n.length||t(n))return o();e.ajax({url:ajaxurl,type:"POST",data:{action:"ev_link_search_entries",search:n,nonce:i},error:function(){o()},success:function(t){o(e.parseJSON(t))}})},render:{item:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"},option:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"},option_create:function(e,t){return'<div class="ev-link-create create">'+ev_framework.link.create+"</div>"}}}),e(this).get(0).selectize.focus()})}(jQuery),function(e){function t(t,i){var n=!1;e(t).addClass("ev-btn-complete"),i&&(e(t).addClass("ev-btn-"+i.type),n=ev_create_tooltip(t,i.message,{class:"ev-tooltip-response-"+i.type})),setTimeout(function(){e(t).removeAttr("data-title"),e(t).removeClass("ev-btn-complete"),i&&(n&&ev_tooltip_destroy(n),e(t).removeClass("ev-btn-"+i.type))},1500)}window.ev_idle_button=function(t){e(t).addClass("ev-btn-idle").attr("disabled","disabled").trigger("start.ev_button")},window.ev_unidle_button=function(i,n){var o=e("body").get(0).style;if("transition"in o||"WebkitTransition"in o||"MozTransition"in o||"msTransition"in o||"OTransition"in o){var a="transitionend.ev webkitTransitionEnd.ev oTransitionEnd.ev MSTransitionEnd.ev";e(i).on(a,function(o){e(i).off(a),t(i,n)})}else t(i,n);e(i).removeClass("ev-btn-idle").removeAttr("disabled").trigger("done.ev_button")}}(jQuery),function(e){e.evf.ui.add(".ev-date-input",function(){e(this).each(function(){e(this).datepicker({dateFormat:e(this).attr("data-format"),dayNamesShort:ev_date_field.dayNamesShort,dayNames:ev_date_field.dayNames,monthNamesShort:ev_date_field.monthNamesShort,monthNames:ev_date_field.monthNames,prevText:ev_date_field.prevText,nextText:ev_date_field.nextText,showAnim:""})})})}(jQuery);