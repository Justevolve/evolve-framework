"use strict";if(function(a){a.fn.serializeObject=function(){var b=this,c={},d={},e={validate:/^[a-zA-Z_][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(a,b,c){return a[b]=c,a},this.push_counter=function(a){return void 0===d[a]&&(d[a]=0),d[a]++},a.each(a(this).serializeArray(),function(){if(e.validate.test(this.name)){for(var d,f=this.name.match(e.key),g=this.value,h=this.name;void 0!==(d=f.pop());)h=h.replace(new RegExp("\\["+d+"\\]$"),""),d.match(e.push)?g=b.build([],b.push_counter(h),g):d.match(e.fixed)?g=b.build([],d,g):d.match(e.named)&&(g=b.build({},d,g));c=a.extend(!0,c,g)}}),a.each(c,function(a,b){c[a].push&&(c[a]=c[a].filter(function(a){return void 0===a||null===a?!1:~a}))}),c}}(jQuery),function(a){"function"!=typeof a.deparam&&(a.deparam=function(b,c){var d={},e={"true":!0,"false":!1,"null":null};return a.each(b.replace(/\+/g," ").split("&"),function(b,f){var g,h=f.split("="),i=decodeURIComponent(h[0]),j=d,k=0,l=i.split("]["),m=l.length-1;if(/\[/.test(l[0])&&/\]$/.test(l[m])?(l[m]=l[m].replace(/\]$/,""),l=l.shift().split("[").concat(l),m=l.length-1):m=0,2===h.length)if(g=decodeURIComponent(h[1]),c&&(g=g&&!isNaN(g)?+g:"undefined"===g?void 0:void 0!==e[g]?e[g]:g),m)for(;m>=k;k++)i=""===l[k]?j.length:l[k],j=j[i]=m>k?j[i]||(l[k+1]&&isNaN(l[k+1])?{}:[]):g;else a.isArray(d[i])?d[i].push(g):void 0!==d[i]?d[i]=[d[i],g]:d[i]=g;else i&&(d[i]=c?void 0:"")}),d})}(jQuery),"function"!=typeof String.prototype.replaceLast&&(String.prototype.replaceLast=function(a,b){var c=this.lastIndexOf(a);return c>=0?this.substring(0,c)+b+this.substring(c+a.length):this.toString()}),"undefined"==typeof jQuery)throw new Error("jQuery is required.");!function(a){a.evf={componentID:".ev-component",namespace:".evf",ui:{event:"ui-build",signature:"ev-ui",components_count:0,components_built:0,add:function(b,c){a.evf.ui.components_count++,a(window).on(a.evf.resolveEventName(a.evf.ui.event,a.evf.namespace),function(){a.evf.ui.components_built++,a.evf.ui.components_count===a.evf.ui.components_built&&setTimeout(function(){a(".ev-tab-container").addClass("ev-tab-container-loaded")},5);var d=a(b);d=d.filter(function(){return a(this).data(a.evf.signature)!==!0}),d.length&&(d.data(a.evf.signature,!0),c.call(d))})},build:function(){a.evf.ui.components_built=0,a(window).trigger(a.evf.resolveEventName(a.evf.ui.event,a.evf.namespace))}},resolveNamespace:function(b){return""!==b&&-1===b.indexOf(".")&&(b="."+b),a.evf.namespace+b},resolveEventName:function(b,c){var d="";return a.each(b.split(" "),function(){d+=" "+this+a.evf.resolveNamespace(c)}),d=d.trim()},on:function(b,c,d,e){a(b).on(a.evf.resolveEventName(c,d),e)},one:function(b,c,d,e){a(b).one(a.evf.resolveEventName(c,d),e)},delegate:function(b,c,d,e){a(document).on(a.evf.resolveEventName(c,d),b,e)},undelegate:function(b,c){a(document).off(a.evf.resolveEventName(b,c))},template:function(b,c){if("undefined"==typeof _)throw new Error("Underscore is required.");var d=b;if("string"==typeof b&&(d=a("script[type='text/template'][data-template='"+b+"']")),!d.length)throw new Error("Template '"+b+"' not found.");return _.template(d.html(),c,{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g})}},a(document).on("ready",function(){a.evf.ui.build(),a.evf.tabs(".ev-tabs"+a.evf.componentID),a.evf.accordion(".ev-accordion"+a.evf.componentID)})}(jQuery),function(a){a.evf.key=function(b,c,d){if("function"!=typeof c)throw new Error("Callback is not a function.");d=a.extend({stop:!0,namespace:"ev",one:!1},d);var e={enter:13,left:37,up:38,right:39,down:40,esc:27,space:32,backspace:8,tab:9},f="ev";d.namespace&&(f="."+d.namespace);var g=function(a){if(e[b]&&a.which===e[b]){var f=c(a);if("undefined"!=typeof f)return f;if(d.stop)return!1}return!0};d.one?a(window).one("keydown."+f,g):a(window).on("keydown."+f,g)}}(jQuery),function(a){a.evf.tabs=function(b,c){function d(d,e){var f=null,g=a(e);"object"==typeof b?f=a(d):"string"==typeof b&&(f=g.parents(d).first());var h=a("> "+c.navClass,f),i=a(c.triggersClass,h),j=a("> "+c.panelsContainerClass,f),k=a("> "+c.tabsClass,j),l=0;switch(i.each(function(a,b){this===e&&(l=a)}),f.data("push")){case"hash":a.evf.history.pushHash(g);break;case"querystring":a.evf.history.pushQueryString(g,"tab")}return f.trigger(a.evf.resolveEventName("switch",c.namespace)),i.removeClass(c.activeClass).removeAttr("aria-selected"),k.removeClass(c.activeClass).attr("aria-hidden","true"),g.addClass(c.activeClass).attr("aria-selected","true"),k.eq(l).addClass(c.activeClass).removeAttr("aria-hidden"),f.trigger(a.evf.resolveEventName("switched",c.namespace)),!1}if(c=a.extend({namespace:"tabs",navClass:".ev-tabs-nav",triggersClass:".ev-tab-trigger",panelsContainerClass:".ev-tab-container",tabsClass:".ev-tab",activeClass:"ev-active",eventTrigger:"click focus"},c),"object"==typeof b?a.evf.on(c.triggersClass,c.eventTrigger,c.namespace,function(){return d(b,this)}):"string"==typeof b&&a.evf.delegate(c.triggersClass,c.eventTrigger,c.namespace,function(){return d(b,this)}),""!=window.location.hash){var e=c.triggersClass+"[href='"+window.location.hash+"']";e+=","+c.triggersClass+"[data-target='"+window.location.hash+"']",a(e).trigger(a.evf.resolveEventName(c.eventTrigger,c.namespace))}}}(jQuery),function(a){a.evf.accordion=function(b,c){function d(d,e){var f=null,g=a(e);"object"==typeof b?f=a(d):"string"==typeof b&&(f=g.parents(d).first());var h=c.mode!==!1?c.mode:f.attr("data-mode"),i=a(c.triggersClass,f),j=a(c.toggleClass,f),k=0;switch(i.each(function(a,b){this===e&&(k=a)}),f.data("push")){case"hash":a.evf.history.pushHash(g);break;case"querystring":a.evf.history.pushQueryString(g,"toggle")}return f.trigger(a.evf.resolveEventName("switch",c.namespace)),"toggle"!==h?"true"==g.attr("aria-selected")?(g.removeAttr("aria-selected"),j.eq(k).removeClass(c.activeClass).attr("aria-hidden","true")):(i.removeAttr("aria-selected"),g.attr("aria-selected","true"),j.removeClass(c.activeClass).attr("aria-hidden","true"),j.eq(k).addClass(c.activeClass).removeAttr("aria-hidden")):"true"==g.attr("aria-selected")?(g.removeAttr("aria-selected"),j.eq(k).removeClass(c.activeClass).attr("aria-hidden","true")):(g.attr("aria-selected","true"),j.eq(k).addClass(c.activeClass).removeAttr("aria-hidden")),f.trigger(a.evf.resolveEventName("switched",c.namespace)),!1}if(c=a.extend({namespace:"accordion",accordionClass:".ev-accordion",toggleClass:".ev-toggle",triggersClass:".ev-toggle-trigger",contentClass:".ev-toggle-content",activeClass:"ev-active",eventTrigger:"click focus",mode:!1},c),"object"==typeof b?a.evf.on(c.triggersClass,c.eventTrigger,c.namespace,function(){return d(b,this)}):"string"==typeof b&&a.evf.delegate(c.triggersClass,c.eventTrigger,c.namespace,function(){return d(b,this)}),""!=window.location.hash){var e=c.triggersClass+"[href='"+window.location.hash+"']";e+=","+c.triggersClass+"[data-target='"+window.location.hash+"']",a(e).trigger(a.evf.resolveEventName(c.eventTrigger,c.namespace))}}}(jQuery),function(a){var b="modal";a.evf.delegate(".ev-modal-close","click",b,function(b){a(this).parents(".ev-modal-container").first().remove(),a(window).trigger("resize");var c=a(".ev-modal-container");return c.length||a("body").removeClass("ev-modal-open"),!1}),a.evf.key("esc",function(){var b=a(".ev-modal-container");return b.length?(b.last().data("ev-modal").config.close(),b.last().remove(),a(window).trigger("resize"),a(".ev-modal-container").length||a("body").removeClass("ev-modal-open"),!1):void 0}),a.evf.modal=function(c,d,e){e=a.extend({save:function(){},close:function(){},"class":"",wait:!1},e);var f=this;f.config=e,this.close=function(){e.close(),a(".ev-modal-container[data-key='"+c+"']").remove(),a(window).trigger("resize");var b=a(".ev-modal-container");b.length||a("body").removeClass("ev-modal-open")},this.save=function(b){var d=".ev-modal-container[data-key='"+c+"']",f=d+" .ev-modal-footer .ev-save",g=a(f).attr("data-nonce");e.wait?e.save(b,this.close,g):(e.save(b,null,g),this.close())},this.open=function(b){if("function"!=typeof b)throw new Error("Content is not a function.");var g=".ev-modal-container[data-key='"+c+"']";a(g).remove();var h='<div class="ev-modal-container '+e["class"]+'" data-key="'+c+'">';h+='<div class="ev-modal-wrapper">',h+='<a class="ev-modal-close" href="#"><i data-icon="ev-modal-close" class="ev-icon ev-component" aria-hidden="true"></i></a>',h+='<div class="ev-modal-wrapper-inner">',h+="</div>",h+="</div>",h+="</div>",h=a(h),a("body").hasClass("ev-modal-open")?a(".ev-modal-container").last().after(h):(h.appendTo(a("#ev-modals-container")),a("body").addClass("ev-modal-open")),a(".ev-modal-container").last().data("ev-modal",f),b(a(g+" .ev-modal-wrapper-inner"),c,d)},this.init=function(){var d=".ev-modal-container[data-key='"+c+"']",e=d+" .ev-modal-footer .ev-save",g=d+" form",h=b+"-form-"+c;a.evf.undelegate("submit",h),a.evf.undelegate("click",h),a.evf.delegate(e,"click",h,function(){return a(g).trigger("submit."+h),!1}),a.evf.delegate(g,"submit",h,function(){return"undefined"!=typeof tinymce&&tinymce.triggerSave(),a(e).addClass("ev-saving"),f.save(a(g).serializeObject()),a.evf.undelegate("submit",h),a.evf.undelegate("click",h),!1})},this.init()}}(jQuery),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function b(b,c){var d=a('<div class="minicolors" />'),e=a.minicolors.defaults;b.data("minicolors-initialized")||(c=a.extend(!0,{},e,c),d.addClass("minicolors-theme-"+c.theme).toggleClass("minicolors-with-opacity",c.opacity).toggleClass("minicolors-no-data-uris",c.dataUris!==!0),void 0!==c.position&&a.each(c.position.split(" "),function(){d.addClass("minicolors-position-"+this)}),b.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",c).prop("size",7).wrap(d).after('<div class="minicolors-panel minicolors-slider-'+c.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),c.inline||(b.after('<span class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></span>'),b.next(".minicolors-swatch").on("click",function(a){a.preventDefault(),b.focus()})),b.parent().find(".minicolors-panel").on("selectstart",function(){return!1}).end(),c.inline&&b.parent().addClass("minicolors-inline"),h(b,!1),b.data("minicolors-initialized",!0))}function c(a){var b=a.parent();a.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),b.before(a).remove()}function d(a){var b=a.parent(),c=b.find(".minicolors-panel"),d=a.data("minicolors-settings");!a.data("minicolors-initialized")||a.prop("disabled")||b.hasClass("minicolors-inline")||b.hasClass("minicolors-focus")||(e(),b.addClass("minicolors-focus"),c.stop(!0,!0).fadeIn(d.showSpeed,function(){d.show&&d.show.call(a.get(0))}))}function e(){a(".minicolors-focus").each(function(){var b=a(this),c=b.find(".minicolors-input"),d=b.find(".minicolors-panel"),e=c.data("minicolors-settings");d.fadeOut(e.hideSpeed,function(){e.hide&&e.hide.call(c.get(0)),b.removeClass("minicolors-focus")})})}function f(a,b,c){var d,e,f,h,i=a.parents(".minicolors").find(".minicolors-input"),j=i.data("minicolors-settings"),k=a.find("[class$=-picker]"),l=a.offset().left,m=a.offset().top,n=Math.round(b.pageX-l),o=Math.round(b.pageY-m),p=c?j.animationSpeed:0;b.originalEvent.changedTouches&&(n=b.originalEvent.changedTouches[0].pageX-l,o=b.originalEvent.changedTouches[0].pageY-m),0>n&&(n=0),0>o&&(o=0),n>a.width()&&(n=a.width()),o>a.height()&&(o=a.height()),a.parent().is(".minicolors-slider-wheel")&&k.parent().is(".minicolors-grid")&&(d=75-n,e=75-o,f=Math.sqrt(d*d+e*e),h=Math.atan2(e,d),0>h&&(h+=2*Math.PI),f>75&&(f=75,n=75-75*Math.cos(h),o=75-75*Math.sin(h)),n=Math.round(n),o=Math.round(o)),a.is(".minicolors-grid")?k.stop(!0).animate({top:o+"px",left:n+"px"},p,j.animationEasing,function(){g(i,a)}):k.stop(!0).animate({top:o+"px"},p,j.animationEasing,function(){g(i,a)})}function g(a,b){function c(a,b){var c,d;return a.length&&b?(c=a.offset().left,d=a.offset().top,{x:c-b.offset().left+a.outerWidth()/2,y:d-b.offset().top+a.outerHeight()/2}):null}var d,e,f,g,h,j,k,m=a.val(),o=a.attr("data-opacity"),p=a.parent(),r=a.data("minicolors-settings"),s=p.find(".minicolors-swatch"),t=p.find(".minicolors-grid"),u=p.find(".minicolors-slider"),v=p.find(".minicolors-opacity-slider"),w=t.find("[class$=-picker]"),x=u.find("[class$=-picker]"),y=v.find("[class$=-picker]"),z=c(w,t),A=c(x,u),B=c(y,v);if(b.is(".minicolors-grid, .minicolors-slider")){switch(r.control){case"wheel":g=t.width()/2-z.x,h=t.height()/2-z.y,j=Math.sqrt(g*g+h*h),k=Math.atan2(h,g),0>k&&(k+=2*Math.PI),j>75&&(j=75,z.x=69-75*Math.cos(k),z.y=69-75*Math.sin(k)),e=n(j/.75,0,100),d=n(180*k/Math.PI,0,360),f=n(100-Math.floor(A.y*(100/u.height())),0,100),m=q({h:d,s:e,b:f}),u.css("backgroundColor",q({h:d,s:e,b:100}));break;case"saturation":d=n(parseInt(z.x*(360/t.width()),10),0,360),e=n(100-Math.floor(A.y*(100/u.height())),0,100),f=n(100-Math.floor(z.y*(100/t.height())),0,100),m=q({h:d,s:e,b:f}),u.css("backgroundColor",q({h:d,s:100,b:f})),p.find(".minicolors-grid-inner").css("opacity",e/100);break;case"brightness":d=n(parseInt(z.x*(360/t.width()),10),0,360),e=n(100-Math.floor(z.y*(100/t.height())),0,100),f=n(100-Math.floor(A.y*(100/u.height())),0,100),m=q({h:d,s:e,b:f}),u.css("backgroundColor",q({h:d,s:e,b:100})),p.find(".minicolors-grid-inner").css("opacity",1-f/100);break;default:d=n(360-parseInt(A.y*(360/u.height()),10),0,360),e=n(Math.floor(z.x*(100/t.width())),0,100),f=n(100-Math.floor(z.y*(100/t.height())),0,100),m=q({h:d,s:e,b:f}),t.css("backgroundColor",q({h:d,s:100,b:100}))}a.val(l(m,r.letterCase))}b.is(".minicolors-opacity-slider")&&(o=r.opacity?parseFloat(1-B.y/v.height()).toFixed(2):1,r.opacity&&a.attr("data-opacity",o)),s.find("SPAN").css({backgroundColor:m,opacity:o}),i(a,m,o)}function h(a,b){var c,d,e,f,g,h,j,k=a.parent(),o=a.data("minicolors-settings"),p=k.find(".minicolors-swatch"),s=k.find(".minicolors-grid"),t=k.find(".minicolors-slider"),u=k.find(".minicolors-opacity-slider"),v=s.find("[class$=-picker]"),w=t.find("[class$=-picker]"),x=u.find("[class$=-picker]");switch(c=l(m(a.val(),!0),o.letterCase),c||(c=l(m(o.defaultValue,!0),o.letterCase)),d=r(c),b||a.val(c),o.opacity&&(e=""===a.attr("data-opacity")?1:n(parseFloat(a.attr("data-opacity")).toFixed(2),0,1),isNaN(e)&&(e=1),a.attr("data-opacity",e),p.find("SPAN").css("opacity",e),g=n(u.height()-u.height()*e,0,u.height()),x.css("top",g+"px")),p.find("SPAN").css("backgroundColor",c),o.control){case"wheel":h=n(Math.ceil(.75*d.s),0,s.height()/2),j=d.h*Math.PI/180,f=n(75-Math.cos(j)*h,0,s.width()),g=n(75-Math.sin(j)*h,0,s.height()),v.css({top:g+"px",left:f+"px"}),g=150-d.b/(100/s.height()),""===c&&(g=0),w.css("top",g+"px"),t.css("backgroundColor",q({h:d.h,s:d.s,b:100}));break;case"saturation":f=n(5*d.h/12,0,150),g=n(s.height()-Math.ceil(d.b/(100/s.height())),0,s.height()),v.css({top:g+"px",left:f+"px"}),g=n(t.height()-d.s*(t.height()/100),0,t.height()),w.css("top",g+"px"),t.css("backgroundColor",q({h:d.h,s:100,b:d.b})),k.find(".minicolors-grid-inner").css("opacity",d.s/100);break;case"brightness":f=n(5*d.h/12,0,150),g=n(s.height()-Math.ceil(d.s/(100/s.height())),0,s.height()),v.css({top:g+"px",left:f+"px"}),g=n(t.height()-d.b*(t.height()/100),0,t.height()),w.css("top",g+"px"),t.css("backgroundColor",q({h:d.h,s:d.s,b:100})),k.find(".minicolors-grid-inner").css("opacity",1-d.b/100);break;default:f=n(Math.ceil(d.s/(100/s.width())),0,s.width()),g=n(s.height()-Math.ceil(d.b/(100/s.height())),0,s.height()),v.css({top:g+"px",left:f+"px"}),g=n(t.height()-d.h/(360/t.height()),0,t.height()),w.css("top",g+"px"),s.css("backgroundColor",q({h:d.h,s:100,b:100}))}a.data("minicolors-initialized")&&i(a,c,e)}function i(a,b,c){var d=a.data("minicolors-settings"),e=a.data("minicolors-lastChange");e&&e.hex===b&&e.opacity===c||(a.data("minicolors-lastChange",{hex:b,opacity:c}),d.change&&(d.changeDelay?(clearTimeout(a.data("minicolors-changeTimeout")),a.data("minicolors-changeTimeout",setTimeout(function(){d.change.call(a.get(0),b,c)},d.changeDelay))):d.change.call(a.get(0),b,c)),a.trigger("change").trigger("input"))}function j(b){var c=m(a(b).val(),!0),d=t(c),e=a(b).attr("data-opacity");return d?(void 0!==e&&a.extend(d,{a:parseFloat(e)}),d):null}function k(b,c){var d=m(a(b).val(),!0),e=t(d),f=a(b).attr("data-opacity");return e?(void 0===f&&(f=1),c?"rgba("+e.r+", "+e.g+", "+e.b+", "+parseFloat(f)+")":"rgb("+e.r+", "+e.g+", "+e.b+")"):null}function l(a,b){return"uppercase"===b?a.toUpperCase():a.toLowerCase()}function m(a,b){return a=a.replace(/[^A-F0-9]/gi,""),3!==a.length&&6!==a.length?"":(3===a.length&&b&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),"#"+a)}function n(a,b,c){return b>a&&(a=b),a>c&&(a=c),a}function o(a){var b={},c=Math.round(a.h),d=Math.round(255*a.s/100),e=Math.round(255*a.b/100);if(0===d)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;360===c&&(c=0),60>c?(b.r=f,b.b=g,b.g=g+h):120>c?(b.g=f,b.b=g,b.r=f-h):180>c?(b.g=f,b.r=g,b.b=g+h):240>c?(b.b=f,b.r=g,b.g=f-h):300>c?(b.b=f,b.g=g,b.r=g+h):360>c?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}}function p(b){var c=[b.r.toString(16),b.g.toString(16),b.b.toString(16)];return a.each(c,function(a,b){1===b.length&&(c[a]="0"+b)}),"#"+c.join("")}function q(a){return p(o(a))}function r(a){var b=s(t(a));return 0===b.s&&(b.h=360),b}function s(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,b.s=0!==d?255*e/d:0,b.h=0!==b.s?a.r===d?(a.g-a.b)/e:a.g===d?2+(a.b-a.r)/e:4+(a.r-a.g)/e:-1,b.h*=60,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b}function t(a){return a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16),{r:a>>16,g:(65280&a)>>8,b:255&a}}a.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default"}},a.extend(a.fn,{minicolors:function(f,g){switch(f){case"destroy":return a(this).each(function(){c(a(this))}),a(this);case"hide":return e(),a(this);case"opacity":return void 0===g?a(this).attr("data-opacity"):(a(this).each(function(){h(a(this).attr("data-opacity",g))}),a(this));case"rgbObject":return j(a(this),"rgbaObject"===f);case"rgbString":case"rgbaString":return k(a(this),"rgbaString"===f);case"settings":return void 0===g?a(this).data("minicolors-settings"):(a(this).each(function(){var b=a(this).data("minicolors-settings")||{};c(a(this)),a(this).minicolors(a.extend(!0,b,g))}),a(this));case"show":return d(a(this).eq(0)),a(this);case"value":return void 0===g?a(this).val():(a(this).each(function(){h(a(this).val(g))}),a(this));default:return"create"!==f&&(g=f),a(this).each(function(){b(a(this),g)}),a(this)}}}),a(document).on("mousedown.minicolors touchstart.minicolors",function(b){a(b.target).parents().add(b.target).hasClass("minicolors")||e()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(b){var c=a(this);b.preventDefault(),a(document).data("minicolors-target",c),f(c,b,!0)}).on("mousemove.minicolors touchmove.minicolors",function(b){var c=a(document).data("minicolors-target");c&&f(c,b)}).on("mouseup.minicolors touchend.minicolors",function(){a(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(b){var c=a(this).parent().find(".minicolors-input");b.preventDefault(),d(c)}).on("focus.minicolors",".minicolors-input",function(){var b=a(this);b.data("minicolors-initialized")&&d(b)}).on("blur.minicolors",".minicolors-input",function(){var b=a(this),c=b.data("minicolors-settings");b.data("minicolors-initialized")&&(b.val(m(b.val(),!0)),""===b.val()&&b.val(m(c.defaultValue,!0)),b.val(l(b.val(),c.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(b){var c=a(this);if(c.data("minicolors-initialized"))switch(b.keyCode){case 9:e();break;case 13:case 27:e(),c.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var b=a(this);b.data("minicolors-initialized")&&h(b,!0)}).on("paste.minicolors",".minicolors-input",function(){var b=a(this);b.data("minicolors-initialized")&&setTimeout(function(){h(b,!0)},1)})}),!function(a,b){"function"==typeof define&&define.amd?define("sifter",b):"object"==typeof exports?module.exports=b():a.Sifter=b()}(this,function(){var a=function(a,b){this.items=a,this.settings=b||{diacritics:!0}};a.prototype.tokenize=function(a){if(a=d(String(a||"").toLowerCase()),!a||!a.length)return[];var b,c,f,h,i=[],j=a.split(/ +/);for(b=0,c=j.length;c>b;b++){if(f=e(j[b]),this.settings.diacritics)for(h in g)g.hasOwnProperty(h)&&(f=f.replace(new RegExp(h,"g"),g[h]));i.push({string:j[b],regex:new RegExp(f,"i")})}return i},a.prototype.iterator=function(a,b){var c;c=f(a)?Array.prototype.forEach||function(a){for(var b=0,c=this.length;c>b;b++)a(this[b],b,this)}:function(a){for(var b in this)this.hasOwnProperty(b)&&a(this[b],b,this)},c.apply(a,[b])},a.prototype.getScoreFunction=function(a,b){var c,d,e,f;c=this,a=c.prepareSearch(a,b),e=a.tokens,d=a.options.fields,f=e.length;var g=function(a,b){var c,d;return a?(a=String(a||""),d=a.search(b.regex),-1===d?0:(c=b.string.length/a.length,0===d&&(c+=.5),c)):0},h=function(){var a=d.length;return a?1===a?function(a,b){return g(b[d[0]],a)}:function(b,c){for(var e=0,f=0;a>e;e++)f+=g(c[d[e]],b);return f/a}:function(){return 0}}();return f?1===f?function(a){return h(e[0],a)}:"and"===a.options.conjunction?function(a){for(var b,c=0,d=0;f>c;c++){if(b=h(e[c],a),0>=b)return 0;d+=b}return d/f}:function(a){for(var b=0,c=0;f>b;b++)c+=h(e[b],a);return c/f}:function(){return 0}},a.prototype.getSortFunction=function(a,c){var d,e,f,g,h,i,j,k,l,m,n;if(f=this,a=f.prepareSearch(a,c),n=!a.query&&c.sort_empty||c.sort,l=function(a,b){return"$score"===a?b.score:f.items[b.id][a]},h=[],n)for(d=0,e=n.length;e>d;d++)(a.query||"$score"!==n[d].field)&&h.push(n[d]);if(a.query){for(m=!0,d=0,e=h.length;e>d;d++)if("$score"===h[d].field){m=!1;break}m&&h.unshift({field:"$score",direction:"desc"})}else for(d=0,e=h.length;e>d;d++)if("$score"===h[d].field){h.splice(d,1);break}for(k=[],d=0,e=h.length;e>d;d++)k.push("desc"===h[d].direction?-1:1);return i=h.length,i?1===i?(g=h[0].field,j=k[0],function(a,c){return j*b(l(g,a),l(g,c))}):function(a,c){var d,e,f;for(d=0;i>d;d++)if(f=h[d].field,e=k[d]*b(l(f,a),l(f,c)))return e;return 0}:null},a.prototype.prepareSearch=function(a,b){if("object"==typeof a)return a;b=c({},b);var d=b.fields,e=b.sort,g=b.sort_empty;return d&&!f(d)&&(b.fields=[d]),e&&!f(e)&&(b.sort=[e]),g&&!f(g)&&(b.sort_empty=[g]),{options:b,query:String(a||"").toLowerCase(),tokens:this.tokenize(a),total:0,items:[]}},a.prototype.search=function(a,b){var c,d,e,f,g=this;return d=this.prepareSearch(a,b),b=d.options,a=d.query,f=b.score||g.getScoreFunction(d),a.length?g.iterator(g.items,function(a,e){c=f(a),(b.filter===!1||c>0)&&d.items.push({score:c,id:e})}):g.iterator(g.items,function(a,b){d.items.push({score:1,id:b})}),e=g.getSortFunction(d,b),e&&d.items.sort(e),d.total=d.items.length,"number"==typeof b.limit&&(d.items=d.items.slice(0,b.limit)),d};var b=function(a,b){return"number"==typeof a&&"number"==typeof b?a>b?1:b>a?-1:0:(a=h(String(a||"")),b=h(String(b||"")),a>b?1:b>a?-1:0)},c=function(a){var b,c,d,e;for(b=1,c=arguments.length;c>b;b++)if(e=arguments[b])for(d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);return a},d=function(a){return(a+"").replace(/^\s+|\s+$|/g,"")},e=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},f=Array.isArray||$&&$.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},h=function(){var a,b,c,d,e="",f={};for(c in g)if(g.hasOwnProperty(c))for(d=g[c].substring(2,g[c].length-1),e+=d,a=0,b=d.length;b>a;a++)f[d.charAt(a)]=c;var h=new RegExp("["+e+"]","g");return function(a){return a.replace(h,function(a){return f[a]}).toLowerCase()}}();return a}),function(a,b){"function"==typeof define&&define.amd?define("microplugin",b):"object"==typeof exports?module.exports=b():a.MicroPlugin=b()}(this,function(){var a={};a.mixin=function(a){a.plugins={},a.prototype.initializePlugins=function(a){var c,d,e,f=this,g=[];if(f.plugins={names:[],settings:{},requested:{},loaded:{}},b.isArray(a))for(c=0,d=a.length;d>c;c++)"string"==typeof a[c]?g.push(a[c]):(f.plugins.settings[a[c].name]=a[c].options,g.push(a[c].name));else if(a)for(e in a)a.hasOwnProperty(e)&&(f.plugins.settings[e]=a[e],g.push(e));for(;g.length;)f.require(g.shift())},a.prototype.loadPlugin=function(b){var c=this,d=c.plugins,e=a.plugins[b];if(!a.plugins.hasOwnProperty(b))throw new Error('Unable to find "'+b+'" plugin');d.requested[b]=!0,d.loaded[b]=e.fn.apply(c,[c.plugins.settings[b]||{}]),d.names.push(b)},a.prototype.require=function(a){var b=this,c=b.plugins;if(!b.plugins.loaded.hasOwnProperty(a)){if(c.requested[a])throw new Error('Plugin has circular dependency ("'+a+'")');b.loadPlugin(a)}return c.loaded[a]},a.define=function(b,c){a.plugins[b]={name:b,fn:c}}};var b={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}};return a}),function(a,b){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("sifter"),require("microplugin")):a.Selectize=b(a.jQuery,a.Sifter,a.MicroPlugin)}(this,function(a,b,c){var d=function(a,b){if("string"!=typeof b||b.length){var c="string"==typeof b?new RegExp(b,"i"):b,d=function(a){var b=0;if(3===a.nodeType){var e=a.data.search(c);if(e>=0&&a.data.length>0){var f=a.data.match(c),g=document.createElement("span");g.className="highlight";var h=a.splitText(e),i=(h.splitText(f[0].length),h.cloneNode(!0));g.appendChild(i),h.parentNode.replaceChild(g,h),b=1}}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName))for(var j=0;j<a.childNodes.length;++j)j+=d(a.childNodes[j]);return b};return a.each(function(){d(this)})}},e=function(){};e.prototype={on:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},off:function(a,b){var c=arguments.length;return 0===c?delete this._events:1===c?delete this._events[a]:(this._events=this._events||{},void(a in this._events!=0&&this._events[a].splice(this._events[a].indexOf(b),1)))},trigger:function(a){if(this._events=this._events||{},a in this._events!=0)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},e.mixin=function(a){for(var b=["on","off","trigger"],c=0;c<b.length;c++)a.prototype[b[c]]=e.prototype[b[c]]};var f=/Mac/.test(navigator.userAgent),g=65,h=13,i=27,j=37,k=38,l=80,m=39,n=40,o=78,p=8,q=46,r=16,s=f?91:17,t=f?18:17,u=9,v=1,w=2,x=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,y=function(a){return"undefined"!=typeof a},z=function(a){return"undefined"==typeof a||null===a?null:"boolean"==typeof a?a?"1":"0":a+""},A=function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},B=function(a){return(a+"").replace(/\$/g,"$$$$")},C={};C.before=function(a,b,c){var d=a[b];a[b]=function(){return c.apply(a,arguments),d.apply(a,arguments)}},C.after=function(a,b,c){var d=a[b];a[b]=function(){var b=d.apply(a,arguments);return c.apply(a,arguments),b}};var D=function(a){var b=!1;return function(){b||(b=!0,a.apply(this,arguments))}},E=function(a,b){var c;return function(){var d=this,e=arguments;window.clearTimeout(c),c=window.setTimeout(function(){a.apply(d,e)},b)}},F=function(a,b,c){var d,e=a.trigger,f={};a.trigger=function(){var c=arguments[0];return-1===b.indexOf(c)?e.apply(a,arguments):void(f[c]=arguments)},c.apply(a,[]),a.trigger=e;for(d in f)f.hasOwnProperty(d)&&e.apply(a,f[d])},G=function(a,b,c,d){a.on(b,c,function(b){for(var c=b.target;c&&c.parentNode!==a[0];)c=c.parentNode;return b.currentTarget=c,d.apply(this,[b])})},H=function(a){var b={};if("selectionStart"in a)b.start=a.selectionStart,b.length=a.selectionEnd-b.start;else if(document.selection){a.focus();var c=document.selection.createRange(),d=document.selection.createRange().text.length;c.moveStart("character",-a.value.length),b.start=c.text.length-d,b.length=d}return b},I=function(a,b,c){var d,e,f={};if(c)for(d=0,e=c.length;e>d;d++)f[c[d]]=a.css(c[d]);else f=a.css();b.css(f)},J=function(b,c){if(!b)return 0;var d=a("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(b).appendTo("body");I(c,d,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var e=d.width();return d.remove(),e},K=function(a){var b=null,c=function(c,d){var e,f,g,h,i,j,k,l;c=c||window.event||{},d=d||{},c.metaKey||c.altKey||(d.force||a.data("grow")!==!1)&&(e=a.val(),c.type&&"keydown"===c.type.toLowerCase()&&(f=c.keyCode,g=f>=97&&122>=f||f>=65&&90>=f||f>=48&&57>=f||32===f,f===q||f===p?(l=H(a[0]),l.length?e=e.substring(0,l.start)+e.substring(l.start+l.length):f===p&&l.start?e=e.substring(0,l.start-1)+e.substring(l.start+1):f===q&&"undefined"!=typeof l.start&&(e=e.substring(0,l.start)+e.substring(l.start+1))):g&&(j=c.shiftKey,k=String.fromCharCode(c.keyCode),k=j?k.toUpperCase():k.toLowerCase(),e+=k)),h=a.attr("placeholder"),!e&&h&&(e=h),i=J(e,a)+4,i!==b&&(b=i,a.width(i),a.triggerHandler("resize")))};a.on("keydown keyup update blur",c),c()},L=function(c,d){var e,f,g,h,i=this;h=c[0],h.selectize=i;var j=window.getComputedStyle&&window.getComputedStyle(h,null);if(g=j?j.getPropertyValue("direction"):h.currentStyle&&h.currentStyle.direction,g=g||c.parents("[dir]:first").attr("dir")||"",a.extend(i,{order:0,settings:d,$input:c,tabIndex:c.attr("tabindex")||"",tagType:"select"===h.tagName.toLowerCase()?v:w,rtl:/rtl/i.test(g),eventNS:".selectize"+ ++L.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:c.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===d.loadThrottle?i.onSearchChange:E(i.onSearchChange,d.loadThrottle)}),i.sifter=new b(this.options,{diacritics:d.diacritics}),i.settings.options){for(e=0,f=i.settings.options.length;f>e;e++)i.registerOption(i.settings.options[e]);delete i.settings.options}if(i.settings.optgroups){for(e=0,f=i.settings.optgroups.length;f>e;e++)i.registerOptionGroup(i.settings.optgroups[e]);delete i.settings.optgroups}i.settings.mode=i.settings.mode||(1===i.settings.maxItems?"single":"multi"),"boolean"!=typeof i.settings.hideSelected&&(i.settings.hideSelected="multi"===i.settings.mode),i.initializePlugins(i.settings.plugins),i.setupCallbacks(),i.setupTemplates(),i.setup()};return e.mixin(L),c.mixin(L),a.extend(L.prototype,{setup:function(){var b,c,d,e,g,h,i,j,k,l=this,m=l.settings,n=l.eventNS,o=a(window),p=a(document),q=l.$input;if(i=l.settings.mode,j=q.attr("class")||"",b=a("<div>").addClass(m.wrapperClass).addClass(j).addClass(i),c=a("<div>").addClass(m.inputClass).addClass("items").appendTo(b),d=a('<input type="text" autocomplete="off" />').appendTo(c).attr("tabindex",q.is(":disabled")?"-1":l.tabIndex),
h=a(m.dropdownParent||b),e=a("<div>").addClass(m.dropdownClass).addClass(i).hide().appendTo(h),g=a("<div>").addClass(m.dropdownContentClass).appendTo(e),l.settings.copyClassesToDropdown&&e.addClass(j),b.css({width:q[0].style.width}),l.plugins.names.length&&(k="plugin-"+l.plugins.names.join(" plugin-"),b.addClass(k),e.addClass(k)),(null===m.maxItems||m.maxItems>1)&&l.tagType===v&&q.attr("multiple","multiple"),l.settings.placeholder&&d.attr("placeholder",m.placeholder),!l.settings.splitOn&&l.settings.delimiter){var u=l.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");l.settings.splitOn=new RegExp("\\s*"+u+"+\\s*")}q.attr("autocorrect")&&d.attr("autocorrect",q.attr("autocorrect")),q.attr("autocapitalize")&&d.attr("autocapitalize",q.attr("autocapitalize")),l.$wrapper=b,l.$control=c,l.$control_input=d,l.$dropdown=e,l.$dropdown_content=g,e.on("mouseenter","[data-selectable]",function(){return l.onOptionHover.apply(l,arguments)}),e.on("mousedown click","[data-selectable]",function(){return l.onOptionSelect.apply(l,arguments)}),G(c,"mousedown","*:not(input)",function(){return l.onItemSelect.apply(l,arguments)}),K(d),c.on({mousedown:function(){return l.onMouseDown.apply(l,arguments)},click:function(){return l.onClick.apply(l,arguments)}}),d.on({mousedown:function(a){a.stopPropagation()},keydown:function(){return l.onKeyDown.apply(l,arguments)},keyup:function(){return l.onKeyUp.apply(l,arguments)},keypress:function(){return l.onKeyPress.apply(l,arguments)},resize:function(){l.positionDropdown.apply(l,[])},blur:function(){return l.onBlur.apply(l,arguments)},focus:function(){return l.ignoreBlur=!1,l.onFocus.apply(l,arguments)},paste:function(){return l.onPaste.apply(l,arguments)}}),p.on("keydown"+n,function(a){l.isCmdDown=a[f?"metaKey":"ctrlKey"],l.isCtrlDown=a[f?"altKey":"ctrlKey"],l.isShiftDown=a.shiftKey}),p.on("keyup"+n,function(a){a.keyCode===t&&(l.isCtrlDown=!1),a.keyCode===r&&(l.isShiftDown=!1),a.keyCode===s&&(l.isCmdDown=!1)}),p.on("mousedown"+n,function(a){if(l.isFocused){if(a.target===l.$dropdown[0]||a.target.parentNode===l.$dropdown[0])return!1;l.$control.has(a.target).length||a.target===l.$control[0]||l.blur(a.target)}}),o.on(["scroll"+n,"resize"+n].join(" "),function(){l.isOpen&&l.positionDropdown.apply(l,arguments)}),o.on("mousemove"+n,function(){l.ignoreHover=!1}),this.revertSettings={$children:q.children().detach(),tabindex:q.attr("tabindex")},q.attr("tabindex",-1).hide().after(l.$wrapper),a.isArray(m.items)&&(l.setValue(m.items),delete m.items),x&&q.on("invalid"+n,function(a){a.preventDefault(),l.isInvalid=!0,l.refreshState()}),l.updateOriginalInput(),l.refreshItems(),l.refreshState(),l.updatePlaceholder(),l.isSetup=!0,q.is(":disabled")&&l.disable(),l.on("change",this.onChange),q.data("selectize",l),q.addClass("selectized"),l.trigger("initialize"),m.preload===!0&&l.onSearchChange("")},setupTemplates:function(){var b=this,c=b.settings.labelField,d=b.settings.optgroupLabelField,e={optgroup:function(a){return'<div class="optgroup">'+a.html+"</div>"},optgroup_header:function(a,b){return'<div class="optgroup-header">'+b(a[d])+"</div>"},option:function(a,b){return'<div class="option">'+b(a[c])+"</div>"},item:function(a,b){return'<div class="item">'+b(a[c])+"</div>"},option_create:function(a,b){return'<div class="create">Add <strong>'+b(a.input)+"</strong>&hellip;</div>"}};b.settings.render=a.extend({},e,b.settings.render)},setupCallbacks:function(){var a,b,c={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(a in c)c.hasOwnProperty(a)&&(b=this.settings[c[a]],b&&this.on(a,b))},onClick:function(a){var b=this;b.isFocused||(b.focus(),a.preventDefault())},onMouseDown:function(b){var c=this,d=b.isDefaultPrevented();if(a(b.target),c.isFocused){if(b.target!==c.$control_input[0])return"single"===c.settings.mode?c.isOpen?c.close():c.open():d||c.setActiveItem(null),!1}else d||window.setTimeout(function(){c.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(b){var c=this;c.isFull()||c.isInputHidden||c.isLocked?b.preventDefault():c.settings.splitOn&&setTimeout(function(){for(var b=a.trim(c.$control_input.val()||"").split(c.settings.splitOn),d=0,e=b.length;e>d;d++)c.createItem(b[d])},0)},onKeyPress:function(a){if(this.isLocked)return a&&a.preventDefault();var b=String.fromCharCode(a.keyCode||a.which);return this.settings.create&&"multi"===this.settings.mode&&b===this.settings.delimiter?(this.createItem(),a.preventDefault(),!1):void 0},onKeyDown:function(a){var b=(a.target===this.$control_input[0],this);if(b.isLocked)return void(a.keyCode!==u&&a.preventDefault());switch(a.keyCode){case g:if(b.isCmdDown)return void b.selectAll();break;case i:return void(b.isOpen&&(a.preventDefault(),a.stopPropagation(),b.close()));case o:if(!a.ctrlKey||a.altKey)break;case n:if(!b.isOpen&&b.hasOptions)b.open();else if(b.$activeOption){b.ignoreHover=!0;var c=b.getAdjacentOption(b.$activeOption,1);c.length&&b.setActiveOption(c,!0,!0)}return void a.preventDefault();case l:if(!a.ctrlKey||a.altKey)break;case k:if(b.$activeOption){b.ignoreHover=!0;var d=b.getAdjacentOption(b.$activeOption,-1);d.length&&b.setActiveOption(d,!0,!0)}return void a.preventDefault();case h:return void(b.isOpen&&b.$activeOption&&(b.onOptionSelect({currentTarget:b.$activeOption}),a.preventDefault()));case j:return void b.advanceSelection(-1,a);case m:return void b.advanceSelection(1,a);case u:return b.settings.selectOnTab&&b.isOpen&&b.$activeOption&&(b.onOptionSelect({currentTarget:b.$activeOption}),b.isFull()||a.preventDefault()),void(b.settings.create&&b.createItem()&&a.preventDefault());case p:case q:return void b.deleteSelection(a)}return!b.isFull()&&!b.isInputHidden||(f?a.metaKey:a.ctrlKey)?void 0:void a.preventDefault()},onKeyUp:function(a){var b=this;if(b.isLocked)return a&&a.preventDefault();var c=b.$control_input.val()||"";b.lastValue!==c&&(b.lastValue=c,b.onSearchChange(c),b.refreshOptions(),b.trigger("type",c))},onSearchChange:function(a){var b=this,c=b.settings.load;c&&(b.loadedSearches.hasOwnProperty(a)||(b.loadedSearches[a]=!0,b.load(function(d){c.apply(b,[a,d])})))},onFocus:function(a){var b=this,c=b.isFocused;return b.isDisabled?(b.blur(),a&&a.preventDefault(),!1):void(b.ignoreFocus||(b.isFocused=!0,"focus"===b.settings.preload&&b.onSearchChange(""),c||b.trigger("focus"),b.$activeItems.length||(b.showInput(),b.setActiveItem(null),b.refreshOptions(!!b.settings.openOnFocus)),b.refreshState()))},onBlur:function(a,b){var c=this;if(c.isFocused&&(c.isFocused=!1,!c.ignoreFocus)){if(!c.ignoreBlur&&document.activeElement===c.$dropdown_content[0])return c.ignoreBlur=!0,void c.onFocus(a);var d=function(){c.close(),c.setTextboxValue(""),c.setActiveItem(null),c.setActiveOption(null),c.setCaret(c.items.length),c.refreshState(),(b||document.body).focus(),c.ignoreFocus=!1,c.trigger("blur")};c.ignoreFocus=!0,c.settings.create&&c.settings.createOnBlur?c.createItem(null,!1,d):d()}},onOptionHover:function(a){this.ignoreHover||this.setActiveOption(a.currentTarget,!1)},onOptionSelect:function(b){var c,d,e=this;b.preventDefault&&(b.preventDefault(),b.stopPropagation()),d=a(b.currentTarget),d.hasClass("create")?e.createItem(null,function(){e.settings.closeAfterSelect&&e.close()}):(c=d.attr("data-value"),"undefined"!=typeof c&&(e.lastQuery=null,e.setTextboxValue(""),e.addItem(c),e.settings.closeAfterSelect?e.close():!e.settings.hideSelected&&b.type&&/mouse/.test(b.type)&&e.setActiveOption(e.getOption(c))))},onItemSelect:function(a){var b=this;b.isLocked||"multi"===b.settings.mode&&(a.preventDefault(),b.setActiveItem(a.currentTarget,a))},load:function(a){var b=this,c=b.$wrapper.addClass(b.settings.loadingClass);b.loading++,a.apply(b,[function(a){b.loading=Math.max(b.loading-1,0),a&&a.length&&(b.addOption(a),b.refreshOptions(b.isFocused&&!b.isInputHidden)),b.loading||c.removeClass(b.settings.loadingClass),b.trigger("load",a)}])},setTextboxValue:function(a){var b=this.$control_input,c=b.val()!==a;c&&(b.val(a).triggerHandler("update"),this.lastValue=a)},getValue:function(){return this.tagType===v&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(a,b){var c=b?[]:["change"];F(this,c,function(){this.clear(b),this.addItems(a,b)})},setActiveItem:function(b,c){var d,e,f,g,h,i,j,k,l=this;if("single"!==l.settings.mode){if(b=a(b),!b.length)return a(l.$activeItems).removeClass("active"),l.$activeItems=[],void(l.isFocused&&l.showInput());if(d=c&&c.type.toLowerCase(),"mousedown"===d&&l.isShiftDown&&l.$activeItems.length){for(k=l.$control.children(".active:last"),g=Array.prototype.indexOf.apply(l.$control[0].childNodes,[k[0]]),h=Array.prototype.indexOf.apply(l.$control[0].childNodes,[b[0]]),g>h&&(j=g,g=h,h=j),e=g;h>=e;e++)i=l.$control[0].childNodes[e],-1===l.$activeItems.indexOf(i)&&(a(i).addClass("active"),l.$activeItems.push(i));c.preventDefault()}else"mousedown"===d&&l.isCtrlDown||"keydown"===d&&this.isShiftDown?b.hasClass("active")?(f=l.$activeItems.indexOf(b[0]),l.$activeItems.splice(f,1),b.removeClass("active")):l.$activeItems.push(b.addClass("active")[0]):(a(l.$activeItems).removeClass("active"),l.$activeItems=[b.addClass("active")[0]]);l.hideInput(),this.isFocused||l.focus()}},setActiveOption:function(b,c,d){var e,f,g,h,i,j=this;j.$activeOption&&j.$activeOption.removeClass("active"),j.$activeOption=null,b=a(b),b.length&&(j.$activeOption=b.addClass("active"),(c||!y(c))&&(e=j.$dropdown_content.height(),f=j.$activeOption.outerHeight(!0),c=j.$dropdown_content.scrollTop()||0,g=j.$activeOption.offset().top-j.$dropdown_content.offset().top+c,h=g,i=g-e+f,g+f>e+c?j.$dropdown_content.stop().animate({scrollTop:i},d?j.settings.scrollDuration:0):c>g&&j.$dropdown_content.stop().animate({scrollTop:h},d?j.settings.scrollDuration:0)))},selectAll:function(){var a=this;"single"!==a.settings.mode&&(a.$activeItems=Array.prototype.slice.apply(a.$control.children(":not(input)").addClass("active")),a.$activeItems.length&&(a.hideInput(),a.close()),a.focus())},hideInput:function(){var a=this;a.setTextboxValue(""),a.$control_input.css({opacity:0,position:"absolute",left:a.rtl?1e4:-1e4}),a.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var a=this;a.isDisabled||(a.ignoreFocus=!0,a.$control_input[0].focus(),window.setTimeout(function(){a.ignoreFocus=!1,a.onFocus()},0))},blur:function(a){this.$control_input[0].blur(),this.onBlur(null,a)},getScoreFunction:function(a){return this.sifter.getScoreFunction(a,this.getSearchOptions())},getSearchOptions:function(){var a=this.settings,b=a.sortField;return"string"==typeof b&&(b=[{field:b}]),{fields:a.searchField,conjunction:a.searchConjunction,sort:b}},search:function(b){var c,d,e,f=this,g=f.settings,h=this.getSearchOptions();if(g.score&&(e=f.settings.score.apply(this,[b]),"function"!=typeof e))throw new Error('Selectize "score" setting must be a function that returns a function');if(b!==f.lastQuery?(f.lastQuery=b,d=f.sifter.search(b,a.extend(h,{score:e})),f.currentResults=d):d=a.extend(!0,{},f.currentResults),g.hideSelected)for(c=d.items.length-1;c>=0;c--)-1!==f.items.indexOf(z(d.items[c].id))&&d.items.splice(c,1);return d},refreshOptions:function(b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;"undefined"==typeof b&&(b=!0);var t=this,u=a.trim(t.$control_input.val()),v=t.search(u),w=t.$dropdown_content,x=t.$activeOption&&z(t.$activeOption.attr("data-value"));for(g=v.items.length,"number"==typeof t.settings.maxOptions&&(g=Math.min(g,t.settings.maxOptions)),h={},i=[],c=0;g>c;c++)for(j=t.options[v.items[c].id],k=t.render("option",j),l=j[t.settings.optgroupField]||"",m=a.isArray(l)?l:[l],e=0,f=m&&m.length;f>e;e++)l=m[e],t.optgroups.hasOwnProperty(l)||(l=""),h.hasOwnProperty(l)||(h[l]=[],i.push(l)),h[l].push(k);for(this.settings.lockOptgroupOrder&&i.sort(function(a,b){var c=t.optgroups[a].$order||0,d=t.optgroups[b].$order||0;return c-d}),n=[],c=0,g=i.length;g>c;c++)l=i[c],t.optgroups.hasOwnProperty(l)&&h[l].length?(o=t.render("optgroup_header",t.optgroups[l])||"",o+=h[l].join(""),n.push(t.render("optgroup",a.extend({},t.optgroups[l],{html:o})))):n.push(h[l].join(""));if(w.html(n.join("")),t.settings.highlight&&v.query.length&&v.tokens.length)for(c=0,g=v.tokens.length;g>c;c++)d(w,v.tokens[c].regex);if(!t.settings.hideSelected)for(c=0,g=t.items.length;g>c;c++)t.getOption(t.items[c]).addClass("selected");p=t.canCreate(u),p&&(w.prepend(t.render("option_create",{input:u})),s=a(w[0].childNodes[0])),t.hasOptions=v.items.length>0||p,t.hasOptions?(v.items.length>0?(r=x&&t.getOption(x),r&&r.length?q=r:"single"===t.settings.mode&&t.items.length&&(q=t.getOption(t.items[0])),q&&q.length||(q=s&&!t.settings.addPrecedence?t.getAdjacentOption(s,1):w.find("[data-selectable]:first"))):q=s,t.setActiveOption(q),b&&!t.isOpen&&t.open()):(t.setActiveOption(null),b&&t.isOpen&&t.close())},addOption:function(b){var c,d,e,f=this;if(a.isArray(b))for(c=0,d=b.length;d>c;c++)f.addOption(b[c]);else(e=f.registerOption(b))&&(f.userOptions[e]=!0,f.lastQuery=null,f.trigger("option_add",e,b))},registerOption:function(a){var b=z(a[this.settings.valueField]);return!b||this.options.hasOwnProperty(b)?!1:(a.$order=a.$order||++this.order,this.options[b]=a,b)},registerOptionGroup:function(a){var b=z(a[this.settings.optgroupValueField]);return b?(a.$order=a.$order||++this.order,this.optgroups[b]=a,b):!1},addOptionGroup:function(a,b){b[this.settings.optgroupValueField]=a,(a=this.registerOptionGroup(b))&&this.trigger("optgroup_add",a,b)},removeOptionGroup:function(a){this.optgroups.hasOwnProperty(a)&&(delete this.optgroups[a],this.renderCache={},this.trigger("optgroup_remove",a))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(b,c){var d,e,f,g,h,i,j,k=this;if(b=z(b),f=z(c[k.settings.valueField]),null!==b&&k.options.hasOwnProperty(b)){if("string"!=typeof f)throw new Error("Value must be set in option data");j=k.options[b].$order,f!==b&&(delete k.options[b],g=k.items.indexOf(b),-1!==g&&k.items.splice(g,1,f)),c.$order=c.$order||j,k.options[f]=c,h=k.renderCache.item,i=k.renderCache.option,h&&(delete h[b],delete h[f]),i&&(delete i[b],delete i[f]),-1!==k.items.indexOf(f)&&(d=k.getItem(b),e=a(k.render("item",c)),d.hasClass("active")&&e.addClass("active"),d.replaceWith(e)),k.lastQuery=null,k.isOpen&&k.refreshOptions(!1)}},removeOption:function(a,b){var c=this;a=z(a);var d=c.renderCache.item,e=c.renderCache.option;d&&delete d[a],e&&delete e[a],delete c.userOptions[a],delete c.options[a],c.lastQuery=null,c.trigger("option_remove",a),c.removeItem(a,b)},clearOptions:function(){var a=this;a.loadedSearches={},a.userOptions={},a.renderCache={},a.options=a.sifter.items={},a.lastQuery=null,a.trigger("option_clear"),a.clear()},getOption:function(a){return this.getElementWithValue(a,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(b,c){var d=this.$dropdown.find("[data-selectable]"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},getElementWithValue:function(b,c){if(b=z(b),"undefined"!=typeof b&&null!==b)for(var d=0,e=c.length;e>d;d++)if(c[d].getAttribute("data-value")===b)return a(c[d]);return a()},getItem:function(a){return this.getElementWithValue(a,this.$control.children())},addItems:function(b,c){for(var d=a.isArray(b)?b:[b],e=0,f=d.length;f>e;e++)this.isPending=f-1>e,this.addItem(d[e],c)},addItem:function(b,c){var d=c?[]:["change"];F(this,d,function(){var d,e,f,g,h,i=this,j=i.settings.mode;return b=z(b),-1!==i.items.indexOf(b)?void("single"===j&&i.close()):void(i.options.hasOwnProperty(b)&&("single"===j&&i.clear(c),"multi"===j&&i.isFull()||(d=a(i.render("item",i.options[b])),h=i.isFull(),i.items.splice(i.caretPos,0,b),i.insertAtCaret(d),(!i.isPending||!h&&i.isFull())&&i.refreshState(),i.isSetup&&(f=i.$dropdown_content.find("[data-selectable]"),i.isPending||(e=i.getOption(b),g=i.getAdjacentOption(e,1).attr("data-value"),i.refreshOptions(i.isFocused&&"single"!==j),g&&i.setActiveOption(i.getOption(g))),!f.length||i.isFull()?i.close():i.positionDropdown(),i.updatePlaceholder(),i.trigger("item_add",b,d),i.updateOriginalInput({silent:c})))))})},removeItem:function(a,b){var c,d,e,f=this;c="object"==typeof a?a:f.getItem(a),a=z(c.attr("data-value")),d=f.items.indexOf(a),-1!==d&&(c.remove(),c.hasClass("active")&&(e=f.$activeItems.indexOf(c[0]),f.$activeItems.splice(e,1)),f.items.splice(d,1),f.lastQuery=null,!f.settings.persist&&f.userOptions.hasOwnProperty(a)&&f.removeOption(a,b),d<f.caretPos&&f.setCaret(f.caretPos-1),f.refreshState(),f.updatePlaceholder(),f.updateOriginalInput({silent:b}),f.positionDropdown(),f.trigger("item_remove",a,c))},createItem:function(b,c){var d=this,e=d.caretPos;b=b||a.trim(d.$control_input.val()||"");var f=arguments[arguments.length-1];if("function"!=typeof f&&(f=function(){}),"boolean"!=typeof c&&(c=!0),!d.canCreate(b))return f(),!1;d.lock();var g="function"==typeof d.settings.create?this.settings.create:function(a){var b={};return b[d.settings.labelField]=a,b[d.settings.valueField]=a,b},h=D(function(a){if(d.unlock(),!a||"object"!=typeof a)return f();var b=z(a[d.settings.valueField]);return"string"!=typeof b?f():(d.setTextboxValue(""),d.addOption(a),d.setCaret(e),d.addItem(b),d.refreshOptions(c&&"single"!==d.settings.mode),void f(a))}),i=g.apply(this,[b,h]);return"undefined"!=typeof i&&h(i),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var a,b=this;b.isRequired&&(b.items.length&&(b.isInvalid=!1),b.$control_input.prop("required",a)),b.refreshClasses()},refreshClasses:function(){var b=this,c=b.isFull(),d=b.isLocked;b.$wrapper.toggleClass("rtl",b.rtl),b.$control.toggleClass("focus",b.isFocused).toggleClass("disabled",b.isDisabled).toggleClass("required",b.isRequired).toggleClass("invalid",b.isInvalid).toggleClass("locked",d).toggleClass("full",c).toggleClass("not-full",!c).toggleClass("input-active",b.isFocused&&!b.isInputHidden).toggleClass("dropdown-active",b.isOpen).toggleClass("has-options",!a.isEmptyObject(b.options)).toggleClass("has-items",b.items.length>0),b.$control_input.data("grow",!c&&!d)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(a){var b,c,d,e,f=this;if(a=a||{},f.tagType===v){for(d=[],b=0,c=f.items.length;c>b;b++)e=f.options[f.items[b]][f.settings.labelField]||"",d.push('<option value="'+A(f.items[b])+'" selected="selected">'+A(e)+"</option>");d.length||this.$input.attr("multiple")||d.push('<option value="" selected="selected"></option>'),f.$input.html(d.join(""))}else f.$input.val(f.getValue()),f.$input.attr("value",f.$input.val());f.isSetup&&(a.silent||f.trigger("change",f.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var a=this.$control_input;this.items.length?a.removeAttr("placeholder"):a.attr("placeholder",this.settings.placeholder),a.triggerHandler("update",{force:!0})}},open:function(){var a=this;a.isLocked||a.isOpen||"multi"===a.settings.mode&&a.isFull()||(a.focus(),a.isOpen=!0,a.refreshState(),a.$dropdown.css({visibility:"hidden",display:"block"}),a.positionDropdown(),a.$dropdown.css({visibility:"visible"}),a.trigger("dropdown_open",a.$dropdown))},close:function(){var a=this,b=a.isOpen;"single"===a.settings.mode&&a.items.length&&a.hideInput(),a.isOpen=!1,a.$dropdown.hide(),a.setActiveOption(null),a.refreshState(),b&&a.trigger("dropdown_close",a.$dropdown)},positionDropdown:function(){var a=this.$control,b="body"===this.settings.dropdownParent?a.offset():a.position();b.top+=a.outerHeight(!0),this.$dropdown.css({width:a.outerWidth(),top:b.top,left:b.left})},clear:function(a){var b=this;b.items.length&&(b.$control.children(":not(input)").remove(),b.items=[],b.lastQuery=null,b.setCaret(0),b.setActiveItem(null),b.updatePlaceholder(),b.updateOriginalInput({silent:a}),b.refreshState(),b.showInput(),b.trigger("clear"))},insertAtCaret:function(b){var c=Math.min(this.caretPos,this.items.length);0===c?this.$control.prepend(b):a(this.$control[0].childNodes[c]).before(b),this.setCaret(c+1)},deleteSelection:function(b){var c,d,e,f,g,h,i,j,k,l=this;if(e=b&&b.keyCode===p?-1:1,f=H(l.$control_input[0]),l.$activeOption&&!l.settings.hideSelected&&(i=l.getAdjacentOption(l.$activeOption,-1).attr("data-value")),g=[],l.$activeItems.length){for(k=l.$control.children(".active:"+(e>0?"last":"first")),h=l.$control.children(":not(input)").index(k),e>0&&h++,c=0,d=l.$activeItems.length;d>c;c++)g.push(a(l.$activeItems[c]).attr("data-value"));b&&(b.preventDefault(),b.stopPropagation())}else(l.isFocused||"single"===l.settings.mode)&&l.items.length&&(0>e&&0===f.start&&0===f.length?g.push(l.items[l.caretPos-1]):e>0&&f.start===l.$control_input.val().length&&g.push(l.items[l.caretPos]));if(!g.length||"function"==typeof l.settings.onDelete&&l.settings.onDelete.apply(l,[g])===!1)return!1;for("undefined"!=typeof h&&l.setCaret(h);g.length;)l.removeItem(g.pop());return l.showInput(),l.positionDropdown(),l.refreshOptions(!0),i&&(j=l.getOption(i),j.length&&l.setActiveOption(j)),!0},advanceSelection:function(a,b){var c,d,e,f,g,h,i=this;0!==a&&(i.rtl&&(a*=-1),c=a>0?"last":"first",d=H(i.$control_input[0]),i.isFocused&&!i.isInputHidden?(f=i.$control_input.val().length,g=0>a?0===d.start&&0===d.length:d.start===f,g&&!f&&i.advanceCaret(a,b)):(h=i.$control.children(".active:"+c),h.length&&(e=i.$control.children(":not(input)").index(h),i.setActiveItem(null),i.setCaret(a>0?e+1:e))))},advanceCaret:function(a,b){var c,d,e=this;0!==a&&(c=a>0?"next":"prev",e.isShiftDown?(d=e.$control_input[c](),d.length&&(e.hideInput(),e.setActiveItem(d),b&&b.preventDefault())):e.setCaret(e.caretPos+a))},setCaret:function(b){var c=this;if(b="single"===c.settings.mode?c.items.length:Math.max(0,Math.min(c.items.length,b)),!c.isPending){var d,e,f,g;for(f=c.$control.children(":not(input)"),d=0,e=f.length;e>d;d++)g=a(f[d]).detach(),b>d?c.$control_input.before(g):c.$control.append(g)}c.caretPos=b},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var a=this;a.$input.prop("disabled",!0),a.$control_input.prop("disabled",!0).prop("tabindex",-1),a.isDisabled=!0,a.lock()},enable:function(){var a=this;a.$input.prop("disabled",!1),a.$control_input.prop("disabled",!1).prop("tabindex",a.tabIndex),a.isDisabled=!1,a.unlock()},destroy:function(){var b=this,c=b.eventNS,d=b.revertSettings;b.trigger("destroy"),b.off(),b.$wrapper.remove(),b.$dropdown.remove(),b.$input.html("").append(d.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:d.tabindex}).show(),b.$control_input.removeData("grow"),b.$input.removeData("selectize"),a(window).off(c),a(document).off(c),a(document.body).off(c),delete b.$input[0].selectize},render:function(a,b){var c,d,e="",f=!1,g=this,h=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===a||"item"===a)&&(c=z(b[g.settings.valueField]),f=!!c),f&&(y(g.renderCache[a])||(g.renderCache[a]={}),g.renderCache[a].hasOwnProperty(c))?g.renderCache[a][c]:(e=g.settings.render[a].apply(this,[b,A]),("option"===a||"option_create"===a)&&(e=e.replace(h,"<$1 data-selectable")),"optgroup"===a&&(d=b[g.settings.optgroupValueField]||"",e=e.replace(h,'<$1 data-group="'+B(A(d))+'"')),("option"===a||"item"===a)&&(e=e.replace(h,'<$1 data-value="'+B(A(c||""))+'"')),f&&(g.renderCache[a][c]=e),e)},clearCache:function(a){var b=this;"undefined"==typeof a?b.renderCache={}:delete b.renderCache[a]},canCreate:function(a){var b=this;if(!b.settings.create)return!1;var c=b.settings.createFilter;return!(!a.length||"function"==typeof c&&!c.apply(b,[a])||"string"==typeof c&&!new RegExp(c).test(a)||c instanceof RegExp&&!c.test(a))}}),L.count=0,L.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},a.fn.selectize=function(b){var c=a.fn.selectize.defaults,d=a.extend({},c,b),e=d.dataAttr,f=d.labelField,g=d.valueField,h=d.optgroupField,i=d.optgroupLabelField,j=d.optgroupValueField,k=function(b,c){var h,i,j,k,l=b.attr(e);if(l)for(c.options=JSON.parse(l),h=0,i=c.options.length;i>h;h++)c.items.push(c.options[h][g]);else{var m=a.trim(b.val()||"");if(!d.allowEmptyOption&&!m.length)return;for(j=m.split(d.delimiter),h=0,i=j.length;i>h;h++)k={},k[f]=j[h],k[g]=j[h],c.options.push(k);c.items=j}},l=function(b,c){var k,l,m,n,o=c.options,p={},q=function(a){var b=e&&a.attr(e);return"string"==typeof b&&b.length?JSON.parse(b):null},r=function(b,e){b=a(b);var i=z(b.attr("value"));if(i||d.allowEmptyOption)if(p.hasOwnProperty(i)){if(e){var j=p[i][h];j?a.isArray(j)?j.push(e):p[i][h]=[j,e]:p[i][h]=e}}else{var k=q(b)||{};k[f]=k[f]||b.text(),k[g]=k[g]||i,k[h]=k[h]||e,p[i]=k,o.push(k),b.is(":selected")&&c.items.push(i)}},s=function(b){var d,e,f,g,h;for(b=a(b),f=b.attr("label"),f&&(g=q(b)||{},g[i]=f,g[j]=f,c.optgroups.push(g)),h=a("option",b),d=0,e=h.length;e>d;d++)r(h[d],f)};for(c.maxItems=b.attr("multiple")?null:1,n=b.children(),k=0,l=n.length;l>k;k++)m=n[k].tagName.toLowerCase(),"optgroup"===m?s(n[k]):"option"===m&&r(n[k])};return this.each(function(){if(!this.selectize){var e,f=a(this),g=this.tagName.toLowerCase(),h=f.attr("placeholder")||f.attr("data-placeholder");h||d.allowEmptyOption||(h=f.children('option[value=""]').text());var i={placeholder:h,options:[],optgroups:[],items:[]};"select"===g?l(f,i):k(f,i),e=new L(f,a.extend(!0,{},c,i,b))}})},a.fn.selectize.defaults=L.defaults,a.fn.selectize.support={validity:x},L.define("drag_drop",function(){if(!a.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var b=this;b.lock=function(){var a=b.lock;return function(){var c=b.$control.data("sortable");return c&&c.disable(),a.apply(b,arguments)}}(),b.unlock=function(){var a=b.unlock;return function(){var c=b.$control.data("sortable");return c&&c.enable(),a.apply(b,arguments)}}(),b.setup=function(){var c=b.setup;return function(){c.apply(this,arguments);var d=b.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:b.isLocked,start:function(a,b){b.placeholder.css("width",b.helper.css("width")),d.css({overflow:"visible"})},stop:function(){d.css({overflow:"hidden"});var c=b.$activeItems?b.$activeItems.slice():null,e=[];d.children("[data-value]").each(function(){e.push(a(this).attr("data-value"))}),b.setValue(e),b.setActiveItem(c)}})}}()}}),L.define("dropdown_header",function(b){var c=this;b=a.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(a){return'<div class="'+a.headerClass+'"><div class="'+a.titleRowClass+'"><span class="'+a.labelClass+'">'+a.title+'</span><a href="javascript:void(0)" class="'+a.closeClass+'">&times;</a></div></div>'}},b),c.setup=function(){var d=c.setup;return function(){d.apply(c,arguments),c.$dropdown_header=a(b.html(b)),c.$dropdown.prepend(c.$dropdown_header)}}()}),L.define("optgroup_columns",function(b){var c=this;b=a.extend({equalizeWidth:!0,equalizeHeight:!0},b),this.getAdjacentOption=function(b,c){var d=b.closest("[data-group]").find("[data-selectable]"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},this.onKeyDown=function(){var a=c.onKeyDown;return function(b){var d,e,f,g;return!this.isOpen||b.keyCode!==j&&b.keyCode!==m?a.apply(this,arguments):(c.ignoreHover=!0,g=this.$activeOption.closest("[data-group]"),d=g.find("[data-selectable]").index(this.$activeOption),g=b.keyCode===j?g.prev("[data-group]"):g.next("[data-group]"),f=g.find("[data-selectable]"),e=f.eq(Math.min(f.length-1,d)),void(e.length&&this.setActiveOption(e)))}}();var d=function(){var a,b=d.width,c=document;return"undefined"==typeof b&&(a=c.createElement("div"),a.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',a=a.firstChild,c.body.appendChild(a),b=d.width=a.offsetWidth-a.clientWidth,c.body.removeChild(a)),b},e=function(){var e,f,g,h,i,j,k;if(k=a("[data-group]",c.$dropdown_content),f=k.length,f&&c.$dropdown_content.width()){if(b.equalizeHeight){for(g=0,e=0;f>e;e++)g=Math.max(g,k.eq(e).height());k.css({height:g})}b.equalizeWidth&&(j=c.$dropdown_content.innerWidth()-d(),h=Math.round(j/f),k.css({width:h}),f>1&&(i=j-h*(f-1),k.eq(f-1).css({width:i})))}};(b.equalizeHeight||b.equalizeWidth)&&(C.after(this,"positionDropdown",e),C.after(this,"refreshOptions",e))}),L.define("remove_button",function(b){if("single"!==this.settings.mode){b=a.extend({label:"&times;",title:"Remove",className:"remove",append:!0},b);var c=this,d='<a href="javascript:void(0)" class="'+b.className+'" tabindex="-1" title="'+A(b.title)+'">'+b.label+"</a>",e=function(a,b){var c=a.search(/(<\/[^>]+>\s*)$/);return a.substring(0,c)+b+a.substring(c)};this.setup=function(){var f=c.setup;return function(){if(b.append){var g=c.settings.render.item;c.settings.render.item=function(){return e(g.apply(this,arguments),d)}}f.apply(this,arguments),this.$control.on("click","."+b.className,function(b){if(b.preventDefault(),!c.isLocked){var d=a(b.currentTarget).parent();c.setActiveItem(d),c.deleteSelection()&&c.setCaret(c.items.length)}})}}()}}),L.define("restore_on_backspace",function(a){var b=this;a.text=a.text||function(a){return a[this.settings.labelField]},this.onKeyDown=function(){var c=b.onKeyDown;return function(b){var d,e;return b.keyCode===p&&""===this.$control_input.val()&&!this.$activeItems.length&&(d=this.caretPos-1,d>=0&&d<this.items.length)?(e=this.options[this.items[d]],this.deleteSelection(b)&&(this.setTextboxValue(a.text.apply(this,[e])),this.refreshOptions(!0)),void b.preventDefault()):c.apply(this,arguments)}}()}),L}),function(a,b){a.fn.wp_editor=function(b){if(a(this).is("textarea")||console.warn("Element must be a textarea"),("undefined"==typeof tinyMCEPreInit||"undefined"==typeof QTags||"undefined"==typeof ap_vars)&&console.warn("js_wp_editor( $settings ); must be loaded"),!a(this).is("textarea")||"undefined"==typeof tinyMCEPreInit||"undefined"==typeof QTags||"undefined"==typeof ap_vars)return this;var c={mode:"tmce",mceInit:{theme:"modern",skin:"lightgray",language:"en",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignleft"],deep:!1,remove:"none"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["aligncenter"],deep:!1,remove:"none"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignright"],deep:!1,remove:"none"}],strikethrough:{inline:"del",deep:!0,split:!0}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,
entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,paste_webkit_styles:"font-weight font-style color",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",wpeditimage_disable_captions:!1,wpeditimage_html5_captions:!1,plugins:"charmap,hr,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview,image",content_css:ap_vars.includes_url+"css/dashicons.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/mediaelementplayer.min.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/wp-mediaelement.css?ver=3.9,"+ap_vars.includes_url+"js/tinymce/skins/wordpress/wp-content.css?ver=3.9",selector:"#apid",resize:"vertical",menubar:!1,wpautop:!0,indent:!1,toolbar1:"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,fullscreen,wp_adv",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:":prev,:next",body_class:"apid"}},d=new RegExp("apid","g");tinyMCEPreInit.mceInit.apid&&(c.mceInit=tinyMCEPreInit.mceInit.apid);var b=a.extend(!0,c,b);return"undefined"==typeof switchEditors.evswitchto&&(switchEditors.evswitchto=function(a){var b=a.id,c=b.length,d=b.substr(0,c-5),e=b.substr(c-4);return this.go(d,e),!1}),this.each(function(){if(a(this).is("textarea")){var c=a(this).attr("id");a.each(b.mceInit,function(e,f){"string"==a.type(f)&&(b.mceInit[e]=f.replace(d,c))}),b.mode="tmce"==b.mode?"tmce":"html";var e=a.extend({},b.mceInit,{selector:"#"+c});tinyMCEPreInit.mceInit[c]=e,a(this).addClass("wp-editor-area").show();var f=this;if(a(this).closest(".wp-editor-wrap").length){var g=a(this).closest(".wp-editor-wrap").parent();a(this).closest(".wp-editor-wrap").before(a(this).clone()),a(this).closest(".wp-editor-wrap").remove(),f=g.find('textarea[id="'+c+'"]')}var h=a('<div id="wp-'+c+'-wrap" class="wp-core-ui wp-editor-wrap '+b.mode+'-active" />'),i=a('<div id="wp-'+c+'-editor-tools" class="wp-editor-tools hide-if-no-js" />'),j=a('<div class="wp-editor-tabs" />'),k=a('<a id="'+c+'-html" class="ev-switch-editor switch-html" onclick="switchEditors.evswitchto(this);">'+ev_framework.editor.text+"</a>"),l=a('<a id="'+c+'-tmce" class="ev-switch-editor switch-tmce" onclick="switchEditors.evswitchto(this);">'+ev_framework.editor.visual+"</a>"),m=a('<div id="wp-'+c+'-media-buttons" class="wp-media-buttons" />'),n=a('<a href="#" id="insert-media-button" class="button insert-media add_media" data-editor="'+c+'" title="'+ev_framework.editor.add_media+'"><span class="wp-media-buttons-icon"></span> '+ev_framework.editor.add_media+"</a>"),o=a('<div id="wp-'+c+'-editor-container" class="wp-editor-container" />'),p=!1;ap_vars.upload_files&&(n.appendTo(m),m.appendTo(i)),l.appendTo(j),k.appendTo(j),j.appendTo(i),i.appendTo(h),o.appendTo(h),o.append(a(f).clone().addClass("wp-editor-area")),0!=p&&a.each(p,function(){a('link[href="'+this+'"]').length||a(f).before('<link rel="stylesheet" type="text/css" href="'+this+'">')}),a(f).before('<link rel="stylesheet" id="editor-buttons-css" href="'+ap_vars.includes_url+'css/editor.css" type="text/css" media="all">'),a(f).before(h),a(f).remove(),new QTags(c),QTags._buttonsInit(),switchEditors.go(c,b.mode),a(h).on("click",".insert-media",function(b){var c=a(b.currentTarget),d=c.data("editor"),e={frame:"post",state:"insert",title:wp.media.view.l10n.addMedia,multiple:!0};b.preventDefault(),c.blur(),c.hasClass("gallery")&&(e.state="gallery",e.title=wp.media.view.l10n.createGalleryTitle),wp.media.editor.open(d,e)})}else console.warn("Element must be a textarea")})}}(jQuery,window),function(a){var b={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},c={duration:"fast",direction:"both",easing:"linear",offset:0},d=/^(?:html)$/i,e=function(b,c){c=c||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(b,null):b.currentStyle);var d=document.defaultView&&document.defaultView.getComputedStyle?!0:!1,e={top:parseFloat(d?c.borderTopWidth:a.css(b,"borderTopWidth"))||0,left:parseFloat(d?c.borderLeftWidth:a.css(b,"borderLeftWidth"))||0,bottom:parseFloat(d?c.borderBottomWidth:a.css(b,"borderBottomWidth"))||0,right:parseFloat(d?c.borderRightWidth:a.css(b,"borderRightWidth"))||0};return{top:e.top,left:e.left,bottom:e.bottom,right:e.right,vertical:e.top+e.bottom,horizontal:e.left+e.right}},f=function(b){var c=a(window),f=d.test(b[0].nodeName);return{border:f?{top:0,left:0,bottom:0,right:0}:e(b[0]),scroll:{top:(f?c:b).scrollTop(),left:(f?c:b).scrollLeft()},scrollbar:{right:f?0:b.innerWidth()-b[0].clientWidth,bottom:f?0:b.innerHeight()-b[0].clientHeight},rect:function(){var a=b[0].getBoundingClientRect();return{top:f?0:a.top,left:f?0:a.left,bottom:f?b[0].clientHeight:a.bottom,right:f?b[0].clientWidth:a.right}}()}};a.fn.extend({scrollintoview:function(e){e=a.extend({},c,e),e.direction=b["string"==typeof e.direction&&e.direction.toLowerCase()]||b.both;var g="";e.direction.x===!0&&(g="horizontal"),e.direction.y===!0&&(g=g?"both":"vertical");var h=this.eq(0),i=h.closest(":scrollable("+g+")");if(i.length>0){i=i.eq(0);var j={e:f(h),s:f(i)},k={top:j.e.rect.top-(j.s.rect.top+j.s.border.top),bottom:j.s.rect.bottom-j.s.border.bottom-j.s.scrollbar.bottom-j.e.rect.bottom,left:j.e.rect.left-(j.s.rect.left+j.s.border.left),right:j.s.rect.right-j.s.border.right-j.s.scrollbar.right-j.e.rect.right},l={};e.direction.y===!0&&(k.top<0?l.scrollTop=j.s.scroll.top+k.top:k.top>0&&k.bottom<0&&(l.scrollTop=j.s.scroll.top+Math.min(k.top,-k.bottom)),l.scrollTop+=parseInt(e.offset,10)),e.direction.x===!0&&(k.left<0?l.scrollLeft=j.s.scroll.left+k.left:k.left>0&&k.right<0&&(l.scrollLeft=j.s.scroll.left+Math.min(k.left,-k.right)),l.scrollLeft+=parseInt(e.offset,10)),a.isEmptyObject(l)?a.isFunction(e.complete)&&e.complete.call(i[0]):(d.test(i[0].nodeName)&&(i=a("html,body")),i.animate(l,e.duration,e.easing).eq(0).queue(function(b){a.isFunction(e.complete)&&e.complete.call(i[0]),b()}))}return this}});var g={auto:!0,scroll:!0,visible:!1,hidden:!1};a.extend(a.expr[":"],{scrollable:function(a,c,e,f){var h=b["string"==typeof e[3]&&e[3].toLowerCase()]||b.both,i=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null):a.currentStyle,j={x:g[i.overflowX.toLowerCase()]||!1,y:g[i.overflowY.toLowerCase()]||!1,isRoot:d.test(a.nodeName)};if(!j.x&&!j.y&&!j.isRoot)return!1;var k={height:{scroll:a.scrollHeight,client:a.clientHeight},width:{scroll:a.scrollWidth,client:a.clientWidth},scrollableX:function(){return(j.x||j.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(j.y||j.isRoot)&&this.height.scroll>this.height.client}};return h.y&&k.scrollableY()||h.x&&k.scrollableX()}})}(jQuery),function(a){a.evf.history={},a.evf.history.push=function(a){history&&history.pushState&&history.pushState(null,null,a)},a.evf.history.pushQueryString=function(b,c){b=a(b);var d="",e=window.location.toString();if(b.attr("href")&&0===b.attr("href").indexOf("#")?d=b.attr("href"):b.attr("data-target")&&0===b.attr("data-target").indexOf("#")&&(d=b.attr("data-target")),d=d.replace("#",""),""!==d){if(""===window.location.search)e+="?"+c+"="+d;else{var f=window.location.search.substring(1),g=a.deparam(f);g[c]=d,e=e.replace(f,a.param(g))}a.evf.history.push(e)}},a.evf.history.pushHash=function(b){b=a(b);var c="";b.attr("href")&&0===b.attr("href").indexOf("#")?c=b.attr("href"):b.attr("data-target")&&0===b.attr("data-target").indexOf("#")&&(c=b.attr("data-target")),""!==c&&a.evf.history.push(c)}}(jQuery),function(a){function b(b,c){var d=b.outerHeight(),e=b.outerWidth(),f=c.outerHeight()+g/2,h=c.outerWidth(),i={},j=b.offset().top,k=j-a(window).scrollTop();a("body").is(".admin-bar")&&(k-=a("#wpadminbar").outerHeight()),i.left=b.offset().left-h/2+e/2,c.removeClass("ev-tooltip-expand-top ev-tooltip-expand-bottom ev-tooltip-vertical"),k>=f?(c.addClass("ev-tooltip-expand-top"),i.top=j-f):(c.addClass("ev-tooltip-expand-bottom"),i.top=j+d+g/2),c.addClass("ev-tooltip-vertical").css(i)}var c="ev-tooltip-container",d="."+c,e=".ev-tooltip",f="title",g=16;window.ev_tooltip_destroy=function(b){var c=a("body").get(0).style,d="transition"in c||"WebkitTransition"in c||"MozTransition"in c||"msTransition"in c||"OTransition"in c;if(d){var e="transitionend.ev webkitTransitionEnd.ev oTransitionEnd.ev MSTransitionEnd.ev";a(this).on(e,function(a){b.remove()})}else b.remove();b.removeClass("ev-tooltip-active")},window.ev_seek_and_destroy_tooltips=function(){a("."+c).remove()},window.ev_create_tooltip=function(d){var e=a(d),g=e.attr("data-"+f)||e.attr(f);if("undefined"==typeof g||""===g)return!1;ev_seek_and_destroy_tooltips();var h=a('<div class="'+c+'"></div>').appendTo("body");return e.data("ev-tooltip",h),h.html(g).css({top:0,left:0}).addClass("ev-tooltip-active").show(),a(window).on("resize scroll",function(){b(e,h)}),b(e,h),h},a.evf.delegate(e,"mouseover","tooltip",function(){ev_create_tooltip(a(this))}),a.evf.delegate(e,"mouseout click","tooltip",function(){var b=a(this).data("ev-tooltip");b&&window.ev_tooltip_destroy(b)}),a.evf.delegate(d,"click","tooltip",function(){window.ev_tooltip_destroy(a(this))})}(jQuery),function(a){window.Ev_MediaSelector=function(b){window.ev_ms_obj=this,window.ev_ms_obj.options=a.extend({},{title:void 0,multiple:!1,type:"",button:void 0,close:function(){},select:function(a){}},b),window.ev_ms_obj.frame=null,window.ev_ms_obj.open=function(a){var b=wp.media.controller.Library.extend({defaults:_.defaults({id:"ev-media-selector",title:window.ev_ms_obj.options.title,allowLocalEdits:!1,displaySettings:!1,displayUserSettings:!1,multiple:window.ev_ms_obj.options.multiple,library:wp.media.query({type:window.ev_ms_obj.options.type})},wp.media.controller.Library.prototype.defaults)});window.ev_ms_obj.frame=wp.media({title:window.ev_ms_obj.options.title,button:{text:window.ev_ms_obj.options.button},state:"ev-media-selector",states:[new b]}),window.ev_ms_obj.frame.on("open",function(){var b=window.ev_ms_obj.frame.state("ev-media-selector").get("selection");b.reset(),_.each(a,function(a){var c=wp.media.attachment(a);c.fetch(),b.add(c?[c]:[])})}),window.ev_ms_obj.frame.on("select",function(){var a=window.ev_ms_obj.frame.state("ev-media-selector").get("selection"),b=window.ev_ms_obj.options.multiple?a.toJSON():a.first().toJSON();window.ev_ms_obj.options.select(b)}),window.ev_ms_obj.frame.on("close",function(){window.ev_ms_obj.options.close()}),window.ev_ms_obj.frame.open()}}}(jQuery),function(a){function b(b){b=a(b).get(0);var c=b.getBoundingClientRect(),d=c.top>=0&&c.left>=0&&c.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&c.right<=(window.innerWidth||document.documentElement.clientWidth);d||a(b).scrollintoview({duration:400,easing:"easeInOutCubic",direction:"vertical",offset:40})}function c(a,b,c,d){return a.substr(0,b)+c+a.substr(b+d)}a.evf.ui.add(".ev-container-repeatable-inner-wrapper",function(){var b=null,d=function(c){if(null!==b)return!1;var d=0;return d=a(c).parents(".ev-bundle-fields-wrapper").length?a(c).parents(".ev-bundle-fields-wrapper").first():a(c).parents(".ev-field-inner").first(),b=d.outerHeight(),a("#wpbody").css("padding-bottom",b+10),!1},e=function(){b=null,a("#wpbody").css("padding-bottom","")};a(document).off("mousedown.ev_sortable").off("mouseup.ev_sortable"),a(document).on("mousedown.ev_sortable",".ev-sortable-handle",function(){d(a(this))}),a(document).on("mouseup.ev_sortable",".ev-sortable-handle",function(){e()}),a(this).sortable({handle:".ev-sortable-handle",items:"> .ev-field-inner, .ev-bundle-fields-wrapper",tolerance:"pointer",distance:10,start:function(c,d){var f={height:b};a(".ui-sortable-placeholder").css(f),e()},sort:function(){console.log(a(".ui-sortable-placeholder").outerHeight())},stop:function(b,d){var e=a(d.item).parents(".ev-sortable").first(),f=a("> .ev-field-inner, .ev-bundle-fields-wrapper",e),g=a(d.item).parents(".ev-repeatable").length;f.each(function(b,d){a("[name]",d).each(function(){var d=a(this).attr("name"),e=new RegExp(/\[\d+\]/g),f=d.match(e),h=0;if(f&&f.length){for(var i=0;i<f.length;i++)f[i]=i===g-1?"["+b+"]":f[i];for(var j=null;null!==(j=e.exec(d));)d=c(d,j.index,f[h],f[h].length),h++;a(this).attr("name",d)}})})}})}),a.evf.delegate(".ev-repeatable-remove","click","repeatable",function(){var b=a(this).parents(".ev-field").first(),c=a(".ev-container, .ev-bundle-fields-wrapper",b).first(),d=a(this).parents(".ev-field-inner, .ev-bundle-fields-wrapper").first();return d.remove(),a(".ev-field-inner",c).length||b.addClass("ev-no-fields"),!1}),a.evf.delegate(".ev-repeat-remove-all","click","repeatable",function(){var b=a(this).parents(".ev-field").first(),c=a(".ev-container",b).first(),d=a(".ev-field-inner, .ev-bundle-fields-wrapper",c);return d.remove(),b.addClass("ev-no-fields"),!1}),a.evf.delegate(".ev-field.ev-repeatable .ev-repeat","click","repeatable",function(){var c=a(this),d=c.parents(".ev-field.ev-repeatable").first(),e=c.parents(".ev-field-inner, .ev-bundle-fields-wrapper").first(),f=c.parents(".ev-container-repeatable-inner-wrapper").first(),g=a(".ev-empty-state",d),h=function(){var a=parseInt(g.attr("data-count"),10);return a+=1,g.attr("data-count",a),a},i=function(b,c){a(".ev-field",c).each(function(){var b=(a(".ev-repeatable-controls",this).first(),parseInt(g.attr("data-count"),10));a("[name]",n).each(function(){a(this).attr("name",this.name.replaceLast("[]","["+b+"]"))})})},j=g.attr("data-key"),k=a("script[type='text/template'][data-template='"+j+"']"),l=c.attr("data-mode"),m=function(c,g){var j=h();g?"append"===g?c.insertAfter(e):"prepend"===g&&c.insertBefore(e):c.appendTo(f),i(j,c),d.removeClass("ev-no-fields"),setTimeout(function(){a.evf.ui.build(),b(c)},1)};if(c.attr("data-action"))window[c.attr("data-action")](k,m);else{var n=a(a.evf.template(k,{}));m(n,l)}return!1})}(jQuery),function(a){a.evf.delegate(".ev-close-persistent-message","click","messages",function(){return a(this).parents(".ev-persistent-message").first().remove(),!1}),window.ev_save_options_tab_button=function(a,b){return!1},window.ev_save_options_tab=function(b){"undefined"!=typeof tinymce&&tinymce.triggerSave();var c=a("form",b).first(),d=a(".ev-btn-type-save[data-callback]",c).first(),e=c.serialize().replace(/%5B%5D/g,"[]"),f=a("#ev").val();return e+="&action="+d.attr("data-callback"),e+="&nonce="+f,ev_idle_button(d),a.post(c.attr("action"),e,function(a){ev_unidle_button(d,a)},"json"),!1},a.evf.on(".ev-admin-page .ev-tab > form","submit","save-options-tab",function(){var b=a(this).parents(".ev-tab").first();return window.ev_save_options_tab(b),!1}),a.evf.on(".ev-tab .ev-field-ev_debug_button .ev-btn","click","asd",function(){var b=a(this),c={message:"",type:"success"};return ev_idle_button(b),setTimeout(function(){ev_unidle_button(b,c)},1e3),!1})}(jQuery),function(a){a.evf.ui.add(".ev-image-upload[data-multiple][data-sortable] .ev-image-placeholder-container",function(){a(this).sortable({items:"> .ev-image-placeholder",update:function(b,c){var d=a(b.target).parents(".ev-image-upload").first(),e=a("input[data-id]",d),f=[];a(".ev-image-placeholder",d).each(function(){f.push(a("img[data-id]",a(this)).attr("data-id"))}),e.val(f.join(","))}})}),a.evf.delegate(".ev-image-upload .ev-upload-remove","click","image_upload",function(){var b=a(this).parents(".ev-image-upload").first(),c=a(".ev-image-placeholder-container",b),d=void 0!==b.attr("data-multiple"),e=a("input[data-id]",b);if(d){a(this).parents(".ev-image-placeholder").first().remove();var f=a(".ev-image-placeholder",b);if(f.length){var g=[];f.each(function(){g.push(a("img[data-id]",a(this)).attr("data-id"))}),e.val(g.join(","))}else{b.removeClass("ev-image-uploaded"),e.val("");var h=a("script[type='text/template'][data-template='ev-image-placeholder']");c.append(a.evf.template(h,{url:"",id:""}))}}else e.val(""),a("img",b).attr("src",""),b.removeClass("ev-image-uploaded");return!1}),a.evf.delegate(".ev-image-upload .ev-remove-all-action","click","image_upload",function(){var b=a(this).parents(".ev-image-upload").first(),c=a(".ev-image-placeholder",b),d=a("input[data-id]",b);return c.remove(),b.removeClass("ev-image-uploaded"),d.val(""),!1}),a.evf.delegate(".ev-image-upload .ev-edit-action, .ev-image-upload .ev-upload-action","click","image_upload",function(){var b=a(this).parents(".ev-image-upload").first(),c=a(".ev-image-placeholder-container",b),d=b.attr("data-thumb-size"),e=void 0!==b.attr("data-multiple"),f=a("input[data-id]",b).val(),g=new window.Ev_MediaSelector({type:"image",multiple:e,select:function(f){var g=a("script[type='text/template'][data-template='ev-image-placeholder']"),h="";if(c.html(""),e)h=_.pluck(f,"id").join(","),a.each(f,function(){var b=this.sizes.full.url;this.sizes[d]&&(b=this.sizes[d].url),c.append(a.evf.template(g,{url:b,id:this.id}))});else{h=f.id;var i=f.sizes.full.url;f.sizes[d]&&(i=f.sizes[d].url),c.append(a.evf.template(g,{url:i,id:h}))}b.addClass("ev-image-uploaded"),a("input[data-id]",b).val(h)}});return g.open(f.split(",")),!1})}(jQuery),function(a){a.evf.ui.add(".ev-attachment-upload-container[data-multiple][data-sortable]",function(){a(this).sortable({items:"> .ev-attachment-placeholder",update:function(b,c){var d=a(b.target),e=a("input[data-id]",d),f=[];a(".ev-attachment-placeholder",d).each(function(){f.push(a("[data-id]",a(this)).attr("data-id"))}),e.val(f.join(","))}})}),a.evf.delegate(".ev-attachment-placeholder .ev-upload-remove","click","attachment_upload",function(){var b=a(this).parents(".ev-attachment-placeholder").first(),c=a(this).parents(".ev-attachment-upload-container").first(),d=void 0!==c.attr("data-multiple"),e=a("input[data-id]",c);if(d){b.remove();var f=a(".ev-attachment-placeholder",c);if(f.length){var g=[];f.each(function(){g.push(a("[data-id]",a(this)).attr("data-id"))}),e.val(g.join(","))}else c.removeClass("ev-attachment-uploaded"),e.val("")}else e.val(""),a("img",c).attr("src",""),c.removeClass("ev-attachment-uploaded");return!1}),a.evf.delegate(".ev-attachment-upload-container .ev-remove-all-action","click","attachment_upload",function(){var b=a(this).parents(".ev-attachment-upload-container").first(),c=a(".ev-attachment-placeholder",b),d=a("input[data-id]",b);return c.remove(),b.removeClass("ev-attachment-uploaded"),d.val(""),!1}),a.evf.delegate(".ev-attachment-upload-container .ev-edit-action, .ev-attachment-upload-container .ev-upload-action","click","attachment_upload",function(){var b=a(this).parents(".ev-attachment-upload-container").first(),c=b.attr("data-type"),d=(b.attr("data-thumb-size"),void 0!==b.attr("data-multiple")),e=a("input[data-id]",b).val(),f=new window.Ev_MediaSelector({type:c,multiple:d,select:function(c){var e="",f=a(".ev-attachment-upload-action",b),g=a("script[type='text/template'][data-template='ev-attachment-placeholder']");if(a(".ev-attachment-placeholder",b).remove(),d)e=_.pluck(c,"id").join(","),a.each(c,function(){var b=this.url.split(/[\\/]/).pop()+" ("+this.filesizeHumanReadable+")",c=this.type;this.subtype&&(c+="-"+this.subtype),f.before(a.evf.template(g,{type:c,id:this.id,title:this.title,extension:b,url:this.url}))});else{e=c.id;var h=c.url.split(/[\\/]/).pop()+" ("+c.filesizeHumanReadable+")",i=c.type;c.subtype&&(i+="-"+c.subtype),f.before(a.evf.template(g,{type:i,id:e,title:c.title,extension:h,url:c.url}))}b.addClass("ev-attachment-uploaded"),a("input[data-id]",b).val(e)}});return console.log(e.split(",")),f.open(e.split(",")),!1})}(jQuery),function(a){a.evf.ui.add("select.ev-multiple-select-input-ajax",function(){a(this).each(function(){var b=a(this).attr("data-action"),c=a(this).attr("data-value-field"),d=a(this).attr("data-label-field"),e=a(this).attr("data-search-field"),f=a(this).attr("data-nonce"),g=a(this).attr("data-max")?parseInt(a(this).attr("data-max"),10):1e3;a(this).selectize({plugins:["remove_button","drag_drop"],valueField:c,labelField:d,searchField:[e],dropdownParent:"body",create:!1,maxItems:g,load:function(c,d){return c.length?void a.ajax({url:ajaxurl,type:"POST",data:{action:b,search:c,nonce:f},error:function(){d()},success:function(b){d(a.parseJSON(b))}}):d()},render:{item:function(a,b){var c="<div>";return a.spec&&""!==a.spec&&(c+="<span>"+b(a.spec)+"</span>"),c+=b(a.text),c+="</div>"},option:function(a,b){var c="<div>";return a.spec&&""!==a.spec&&(c+="<span>"+b(a.spec)+"</span>"),c+=b(a.text),c+="</div>"}}})})}),a.evf.key("backspace",function(){return a(".ev-multiple-select-input .selectize-input.has-items.focus").length?!1:void 0},{stop:!1,namespace:"selectize"}),a.evf.ui.add("input.ev-multiple-select-input",function(){a(this).each(function(){var b=a.parseJSON(a(this).attr("data-options")),c=a(this).attr("data-max")?parseInt(a(this).attr("data-max"),10):b.length;a(this).selectize({plugins:["remove_button","drag_drop"],options:b,valueField:"val",labelField:"label",searchField:["label"],dropdownParent:"body",maxItems:c,create:!1,render:{item:function(a,b){var c="<div>";return a.spec&&""!==a.spec&&(c+="<span>"+b(a.spec)+"</span>"),c+=b(a.label),c+="</div>"},option:function(a,b){var c="<div>";return a.spec&&""!==a.spec&&(c+="<span>"+b(a.spec)+"</span>"),c+=b(a.label),c+="</div>"}}})})})}(jQuery),function(a){a.evf.delegate(".ev-color-preset","click","color",function(){var b=a(this).parents(".ev-color-presets-manager-wrapper").first(),c=a("[data-hex-value-input]",b);return a(this).hasClass("ev-selected")?(a(this).removeClass("ev-selected"),c.val("")):(a(".ev-selected",b).removeClass("ev-selected"),a(this).addClass("ev-selected"),c.val(a(this).attr("data-hex"))),!1}),a.evf.delegate("[data-color-delete-preset]","click","color",function(){var b=a(this),c=a(this).parents(".ev-color-preset").first(),d=c.attr("data-id"),e=a(this).parents(".ev-color-user-presets").first(),f=a(this).parents(".ev-color-presets-wrapper").first();return d&&(c.remove(),window.ev_seek_and_destroy_tooltips(),a(".ev-color-preset",f).length||a("body").removeClass("ev-has-color-presets"),a(".ev-color-preset",e).length?e.addClass("ev-color-has-user-presets"):e.removeClass("ev-color-has-user-presets"),ev_framework.color.presets=_.without(ev_framework.color.presets,_.findWhere(ev_framework.color.presets,{user:!0,id:d})),a.post(ajaxurl,{action:"ev_color_delete_preset",nonce:b.attr("data-nonce"),id:d},function(a){})),!1}),a.evf.delegate("[data-color-save-preset]","click","color",function(){var b=a(this),c=b.parents(".ev-color-wrapper").first(),d=a(".ev-color-input",c),e=d.val();if(e){var f=prompt(ev_framework.color.new_preset_name);b.addClass("ev-saving"),a.post(ajaxurl,{action:"ev_color_save_preset",nonce:b.attr("data-nonce"),hex:e,name:f,id:ev_framework.color.presets.length+1},function(c){ev_framework.color.presets.user.push({user:!0,hex:e,label:f}),a("body").addClass("ev-has-color-presets"),b.removeClass("ev-saving")})}return!1}),a.evf.delegate("[data-color-presets]","click","color",function(){var b="ev-color-presets",c=a(this),d=c.parents(".ev-color-wrapper").first(),e=a(".ev-color-input",d),f={hex:e.val()},g=new a.evf.modal(b,f,{"class":"ev-modal-container-simple",save:function(a,b,c){a.hex&&e.val(a.hex).trigger("keyup")}});return g.open(function(b,d,e){var f={action:"ev_color_presets_modal_load",nonce:c.attr("data-nonce"),data:e},g=".ev-modal-container[data-key='"+d+"']";a(g+" .ev-modal-wrapper").addClass("ev-loading"),a.post(ajaxurl,f,function(c){c=a(c),a(g+" .ev-modal-wrapper").removeClass("ev-loading"),b.html(c),setTimeout(function(){a.evf.ui.build()},1)})}),!1}),a.evf.ui.add("input.ev-color-input",function(){a(this).each(function(){var b=a(this).parents(".ev-color-inner-wrapper").first(),c=a(this).attr("data-opacity"),d={control:"wheel"};void 0!==c&&(d.opacity=!0,d.change=function(c,d){a("[data-input-color-opacity]",b).val(d)}),a(this).minicolors(d)})})}(jQuery),function(a){window.evf_ui_rich_textareas=0,a.evf.ui.add("textarea.ev-rich",function(){a(this).each(function(){window.evf_ui_rich_textareas++;var b=a(this).attr("id");b=b.replace(/\[/g,"_"),b=b.replace(/\]/g,"_"),a(this).attr("id",b+"-"+window.evf_ui_rich_textareas),a(this).wp_editor()})})}(jQuery),function(a){a.evf.delegate(".ev-selected-icon-wrapper","click","icon",function(){var b="ev-icon",c=a(this),d=c.parents(".ev-field").first(),e=a(".ev-selected-icon-wrapper",d),f={prefix:a("[data-prefix]",d).val(),set:a("[data-set]",d).val(),icon:a("[data-icon]",d).val(),color:a("[data-color]",d).val(),size:a("[data-size]",d).val()},g=new a.evf.modal(b,f,{"class":"ev-modal-container-simple",save:function(b,c,f){a("[data-prefix]",d).val(b.prefix),a("[data-set]",d).val(b.set),a("[data-icon]",d).val(b.icon),a("[data-color]",d).val(b.color.color),a("[data-size]",d).val(b.size),a("[data-preview]",d).attr("class","").css("color",""),a("[data-preview]",d).attr("class","ev-icon ev-component "+b.prefix+" "+b.icon).css("color",b.color.color),b.icon?e.removeClass("ev-empty"):e.addClass("ev-empty")}});return g.open(function(b,d,e){var f={action:"ev_icon_modal_load",data:e,nonce:c.attr("data-nonce")},g=".ev-modal-container[data-key='"+d+"']";a(g+" .ev-modal-wrapper").addClass("ev-loading"),a.post(ajaxurl,f,function(c){c=a(c),a(g+" .ev-modal-wrapper").removeClass("ev-loading"),b.html(c),a("[data-icon-search]",b).focus(),setTimeout(function(){a.evf.ui.build()},1)})}),!1}),a.evf.delegate(".ev-icon-remove","click","icon",function(){var b=a(this).parents(".ev-field").first(),c=a(".ev-selected-icon-wrapper",b);return c.addClass("ev-empty"),a("[data-prefix]",b).val(""),a("[data-set]",b).val(""),a("[data-icon]",b).val(""),a("[data-color]",b).val(""),a("[data-size]",b).val(""),a("[data-preview]",b).attr("class","ev-icon ev-component").css("color",""),!1}),a.evf.delegate("input[data-icon-search]","keydown","icon",function(a){return 13==a.which?!1:void 0}),a.evf.delegate("input[data-icon-search]","keyup","icon",function(){var b=a(this).parents(".ev-icon-sets-external-wrapper").first(),c=a(this).val(),d=a(".ev-icon",b);if(""!=c?a(".ev-icon-sets",b).addClass("ev-searching"):a(".ev-icon-sets",b).removeClass("ev-searching"),d.removeClass("ev-found"),d=d.filter('[data-icon-stripped*="'+c+'"]').addClass("ev-found"),a(".ev-icon-search-results",b).addClass("ev-search-icon-results-visible"),d.length){var e=d.length>1?2:1;a(".ev-icon-search-results",b).html(ev_icon_field[e].replace("%s",d.length))}else""!=c?a(".ev-icon-search-results",b).html(ev_icon_field[0]):a(".ev-icon-search-results",b).removeClass("ev-search-icon-results-visible")}),a.evf.delegate(".ev-icon-sets i","click","icon",function(){var b=a(this),c=a(this).parents(".ev-icon-sets-external-wrapper").first(),d=a(".ev-icon",c),e=a("[name='color[color]']",c).val(),f=a("[data-icon-size]",c).val(),g=a(".ev-selected-icon-preview",c);d.removeClass("ev-found ev-selected"),b.addClass("ev-selected"),a(".ev-icon-sets",c).removeClass("ev-searching"),a("[data-icon-prefix]",c).val(b.attr("data-prefix")),a("[data-icon-set]",c).val(b.attr("data-set")),a("[data-icon-name]",c).val(b.attr("data-icon-name")),g.removeAttr("class").attr("class","ev-selected-icon-preview ev-icon ev-component "+b.attr("data-prefix")+" "+b.attr("data-icon-name")).css({color:e,"font-size":f}),a("input[data-icon-search]",c).val(""),a(".ev-icon-search-results",c).html("").removeClass("ev-search-icon-results-visible")}),a.evf.delegate(".ev-icon-sets-controls-field-wrapper [name='color[color]']","change","icon",function(){var b=a(this).parents(".ev-icon-sets-external-wrapper").first(),c=a(".ev-selected-icon-preview",b);c.css({color:a(this).val()})}),a.evf.delegate(".ev-icon-sets-controls-field-wrapper [name='size']","input","icon",function(){var b=a(this).parents(".ev-icon-sets-external-wrapper").first(),c=a(".ev-selected-icon-preview",b);c.css({"font-size":a(this).val()})})}(jQuery),function(a){function b(b){var c=b.attr("data-type");switch(c){case"radio":return a("input[type='radio'][name]:checked",b).first();case"select":return a("select[name]",b).first();case"checkbox":return a("input[type='checkbox'][name]",b).first()}return!1}function c(c){var d=c.parents(".ev-tab-container").first();c.parents(".ev-field-bundle").length&&(d=c.parents(".ev-field-bundle").first());var e=c.attr("data-slave"),f=a("[data-controller='"+e+"']",d),g=b(f);if(g){var h=g.val(),i=c.attr("data-controller-value");-1!=i.indexOf(",")?(i=i.split(","),-1==i.indexOf(h)||f.hasClass("ev-hidden")?(c.addClass("ev-hidden"),a("[data-slave='"+c.attr("data-controller")+"']",d).addClass("ev-hidden")):(c.removeClass("ev-hidden"),a("[data-slave='"+c.attr("data-controller")+"']",d).removeClass("ev-hidden"))):i!=h||f.hasClass("ev-hidden")?(c.addClass("ev-hidden"),a("[data-slave='"+c.attr("data-controller")+"']",d).addClass("ev-hidden")):(c.removeClass("ev-hidden"),a("[data-slave='"+c.attr("data-controller")+"']",d).removeClass("ev-hidden")),c.is("[data-controller]")&&b(c).trigger("change")}}a.evf.delegate(".ev-help-popup .ev-help-handle","click","field",function(){var b={},c="ev-help-popup",d=a(".ev-help-popup-text",this).html(),e=new a.evf.modal(c,b,{"class":"ev-modal-container-simple"});return e.open(function(a,b,c){a.html(d)}),!1}),a.evf.ui.add("[data-slave]",function(){a(this).each(function(){c(a(this))})}),a.evf.delegate("[data-controller] :input","change","field",function(){var d=a(this).parents(".ev-field").first();if(a(this).is(b(d))){var e=d.parents(".ev-tab-container").first();d.parents(".ev-field-bundle").length&&(e=d.parents(".ev-field-bundle").first());var f=(a(this).val(),a(this).parents("[data-controller]").first()),g=f.attr("data-controller"),h=a("[data-slave='"+g+"']",e);h.each(function(){c(a(this))});var i=h.not(".ev-hidden").last(),j=a(this).parents(".ev-tabs").first();if(i.length&&j.length&&j.css("overflow-y")){var k=i.position().top+2*i.outerHeight();j.get(0).scrollTop=k}}})}(jQuery),function(a){function b(a){var b=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return b.test(a)}a.evf.delegate(".ev-link-ctrl-btn","click","link",function(){var b="ev-link",c=a(this),d=a(this).parents(".ev-link-ctrl").first(),e={url:a("[data-link-url]",d).val(),target:a("[data-link-target]",d).val(),rel:a("[data-link-rel]",d).val(),title:a("[data-link-title]",d).val()},f=new a.evf.modal(b,e,{"class":"ev-modal-container-simple",close:function(){a(window).off("keydown.ev_link")},save:function(b,e,f){a("[data-link-url]",d).val(b.url),a("[data-link-target]",d).val(b.target),a("[data-link-rel]",d).val(b.rel),a("[data-link-title]",d).val(b.title),c.removeClass("ev-link-on"),""!=b.url&&c.addClass("ev-link-on")}});return f.open(function(b,c,e){var f={action:"ev_link_modal_load",nonce:d.attr("data-nonce"),data:e},g=".ev-modal-container[data-key='"+c+"']";a(g+" .ev-modal-wrapper").addClass("ev-loading"),a(window).off("keydown.ev_link"),a(window).on("keydown.ev_link",function(b){return 9==b.which?(a('.ev-modal-container[data-key="ev-link"]').addClass("ev-link-modal-expanded"),a(window).off("keydown.ev_link"),!1):void 0}),a.post(ajaxurl,f,function(c){c=a(c),a(g+" .ev-modal-wrapper").removeClass("ev-loading"),b.html(c),setTimeout(function(){a.evf.ui.build()},1)})}),!1}),a.evf.delegate(".ev-link-trigger","click","link",function(){return a('.ev-modal-container[data-key="ev-link"]').addClass("ev-link-modal-expanded"),!1}),a.evf.ui.add(".ev-link-url-wrapper [name='url']",function(){var c=a(this).attr("data-nonce");a(this).selectize({plugins:[],valueField:"id",labelField:"text",searchField:["text"],dropdownParent:"body",create:!0,createOnBlur:!0,maxItems:1,load:function(d,e){return!d.length||b(d)?e():void a.ajax({url:ajaxurl,type:"POST",data:{action:"ev_link_search_entries",search:d,nonce:c},error:function(){e()},success:function(b){e(a.parseJSON(b))}})},render:{item:function(a,b){var c="<div>";return a.spec&&""!==a.spec&&(c+="<span>"+b(a.spec)+"</span>"),c+=b(a.text),c+="</div>"},option:function(a,b){var c="<div>";return a.spec&&""!==a.spec&&(c+="<span>"+b(a.spec)+"</span>"),c+=b(a.text),c+="</div>"}}})})}(jQuery),function(a){function b(b,c){if(a(b).addClass("ev-btn-complete"),
c){a(b).addClass("ev-btn-"+c.type).attr("data-title",c.message);var d=ev_create_tooltip(b)}setTimeout(function(){a(b).removeAttr("data-title"),a(b).removeClass("ev-btn-complete"),c&&(d.length&&ev_tooltip_destroy(d),a(b).removeClass("ev-btn-"+c.type))},1500)}var c="ev-btn-idle";window.ev_idle_button=function(b){a(b).addClass(c).attr("disabled","disabled").trigger("start.ev_button")},window.ev_unidle_button=function(d,e){var f=a("body").get(0).style,g="transition"in f||"WebkitTransition"in f||"MozTransition"in f||"msTransition"in f||"OTransition"in f;if(g){var h="transitionend.ev webkitTransitionEnd.ev oTransitionEnd.ev MSTransitionEnd.ev";a(d).on(h,function(c){a(d).off(h),b(d,e)})}else b(d,e);a(d).removeClass(c).removeAttr("disabled").trigger("done.ev_button")}}(jQuery);