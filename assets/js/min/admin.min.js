"use strict";if(!function(s){function o(e){return/string|number|boolean/.test(typeof e)}s.evExtendObject=function(e,i){if(o(e))return e;var n=e;return s.each(i,function(e,t){void 0===n[e]?o(i[e])?n[e]=t:n[e]={}:o(n[e])&&(n[e]=s.evExtendObject(n[e],i[e]))}),n},s.evSaveRichTextareas=function(e){"undefined"!=typeof tinymce&&s(".ev-rich",e).each(function(){tinymce.get(this.id).save()})},s.fn.serializeObject=function(){var o=this,a={},t={},r={validate:/^[a-zA-Z_][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(e,t,i){return e[t]=i,e},this.push_counter=function(e){return void 0===t[e]&&(t[e]=0),t[e]++},s.each(s(this).serializeArray(),function(){if(r.validate.test(this.name)){for(var e,t=this.name.match(r.key),i=this.value,n=this.name;void 0!==(e=t.pop());)n=n.replace(new RegExp("\\["+e+"\\]$"),""),e.match(r.push)?i=o.build([],o.push_counter(n),i):e.match(r.fixed)?i=o.build([],e,i):e.match(r.named)&&(i=o.build({},e,i));a=s.extend(!0,a,i)}}),s.each(a,function(e,t){a[e].push&&(a[e]=a[e].filter(function(e){return null!=e&&~e}))}),a}}(jQuery),function(u){"function"!=typeof u.deparam&&(u.deparam=function(e,c){var d={},p={true:!0,false:!1,null:null};return u.each(e.replace(/\+/g," ").split("&"),function(e,t){var i,n=t.split("="),o=decodeURIComponent(n[0]),a=d,r=0,s=o.split("]["),l=s.length-1,l=/\[/.test(s[0])&&/\]$/.test(s[l])?(s[l]=s[l].replace(/\]$/,""),(s=s.shift().split("[").concat(s)).length-1):0;if(2===n.length)if(i=decodeURIComponent(n[1]),c&&(i=i&&!isNaN(i)?+i:"undefined"===i?void 0:void 0!==p[i]?p[i]:i),l)for(;r<=l;r++)a=a[o=""===s[r]?a.length:s[r]]=r<l?a[o]||(s[r+1]&&isNaN(s[r+1])?{}:[]):i;else u.isArray(d[o])?d[o].push(i):void 0!==d[o]?d[o]=[d[o],i]:d[o]=i;else o&&(d[o]=c?void 0:"")}),d})}(jQuery),"function"!=typeof String.prototype.replaceLast&&(String.prototype.replaceLast=function(e,t){var i=this.lastIndexOf(e);return 0<=i?this.substring(0,i)+t+this.substring(i+e.length):this.toString()}),"undefined"==typeof jQuery)throw new Error("jQuery is required.");!function(o){o.evf={componentID:".ev-component",namespace:".evf",ui:{event:"ui-build",signature:"ev-ui",components:[],components_count:0,components_built:0,add:function(e,t){o.evf.ui.components.push({selector:e,callback:t}),o.evf.ui.components_count++},do_build:function(){o.each(o.evf.ui.components,function(){o.evf.ui.components_built++;var e=this.selector,t=this.callback,i=o(e);(i=i.filter(function(){return"1"!==o(this).attr("data-"+o.evf.ui.signature)})).length&&(i.attr("data-"+o.evf.ui.signature,"1"),t.call(i)),o.evf.ui.end_build()})},end_build:function(){o.evf.ui.components_count===o.evf.ui.components_built&&setTimeout(function(){o(".ev-tab-container").addClass("ev-tab-container-loaded")},5)},build:function(){o.evf.ui.components_built=0,o.evf.ui.do_build(),o(window).trigger(o.evf.resolveEventName(o.evf.ui.event,o.evf.namespace))}},resolveNamespace:function(e){return""!==e&&-1===e.indexOf(".")&&(e="."+e),o.evf.namespace+e},resolveEventName:function(e,t){var i="";return o.each(e.split(" "),function(){i+=" "+this+o.evf.resolveNamespace(t)}),i=i.trim()},on:function(e,t,i,n){o(e).on(o.evf.resolveEventName(t,i),n)},one:function(e,t,i,n){o(e).one(o.evf.resolveEventName(t,i),n)},delegate:function(e,t,i,n){o(document).on(o.evf.resolveEventName(t,i),e,n)},undelegate:function(e,t){o(document).off(o.evf.resolveEventName(e,t))},template:function(e,t){if("undefined"==typeof _)throw new Error("Underscore is required.");var i=e;if("string"==typeof e&&(i=o("script[type='text/template'][data-template='"+e+"']")),!i.length)throw new Error("Template '"+e+"' not found.");var n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return parseFloat(ev_framework.wp_version)<4.5?_.template(i.html(),t,n):_.template(i.html(),n)(t)}},o(document).on("ready",function(){o.evf.ui.build(),o.evf.tabs(".ev-tabs"+o.evf.componentID),o.evf.accordion(".ev-accordion"+o.evf.componentID)})}(jQuery),function(r){r.evf.key=function(i,n,o){if("function"!=typeof n)throw new Error("Callback is not a function.");o=r.extend({stop:!0,namespace:"ev",one:!1},o);var a={enter:13,left:37,up:38,right:39,down:40,esc:27,space:32,backspace:8,tab:9},e="ev";o.namespace&&(e="."+o.namespace);function t(e){if(a[i]&&e.which===a[i]){var t=n(e);if(void 0!==t)return t;if(o.stop)return!1}return!0}o.one?r(window).one("keydown."+e,t):r(window).on("keydown."+e,t)}}(jQuery),function(p){p.evf.tabs=function(c,d){function e(e,i){var t=null,n=p(i);if(1<p(d.triggersClass+"[id='"+n[0].id+"']").length&&0==n.parents(".ev-tabs").length)return p(d.triggersClass).removeClass(d.activeClass).removeAttr("aria-selected"),p(d.triggersClass+"[id='"+n[0].id+"']").not(n).trigger(d.eventTrigger+"."+d.namespace),n.addClass(d.activeClass).attr("aria-selected","true"),!1;"object"==typeof c?t=p(e):"string"==typeof c&&(t=n.parents(e).first());var o=p("> "+d.navClass,t),a=p(d.triggersClass,o),r=p("> "+d.panelsContainerClass,t),s=p("> "+d.tabsClass,r),l=0;switch(a.each(function(e,t){this===i&&(l=e)}),t.data("push")){case"hash":p.evf.history.pushHash(n);break;case"querystring":p.evf.history.pushQueryString(n,"tab")}return t.trigger(p.evf.resolveEventName("switch",d.namespace)),a.removeClass(d.activeClass).removeAttr("aria-selected"),s.removeClass(d.activeClass).attr("aria-hidden","true"),n.addClass(d.activeClass).attr("aria-selected","true"),s.eq(l).addClass(d.activeClass).removeAttr("aria-hidden"),t.trigger(p.evf.resolveEventName("switched",d.namespace)),!1}var t;d=p.extend({namespace:"tabs",navClass:".ev-tabs-nav",triggersClass:".ev-tab-trigger",panelsContainerClass:".ev-tab-container",tabsClass:".ev-tab",activeClass:"ev-active",eventTrigger:"click"},d),"object"==typeof c?p.evf.on(d.triggersClass,d.eventTrigger,d.namespace,function(){return e(c,this)}):"string"==typeof c&&p.evf.delegate(d.triggersClass,d.eventTrigger,d.namespace,function(){return e(c,this)}),""!=window.location.hash&&(t=d.triggersClass+"[href='"+window.location.hash+"']",t+=","+d.triggersClass+"[data-target='"+window.location.hash+"']",p(t).trigger(p.evf.resolveEventName(d.eventTrigger,d.namespace)))}}(jQuery),function(d){d.evf.accordion=function(l,c){function e(e,i){var t=null,n=d(i);"object"==typeof l?t=d(e):"string"==typeof l&&(t=n.parents(e).first());var o=!1!==c.mode?c.mode:t.attr("data-mode"),a=d(c.triggersClass,t),r=d(c.toggleClass,t),s=0;switch(a.each(function(e,t){this===i&&(s=e)}),t.data("push")){case"hash":d.evf.history.pushHash(n);break;case"querystring":d.evf.history.pushQueryString(n,"toggle")}return t.trigger(d.evf.resolveEventName("switch",c.namespace)),"toggle"!==o?"true"==n.attr("aria-selected")?(n.removeAttr("aria-selected"),r.eq(s).removeClass(c.activeClass).attr("aria-hidden","true")):(a.removeAttr("aria-selected"),n.attr("aria-selected","true"),r.removeClass(c.activeClass).attr("aria-hidden","true"),r.eq(s).addClass(c.activeClass).removeAttr("aria-hidden")):"true"==n.attr("aria-selected")?(n.removeAttr("aria-selected"),r.eq(s).removeClass(c.activeClass).attr("aria-hidden","true")):(n.attr("aria-selected","true"),r.eq(s).addClass(c.activeClass).removeAttr("aria-hidden")),t.trigger(d.evf.resolveEventName("switched",c.namespace)),!1}var t;c=d.extend({namespace:"accordion",accordionClass:".ev-accordion",toggleClass:".ev-toggle",triggersClass:".ev-toggle-trigger",contentClass:".ev-toggle-content",activeClass:"ev-active",eventTrigger:"click focus",mode:!1},c),"object"==typeof l?d.evf.on(c.triggersClass,c.eventTrigger,c.namespace,function(){return e(l,this)}):"string"==typeof l&&d.evf.delegate(c.triggersClass,c.eventTrigger,c.namespace,function(){return e(l,this)}),""!=window.location.hash&&(t=c.triggersClass+"[href='"+window.location.hash+"']",t+=","+c.triggersClass+"[data-target='"+window.location.hash+"']",d(t).trigger(d.evf.resolveEventName(c.eventTrigger,c.namespace)))}}(jQuery),function(l){l.evf.delegate(".ev-modal-close","click","modal",function(e){return l(this).parents(".ev-modal-container").first().data("ev-modal").close(),!1}),l.evf.key("esc",function(){var e=l(".ev-modal-container");if(e.length)return e.last().data("ev-modal").close(),!1}),l.evf.modal=function(o,a,r){r=l.extend({save:function(){},close:function(){},class:"",wait:!1,simple:!1},r);var s=this;s.config=r,this.close=function(){r.close(),l(".ev-modal-container[data-key='"+o+"']").nextAll(".ev-modal-container").remove(),l(".ev-modal-container[data-key='"+o+"']").remove(),l(".ev-modal-container").length||l("body").removeClass("ev-modal-open"),l(window).trigger("ev-modal-close")},this.save=function(e){var t=l(".ev-modal-container[data-key='"+o+"']"+" .ev-modal-footer .ev-save").attr("data-nonce");r.wait?r.save(e,this.close,t):(r.save(e,null,t),this.close())},this.open=function(e){if("function"!=typeof e)throw new Error("Content is not a function.");var t=".ev-modal-container[data-key='"+o+"']";l(t).remove();var i=r.class;r.simple&&(i+=" ev-modal-container-simple");var n='<div class="ev-modal-container '+i+'" data-key="'+o+'">';n+='<div class="ev-modal-wrapper">',n+='<a class="ev-modal-close" href="#"><i data-icon="ev-modal-close" class="ev-icon ev-component" aria-hidden="true"></i></a>',n+='<div class="ev-modal-wrapper-inner">',n+="</div>",n+="</div>",n=l(n+="</div>"),l("body").hasClass("ev-modal-open")?l(".ev-modal-container").last().after(n):(n.appendTo(l("#ev-modals-container")),l("body").addClass("ev-modal-open")),l(".ev-modal-container").last().data("ev-modal",s),e(l(t+" .ev-modal-wrapper-inner"),o,a)},this.init=function(){var e=".ev-modal-container[data-key='"+o+"']",t=e+" .ev-modal-footer .ev-save",i=e+" form",n="modal-form-"+o;l.evf.undelegate("submit",n),l.evf.undelegate("click",n),l.evf.delegate(t,"click",n,function(){return l(i).trigger("submit."+n),!1}),l.evf.delegate(i,"submit",n,function(){return l.evSaveRichTextareas(this),ev_idle_button(l(t)),s.save(l(this).serializeObject()),l.evf.undelegate("submit",n),l.evf.undelegate("click",n),!1})},this.init()}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(_){function c(e){var t=e.parent();e.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),t.before(e).remove()}function d(e){var t=e.parent(),i=t.find(".minicolors-panel"),n=e.data("minicolors-settings");!e.data("minicolors-initialized")||e.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus")||(p(),t.addClass("minicolors-focus"),i.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(e.get(0))}))}function p(){_(".minicolors-focus").each(function(){var e=_(this),t=e.find(".minicolors-input"),i=e.find(".minicolors-panel"),n=t.data("minicolors-settings");i.fadeOut(n.hideSpeed,function(){n.hide&&n.hide.call(t.get(0)),e.removeClass("minicolors-focus")})})}function i(e,t,i){var n,o,a,r,s=e.parents(".minicolors").find(".minicolors-input"),l=s.data("minicolors-settings"),c=e.find("[class$=-picker]"),d=e.offset().left,p=e.offset().top,u=Math.round(t.pageX-d),h=Math.round(t.pageY-p),v=i?l.animationSpeed:0;t.originalEvent.changedTouches&&(u=t.originalEvent.changedTouches[0].pageX-d,h=t.originalEvent.changedTouches[0].pageY-p),u<0&&(u=0),h<0&&(h=0),u>e.width()&&(u=e.width()),h>e.height()&&(h=e.height()),e.parent().is(".minicolors-slider-wheel")&&c.parent().is(".minicolors-grid")&&(n=75-u,o=75-h,a=Math.sqrt(n*n+o*o),(r=Math.atan2(o,n))<0&&(r+=2*Math.PI),75<a&&(u=75-75*Math.cos(r),h=75-75*Math.sin(r)),u=Math.round(u),h=Math.round(h)),e.is(".minicolors-grid")?c.stop(!0).animate({top:h+"px",left:u+"px"},v,l.animationEasing,function(){f(s,e)}):c.stop(!0).animate({top:h+"px"},v,l.animationEasing,function(){f(s,e)})}function f(e,t){function i(e,t){var i,n;return e.length&&t?(i=e.offset().left,n=e.offset().top,{x:i-t.offset().left+e.outerWidth()/2,y:n-t.offset().top+e.outerHeight()/2}):null}var n,o,a,r,s,l,c,d=e.val(),p=e.attr("data-opacity"),u=e.parent(),h=e.data("minicolors-settings"),v=u.find(".minicolors-input-swatch"),f=u.find(".minicolors-grid"),g=u.find(".minicolors-slider"),m=u.find(".minicolors-opacity-slider"),w=f.find("[class$=-picker]"),y=g.find("[class$=-picker]"),b=m.find("[class$=-picker]"),C=i(w,f),_=i(y,g),x=i(b,m);if(t.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(h.control){case"wheel":r=f.width()/2-C.x,s=f.height()/2-C.y,l=Math.sqrt(r*r+s*s),(c=Math.atan2(s,r))<0&&(c+=2*Math.PI),75<l&&(l=75,C.x=69-75*Math.cos(c),C.y=69-75*Math.sin(c)),o=T(l/.75,0,100),d=A({h:n=T(180*c/Math.PI,0,360),s:o,b:a=T(100-Math.floor(_.y*(100/g.height())),0,100)}),g.css("backgroundColor",A({h:n,s:o,b:100}));break;case"saturation":d=A({h:n=T(parseInt(C.x*(360/f.width()),10),0,360),s:o=T(100-Math.floor(_.y*(100/g.height())),0,100),b:a=T(100-Math.floor(C.y*(100/f.height())),0,100)}),g.css("backgroundColor",A({h:n,s:100,b:a})),u.find(".minicolors-grid-inner").css("opacity",o/100);break;case"brightness":d=A({h:n=T(parseInt(C.x*(360/f.width()),10),0,360),s:o=T(100-Math.floor(C.y*(100/f.height())),0,100),b:a=T(100-Math.floor(_.y*(100/g.height())),0,100)}),g.css("backgroundColor",A({h:n,s:o,b:100})),u.find(".minicolors-grid-inner").css("opacity",1-a/100);break;default:d=A({h:n=T(360-parseInt(_.y*(360/g.height()),10),0,360),s:o=T(Math.floor(C.x*(100/f.width())),0,100),b:a=T(100-Math.floor(C.y*(100/f.height())),0,100)}),f.css("backgroundColor",A({h:n,s:100,b:100}))}k(e,d,p=h.opacity?parseFloat(1-x.y/m.height()).toFixed(2):1)}else v.find("span").css({backgroundColor:d,opacity:p}),O(e,d,p)}function k(e,t,i){var n,o=e.parent(),a=e.data("minicolors-settings"),r=o.find(".minicolors-input-swatch");a.opacity&&e.attr("data-opacity",i),t="rgb"===a.format?(n=j(t)?S(t,!0):D($(t,!0)),i=""===e.attr("data-opacity")?1:T(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),!isNaN(i)&&a.opacity||(i=1),e.minicolors("rgbObject").a<=1&&n&&a.opacity?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(i)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):(j(t)&&(t=F(t)),x(t,a.letterCase)),e.val(t),r.find("span").css({backgroundColor:t,opacity:i}),O(e,t,i)}function u(e,t){var i,n,o,a,r,s,l,c,d,p,u,h=e.parent(),v=e.data("minicolors-settings"),f=h.find(".minicolors-input-swatch"),g=h.find(".minicolors-grid"),m=h.find(".minicolors-slider"),w=h.find(".minicolors-opacity-slider"),y=g.find("[class$=-picker]"),b=m.find("[class$=-picker]"),C=w.find("[class$=-picker]");switch(j(e.val())?(i=F(e.val()),(r=T(parseFloat(z(e.val())).toFixed(2),0,1))&&e.attr("data-opacity",r)):i=x($(e.val(),!0),v.letterCase),i=i||x(I(v.defaultValue,!0),v.letterCase),0===(u=function(e){var t={h:0,s:0,b:0},i=Math.min(e.r,e.g,e.b),n=Math.max(e.r,e.g,e.b),o=n-i;return t.b=n,t.s=0!==n?255*o/n:0,0!==t.s?e.r===n?t.h=(e.g-e.b)/o:e.g===n?t.h=2+(e.b-e.r)/o:t.h=4+(e.r-e.g)/o:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}(D(i))).s&&(u.h=360),n=u,a=v.keywords?_.map(v.keywords.split(","),function(e){return _.trim(e.toLowerCase())}):[],s=""!==e.val()&&-1<_.inArray(e.val().toLowerCase(),a)?x(e.val()):j(e.val())?S(e.val()):i,t||e.val(s),v.opacity&&(o=""===e.attr("data-opacity")?1:T(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),isNaN(o)&&(o=1),e.attr("data-opacity",o),f.find("span").css("opacity",o),c=T(w.height()-w.height()*o,0,w.height()),C.css("top",c+"px")),"transparent"===e.val().toLowerCase()&&f.find("span").css("opacity",0),f.find("span").css("backgroundColor",i),v.control){case"wheel":d=T(Math.ceil(.75*n.s),0,g.height()/2),p=n.h*Math.PI/180,l=T(75-Math.cos(p)*d,0,g.width()),c=T(75-Math.sin(p)*d,0,g.height()),y.css({top:c+"px",left:l+"px"}),c=150-n.b/(100/g.height()),""===i&&(c=0),b.css("top",c+"px"),m.css("backgroundColor",A({h:n.h,s:n.s,b:100}));break;case"saturation":l=T(5*n.h/12,0,150),c=T(g.height()-Math.ceil(n.b/(100/g.height())),0,g.height()),y.css({top:c+"px",left:l+"px"}),c=T(m.height()-n.s*(m.height()/100),0,m.height()),b.css("top",c+"px"),m.css("backgroundColor",A({h:n.h,s:100,b:n.b})),h.find(".minicolors-grid-inner").css("opacity",n.s/100);break;case"brightness":l=T(5*n.h/12,0,150),c=T(g.height()-Math.ceil(n.s/(100/g.height())),0,g.height()),y.css({top:c+"px",left:l+"px"}),c=T(m.height()-n.b*(m.height()/100),0,m.height()),b.css("top",c+"px"),m.css("backgroundColor",A({h:n.h,s:n.s,b:100})),h.find(".minicolors-grid-inner").css("opacity",1-n.b/100);break;default:l=T(Math.ceil(n.s/(100/g.width())),0,g.width()),c=T(g.height()-Math.ceil(n.b/(100/g.height())),0,g.height()),y.css({top:c+"px",left:l+"px"}),c=T(m.height()-n.h/(360/m.height()),0,m.height()),b.css("top",c+"px"),g.css("backgroundColor",A({h:n.h,s:100,b:100}))}e.data("minicolors-initialized")&&O(e,s,o)}function O(e,t,i){var n,o,a=e.data("minicolors-settings"),r=e.data("minicolors-lastChange");if(!r||r.value!==t||r.opacity!==i){if(e.data("minicolors-lastChange",{value:t,opacity:i}),a.swatches&&0!==a.swatches.length){for(n=j(t)?S(t,!0):D(t),o=0;o<a.swatches.length;++o)if(n.r===a.swatches[o].r&&n.g===a.swatches[o].g&&n.b===a.swatches[o].b&&n.a===a.swatches[o].a){0;break}e.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==o&&e.parent().find(".minicolors-swatches .minicolors-swatch").eq(o).addClass("selected")}a.change&&(a.changeDelay?(clearTimeout(e.data("minicolors-changeTimeout")),e.data("minicolors-changeTimeout",setTimeout(function(){a.change.call(e.get(0),t,i)},a.changeDelay))):a.change.call(e.get(0),t,i)),e.trigger("change").trigger("input")}}function x(e,t){return"uppercase"===t?e.toUpperCase():e.toLowerCase()}function $(e,t){return!(e=e.replace(/^#/g,"")).match(/^[A-F0-9]{3,6}/gi)||3!==e.length&&6!==e.length?"":(3===e.length&&t&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#"+e)}function S(e,t){var i=e.replace(/[^\d,.]/g,"").split(",");return i[0]=T(parseInt(i[0],10),0,255),i[1]=T(parseInt(i[1],10),0,255),i[2]=T(parseInt(i[2],10),0,255),i[3]&&(i[3]=T(parseFloat(i[3],10),0,1)),t?{r:i[0],g:i[1],b:i[2],a:i[3]?i[3]:null}:void 0!==i[3]&&i[3]<=1?"rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")":"rgb("+i[0]+", "+i[1]+", "+i[2]+")"}function I(e,t){return j(e)?S(e):$(e,t)}function T(e,t,i){return e<t&&(e=t),i<e&&(e=i),e}function j(e){var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!t||4!==t.length)}function z(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===e.length?e[4]:"1"}function F(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}function h(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return _.each(i,function(e,t){1===t.length&&(i[e]="0"+t)}),"#"+i.join("")}function A(e){return h((t=e,a={},r=Math.round(t.h),s=Math.round(255*t.s/100),l=Math.round(255*t.b/100),0===s?a.r=a.g=a.b=l:(o=r%60*((i=l)-(n=(255-s)*l/255))/60,360===r&&(r=0),r<60?(a.r=i,a.b=n,a.g=n+o):r<120?(a.g=i,a.b=n,a.r=i-o):r<180?(a.g=i,a.r=n,a.b=n+o):r<240?(a.b=i,a.r=n,a.g=i-o):r<300?(a.b=i,a.g=n,a.r=n+o):r<360?(a.r=i,a.g=n,a.b=i-o):(a.r=0,a.g=0,a.b=0)),{r:Math.round(a.r),g:Math.round(a.g),b:Math.round(a.b)}));var t,i,n,o,a,r,s,l}function D(e){return{r:(e=parseInt(-1<e.indexOf("#")?e.substring(1):e,16))>>16,g:(65280&e)>>8,b:255&e}}_.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},_.extend(_.fn,{minicolors:function(e,t){switch(e){case"destroy":return _(this).each(function(){c(_(this))}),_(this);case"hide":return p(),_(this);case"opacity":return void 0===t?_(this).attr("data-opacity"):(_(this).each(function(){u(_(this).attr("data-opacity",t))}),_(this));case"rgbObject":return r=_(this),s=D($(_(r).val(),!0)),l=_(r).attr("data-opacity"),s?(void 0!==l&&_.extend(s,{a:parseFloat(l)}),s):null;case"rgbString":case"rgbaString":return i=_(this),n="rgbaString"===e,o=D($(_(i).val(),!0)),a=_(i).attr("data-opacity"),o?(void 0===a&&(a=1),n?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(a)+")":"rgb("+o.r+", "+o.g+", "+o.b+")"):null;case"settings":return void 0===t?_(this).data("minicolors-settings"):(_(this).each(function(){var e=_(this).data("minicolors-settings")||{};c(_(this)),_(this).minicolors(_.extend(!0,e,t))}),_(this));case"show":return d(_(this).eq(0)),_(this);case"value":return void 0===t?_(this).val():(_(this).each(function(){"object"==typeof t&&null!==typeof t?(t.opacity&&_(this).attr("data-opacity",T(t.opacity,0,1)),t.color&&_(this).val(t.color)):_(this).val(t),u(_(this))}),_(this));default:return"create"!==e&&(t=e),_(this).each(function(){!function(t,e){var i,n,o,a,r,s=_('<div class="minicolors" />'),l=_.minicolors.defaults;if(!t.data("minicolors-initialized")){if(e=_.extend(!0,{},l,e),s.addClass("minicolors-theme-"+e.theme).toggleClass("minicolors-with-opacity",e.opacity).toggleClass("minicolors-no-data-uris",!0!==e.dataUris),void 0!==e.position&&_.each(e.position.split(" "),function(){s.addClass("minicolors-position-"+this)}),i="rgb"===e.format?e.opacity?"25":"20":e.keywords?"11":"7",t.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",e).prop("size",i).wrap(s).after('<div class="minicolors-panel minicolors-slider-'+e.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),e.inline||(t.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),t.next(".minicolors-input-swatch").on("click",function(e){e.preventDefault(),t.focus()})),(a=t.parent().find(".minicolors-panel")).on("selectstart",function(){return!1}).end(),e.swatches&&0!==e.swatches.length)for(7<e.swatches.length&&(e.swatches.length=7),a.addClass("minicolors-with-swatches"),n=_('<ul class="minicolors-swatches"></ul>').appendTo(a),r=0;r<e.swatches.length;++r)o=j(o=e.swatches[r])?S(o,!0):D($(o,!0)),_('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(n).data("swatch-color",e.swatches[r]).find(".minicolors-swatch-color").css({backgroundColor:h(o),opacity:o.a}),e.swatches[r]=o;e.inline&&t.parent().addClass("minicolors-inline"),u(t,!1),t.data("minicolors-initialized",!0)}}(_(this),t)}),_(this)}var i,n,o,a,r,s,l}}),_(document).on("mousedown.minicolors touchstart.minicolors",function(e){_(e.target).parents().add(e.target).hasClass("minicolors")||p()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var t=_(this);e.preventDefault(),_(document).data("minicolors-target",t),i(t,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var t=_(document).data("minicolors-target");t&&i(t,e)}).on("mouseup.minicolors touchend.minicolors",function(){_(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(e){e.preventDefault();var t=_(this),i=t.parents(".minicolors").find(".minicolors-input"),n=t.data("swatch-color");k(i,n,z(n)),u(i)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(e){var t=_(this).parent().find(".minicolors-input");e.preventDefault(),d(t)}).on("focus.minicolors",".minicolors-input",function(){var e=_(this);e.data("minicolors-initialized")&&d(e)}).on("blur.minicolors",".minicolors-input",function(){var e,t,i,n,o,a=_(this),r=a.data("minicolors-settings");a.data("minicolors-initialized")&&(e=r.keywords?_.map(r.keywords.split(","),function(e){return _.trim(e.toLowerCase())}):[],o=""!==a.val()&&-1<_.inArray(a.val().toLowerCase(),e)?a.val():null===(i=j(a.val())?S(a.val(),!0):(t=$(a.val(),!0))?D(t):null)?r.defaultValue:"rgb"===r.format?S(r.opacity?"rgba("+i.r+","+i.g+","+i.b+","+a.attr("data-opacity")+")":"rgb("+i.r+","+i.g+","+i.b+")"):h(i),n=r.opacity?a.attr("data-opacity"):1,"transparent"===o.toLowerCase()&&(n=0),a.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",n),a.val(o),""===a.val()&&a.val(I(r.defaultValue,!0)),a.val(x(a.val(),r.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var t=_(this);if(t.data("minicolors-initialized"))switch(e.keyCode){case 9:p();break;case 13:case 27:p(),t.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=_(this);e.data("minicolors-initialized")&&u(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=_(this);e.data("minicolors-initialized")&&setTimeout(function(){u(e,!0)},1)})}),function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){function e(e,t){this.items=e,this.settings=t||{diacritics:!0}}e.prototype.tokenize=function(e){if(!(e=s(String(e||"").toLowerCase()))||!e.length)return[];for(var t,i,n=[],o=e.split(/ +/),a=0,r=o.length;a<r;a++){if(t=l(o[a]),this.settings.diacritics)for(i in c)c.hasOwnProperty(i)&&(t=t.replace(new RegExp(i,"g"),c[i]));n.push({string:o[a],regex:new RegExp(t,"i")})}return n},e.prototype.iterator=function(e,t){(r(e)?Array.prototype.forEach||function(e){for(var t=0,i=this.length;t<i;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)}).apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var o,a,r;e=this.prepareSearch(e,t),a=e.tokens,o=e.options.fields,r=a.length;function s(e,t){var i,n;return e?-1===(n=(e=String(e||"")).search(t.regex))?0:(i=t.string.length/e.length,0===n&&(i+=.5),i):0}var l,c=(l=o.length)?1===l?function(e,t){return s(t[o[0]],e)}:function(e,t){for(var i=0,n=0;i<l;i++)n+=s(t[o[i]],e);return n/l}:function(){return 0};return r?1===r?function(e){return c(a[0],e)}:"and"===e.options.conjunction?function(e){for(var t,i=0,n=0;i<r;i++){if((t=c(a[i],e))<=0)return 0;n+=t}return n/r}:function(e){for(var t=0,i=0;t<r;t++)i+=c(a[t],e);return i/r}:function(){return 0}},e.prototype.getSortFunction=function(e,t){var i,n,o,a,r,s,l,c=this,d=!(e=c.prepareSearch(e,t)).query&&t.sort_empty||t.sort,p=function(e,t){return"$score"===e?t.score:c.items[t.id][e]},u=[];if(d)for(i=0,n=d.length;i<n;i++)!e.query&&"$score"===d[i].field||u.push(d[i]);if(e.query){for(l=!0,i=0,n=u.length;i<n;i++)if("$score"===u[i].field){l=!1;break}l&&u.unshift({field:"$score",direction:"desc"})}else for(i=0,n=u.length;i<n;i++)if("$score"===u[i].field){u.splice(i,1);break}for(s=[],i=0,n=u.length;i<n;i++)s.push("desc"===u[i].direction?-1:1);return(a=u.length)?1===a?(o=u[0].field,r=s[0],function(e,t){return r*h(p(o,e),p(o,t))}):function(e,t){for(var i,n,o=0;o<a;o++)if(n=u[o].field,i=s[o]*h(p(n,e),p(n,t)))return i;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;var i=(t=a({},t)).fields,n=t.sort,o=t.sort_empty;return i&&!r(i)&&(t.fields=[i]),n&&!r(n)&&(t.sort=[n]),o&&!r(o)&&(t.sort_empty=[o]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,i){var n,t,o,a=this,r=this.prepareSearch(e,i);return i=r.options,e=r.query,o=i.score||a.getScoreFunction(r),e.length?a.iterator(a.items,function(e,t){n=o(e),(!1===i.filter||0<n)&&r.items.push({score:n,id:t})}):a.iterator(a.items,function(e,t){r.items.push({score:1,id:t})}),(t=a.getSortFunction(r,i))&&r.items.sort(t),r.total=r.items.length,"number"==typeof i.limit&&(r.items=r.items.slice(0,i.limit)),r};var h=function(e,t){return"number"==typeof e&&"number"==typeof t||(e=i(String(e||"")),t=i(String(t||""))),t<e?1:e<t?-1:0},a=function(e){for(var t,i,n=1,o=arguments.length;n<o;n++)if(i=arguments[n])for(t in i)i.hasOwnProperty(t)&&(e[t]=i[t]);return e},s=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},l=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},i=function(){var e,t,i,n,o="",a={};for(i in c)if(c.hasOwnProperty(i))for(o+=n=c[i].substring(2,c[i].length-1),e=0,t=n.length;e<t;e++)a[n.charAt(e)]=i;var r=new RegExp("["+o+"]","g");return function(e){return e.replace(r,function(e){return a[e]}).toLowerCase()}}();return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={mixin:function(n){n.plugins={},n.prototype.initializePlugins=function(e){var t,i,n,o=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},a.isArray(e))for(t=0,i=e.length;t<i;t++)"string"==typeof e[t]?o.push(e[t]):(this.plugins.settings[e[t].name]=e[t].options,o.push(e[t].name));else if(e)for(n in e)e.hasOwnProperty(n)&&(this.plugins.settings[n]=e[n],o.push(n));for(;o.length;)this.require(o.shift())},n.prototype.loadPlugin=function(e){var t=this.plugins,i=n.plugins[e];if(!n.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');t.requested[e]=!0,t.loaded[e]=i.fn.apply(this,[this.plugins.settings[e]||{}]),t.names.push(e)},n.prototype.require=function(e){var t=this.plugins;if(!this.plugins.loaded.hasOwnProperty(e)){if(t.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');this.loadPlugin(e)}return t.loaded[e]},n.define=function(e,t){n.plugins[e]={name:e,fn:t}}}},a={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(_,p,e){function n(){}n.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=0)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},n.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=n.prototype[t[i]]};function c(e){return void 0!==e}function x(e){return null==e?null:"boolean"==typeof e?e?"1":"0":e+""}function l(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function d(e){return(e+"").replace(/\$/g,"$$$$")}function i(t,i,e){var n,o=t.trigger,a={};for(n in t.trigger=function(){var e=arguments[0];return-1===i.indexOf(e)?o.apply(t,arguments):void(a[e]=arguments)},e.apply(t,[]),t.trigger=o,a)a.hasOwnProperty(n)&&o.apply(t,a[n])}function u(e){var t,i,n={};return"selectionStart"in e?(n.start=e.selectionStart,n.length=e.selectionEnd-n.start):document.selection&&(e.focus(),t=document.selection.createRange(),i=document.selection.createRange().text.length,t.moveStart("character",-e.value.length),n.start=t.text.length-i,n.length=i),n}function b(d){function e(e,t){var i,n,o,a,r,s,l,c;t=t||{},(e=e||window.event||{}).metaKey||e.altKey||!t.force&&!1===d.data("grow")||(i=d.val(),e.type&&"keydown"===e.type.toLowerCase()&&(o=97<=(n=e.keyCode)&&n<=122||65<=n&&n<=90||48<=n&&n<=57||32===n,46===n||8===n?(c=u(d[0])).length?i=i.substring(0,c.start)+i.substring(c.start+c.length):8===n&&c.start?i=i.substring(0,c.start-1)+i.substring(c.start+1):46===n&&void 0!==c.start&&(i=i.substring(0,c.start)+i.substring(c.start+1)):o&&(s=e.shiftKey,l=String.fromCharCode(e.keyCode),i+=l=s?l.toUpperCase():l.toLowerCase())),a=d.attr("placeholder"),!i&&a&&(i=a),(r=function(e,t){if(!e)return 0;var i=_("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(e).appendTo("body");!function(e,t,i){var n,o,a={};if(i)for(n=0,o=i.length;n<o;n++)a[i[n]]=e.css(i[n]);else a=e.css();t.css(a)}(t,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var n=i.width();return i.remove(),n}(i,d)+4)!==p&&(p=r,d.width(r),d.triggerHandler("resize")))}var p=null;d.on("keydown keyup update blur",e),e()}var C=/Mac/.test(navigator.userAgent),k=C?91:17,O=C?18:17,$=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,t={before:function(e,t,i){var n=e[t];e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)}},after:function(t,e,i){var n=t[e];t[e]=function(){var e=n.apply(t,arguments);return i.apply(t,arguments),e}}},m=function(e,t){var i,n,o=this,a=e[0];a.selectize=o;var r,s,l,c,d=window.getComputedStyle&&window.getComputedStyle(a,null);if(r=(r=d?d.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction)||e.parents("[dir]:first").attr("dir")||"",_.extend(o,{order:0,settings:t,$input:e,tabIndex:e.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++m.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===t.loadThrottle?o.onSearchChange:(s=o.onSearchChange,l=t.loadThrottle,function(){var e=this,t=arguments;window.clearTimeout(c),c=window.setTimeout(function(){s.apply(e,t)},l)})}),o.sifter=new p(this.options,{diacritics:t.diacritics}),o.settings.options){for(i=0,n=o.settings.options.length;i<n;i++)o.registerOption(o.settings.options[i]);delete o.settings.options}if(o.settings.optgroups){for(i=0,n=o.settings.optgroups.length;i<n;i++)o.registerOptionGroup(o.settings.optgroups[i]);delete o.settings.optgroups}o.settings.mode=o.settings.mode||(1===o.settings.maxItems?"single":"multi"),"boolean"!=typeof o.settings.hideSelected&&(o.settings.hideSelected="multi"===o.settings.mode),o.initializePlugins(o.settings.plugins),o.setupCallbacks(),o.setupTemplates(),o.setup()};return n.mixin(m),e.mixin(m),_.extend(m.prototype,{setup:function(){var e,t,i,n,o,a,r=this,s=r.settings,l=r.eventNS,c=_(window),d=_(document),p=r.$input,u=r.settings.mode,h=p.attr("class")||"",v=_("<div>").addClass(s.wrapperClass).addClass(h).addClass(u),f=_("<div>").addClass(s.inputClass).addClass("items").appendTo(v),g=_('<input type="text" autocomplete="off" />').appendTo(f).attr("tabindex",p.is(":disabled")?"-1":r.tabIndex),m=_(s.dropdownParent||v),w=_("<div>").addClass(s.dropdownClass).addClass(u).hide().appendTo(m),y=_("<div>").addClass(s.dropdownContentClass).appendTo(w);r.settings.copyClassesToDropdown&&w.addClass(h),v.css({width:p[0].style.width}),r.plugins.names.length&&(e="plugin-"+r.plugins.names.join(" plugin-"),v.addClass(e),w.addClass(e)),(null===s.maxItems||1<s.maxItems)&&1===r.tagType&&p.attr("multiple","multiple"),r.settings.placeholder&&g.attr("placeholder",s.placeholder),!r.settings.splitOn&&r.settings.delimiter&&(t=r.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),r.settings.splitOn=new RegExp("\\s*"+t+"+\\s*")),p.attr("autocorrect")&&g.attr("autocorrect",p.attr("autocorrect")),p.attr("autocapitalize")&&g.attr("autocapitalize",p.attr("autocapitalize")),r.$wrapper=v,r.$control=f,r.$control_input=g,r.$dropdown=w,r.$dropdown_content=y,w.on("mouseenter","[data-selectable]",function(){return r.onOptionHover.apply(r,arguments)}),w.on("mousedown click","[data-selectable]",function(){return r.onOptionSelect.apply(r,arguments)}),n="mousedown",o="*:not(input)",a=function(){return r.onItemSelect.apply(r,arguments)},(i=f).on(n,o,function(e){for(var t=e.target;t&&t.parentNode!==i[0];)t=t.parentNode;return e.currentTarget=t,a.apply(this,[e])}),b(g),f.on({mousedown:function(){return r.onMouseDown.apply(r,arguments)},click:function(){return r.onClick.apply(r,arguments)}}),g.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return r.onKeyDown.apply(r,arguments)},keyup:function(){return r.onKeyUp.apply(r,arguments)},keypress:function(){return r.onKeyPress.apply(r,arguments)},resize:function(){r.positionDropdown.apply(r,[])},blur:function(){return r.onBlur.apply(r,arguments)},focus:function(){return r.ignoreBlur=!1,r.onFocus.apply(r,arguments)},paste:function(){return r.onPaste.apply(r,arguments)}}),d.on("keydown"+l,function(e){r.isCmdDown=e[C?"metaKey":"ctrlKey"],r.isCtrlDown=e[C?"altKey":"ctrlKey"],r.isShiftDown=e.shiftKey}),d.on("keyup"+l,function(e){e.keyCode===O&&(r.isCtrlDown=!1),16===e.keyCode&&(r.isShiftDown=!1),e.keyCode===k&&(r.isCmdDown=!1)}),d.on("mousedown"+l,function(e){if(r.isFocused){if(e.target===r.$dropdown[0]||e.target.parentNode===r.$dropdown[0])return!1;r.$control.has(e.target).length||e.target===r.$control[0]||r.blur(e.target)}}),c.on(["scroll"+l,"resize"+l].join(" "),function(){r.isOpen&&r.positionDropdown.apply(r,arguments)}),c.on("mousemove"+l,function(){r.ignoreHover=!1}),this.revertSettings={$children:p.children().detach(),tabindex:p.attr("tabindex")},p.attr("tabindex",-1).hide().after(r.$wrapper),_.isArray(s.items)&&(r.setValue(s.items),delete s.items),$&&p.on("invalid"+l,function(e){e.preventDefault(),r.isInvalid=!0,r.refreshState()}),r.updateOriginalInput(),r.refreshItems(),r.refreshState(),r.updatePlaceholder(),r.isSetup=!0,p.is(":disabled")&&r.disable(),r.on("change",this.onChange),p.data("selectize",r),p.addClass("selectized"),r.trigger("initialize"),!0===s.preload&&r.onSearchChange("")},setupTemplates:function(){var i=this.settings.labelField,n=this.settings.optgroupLabelField,e={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[i])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[i])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};this.settings.render=_.extend({},e,this.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)i.hasOwnProperty(e)&&((t=this.settings[i[e]])&&this.on(e,t))},onClick:function(e){this.isFocused||(this.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,i=e.isDefaultPrevented();if(_(e.target),t.isFocused){if(e.target!==t.$control_input[0])return"single"===t.settings.mode?t.isOpen?t.close():t.open():i||t.setActiveItem(null),!1}else i||window.setTimeout(function(){t.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var n=this;n.isFull()||n.isInputHidden||n.isLocked?e.preventDefault():n.settings.splitOn&&setTimeout(function(){for(var e=_.trim(n.$control_input.val()||"").split(n.settings.splitOn),t=0,i=e.length;t<i;t++)n.createItem(e[t])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t,i,n=(e.target,this.$control_input[0],this);if(!n.isLocked){switch(e.keyCode){case 65:if(n.isCmdDown)return void n.selectAll();break;case 27:return void(n.isOpen&&(e.preventDefault(),e.stopPropagation(),n.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:return!n.isOpen&&n.hasOptions?n.open():n.$activeOption&&(n.ignoreHover=!0,(t=n.getAdjacentOption(n.$activeOption,1)).length&&n.setActiveOption(t,!0,!0)),void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:return n.$activeOption&&(n.ignoreHover=!0,(i=n.getAdjacentOption(n.$activeOption,-1)).length&&n.setActiveOption(i,!0,!0)),void e.preventDefault();case 13:return void(n.isOpen&&n.$activeOption&&(n.onOptionSelect({currentTarget:n.$activeOption}),e.preventDefault()));case 37:return void n.advanceSelection(-1,e);case 39:return void n.advanceSelection(1,e);case 9:return n.settings.selectOnTab&&n.isOpen&&n.$activeOption&&(n.onOptionSelect({currentTarget:n.$activeOption}),n.isFull()||e.preventDefault()),void(n.settings.create&&n.createItem()&&e.preventDefault());case 8:case 46:return void n.deleteSelection(e)}return!n.isFull()&&!n.isInputHidden||(C?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()}9!==e.keyCode&&e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(t){var i=this,n=i.settings.load;n&&(i.loadedSearches.hasOwnProperty(t)||(i.loadedSearches[t]=!0,i.load(function(e){n.apply(i,[t,e])})))},onFocus:function(e){var t=this,i=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(e);var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),(t||document.body).focus(),i.ignoreFocus=!1,i.trigger("blur")};i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,i,n=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),(i=_(e.currentTarget)).hasClass("create")?n.createItem(null,function(){n.settings.closeAfterSelect&&n.close()}):void 0!==(t=i.attr("data-value"))&&(n.lastQuery=null,n.setTextboxValue(""),n.addItem(t),n.settings.closeAfterSelect?n.close():!n.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&n.setActiveOption(n.getOption(t)))},onItemSelect:function(e){this.isLocked||"multi"===this.settings.mode&&(e.preventDefault(),this.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){i(this,t?[]:["change"],function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(e,t){var i,n,o,a,r,s,l,c,d=this;if("single"!==d.settings.mode){if(!(e=_(e)).length)return _(d.$activeItems).removeClass("active"),d.$activeItems=[],void(d.isFocused&&d.showInput());if("mousedown"===(i=t&&t.type.toLowerCase())&&d.isShiftDown&&d.$activeItems.length){for(c=d.$control.children(".active:last"),a=Array.prototype.indexOf.apply(d.$control[0].childNodes,[c[0]]),(r=Array.prototype.indexOf.apply(d.$control[0].childNodes,[e[0]]))<a&&(l=a,a=r,r=l),n=a;n<=r;n++)s=d.$control[0].childNodes[n],-1===d.$activeItems.indexOf(s)&&(_(s).addClass("active"),d.$activeItems.push(s));t.preventDefault()}else"mousedown"===i&&d.isCtrlDown||"keydown"===i&&this.isShiftDown?e.hasClass("active")?(o=d.$activeItems.indexOf(e[0]),d.$activeItems.splice(o,1),e.removeClass("active")):d.$activeItems.push(e.addClass("active")[0]):(_(d.$activeItems).removeClass("active"),d.$activeItems=[e.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(e,t,i){var n,o,a,r,s,l=this;l.$activeOption&&l.$activeOption.removeClass("active"),l.$activeOption=null,(e=_(e)).length&&(l.$activeOption=e.addClass("active"),!t&&c(t)||(n=l.$dropdown_content.height(),o=l.$activeOption.outerHeight(!0),t=l.$dropdown_content.scrollTop()||0,s=(r=a=l.$activeOption.offset().top-l.$dropdown_content.offset().top+t)-n+o,n+t<a+o?l.$dropdown_content.stop().animate({scrollTop:s},i?l.settings.scrollDuration:0):a<t&&l.$dropdown_content.stop().animate({scrollTop:r},i?l.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(e){var t,i,n,o=this,a=o.settings,r=this.getSearchOptions();if(a.score&&"function"!=typeof(n=o.settings.score.apply(this,[e])))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==o.lastQuery?(o.lastQuery=e,i=o.sifter.search(e,_.extend(r,{score:n})),o.currentResults=i):i=_.extend(!0,{},o.currentResults),a.hideSelected)for(t=i.items.length-1;0<=t;t--)-1!==o.items.indexOf(x(i.items[t].id))&&i.items.splice(t,1);return i},refreshOptions:function(e){var t,i,n,o,a,r,s,l,c,d,p,u,h,v,f;void 0===e&&(e=!0);var g=this,m=_.trim(g.$control_input.val()),w=g.search(m),y=g.$dropdown_content,b=g.$activeOption&&x(g.$activeOption.attr("data-value")),C=w.items.length;for("number"==typeof g.settings.maxOptions&&(C=Math.min(C,g.settings.maxOptions)),o={},a=[],t=0;t<C;t++)for(r=g.options[w.items[t].id],s=g.render("option",r),l=r[g.settings.optgroupField]||"",i=0,n=(c=_.isArray(l)?l:[l])&&c.length;i<n;i++)l=c[i],g.optgroups.hasOwnProperty(l)||(l=""),o.hasOwnProperty(l)||(o[l]=[],a.push(l)),o[l].push(s);for(this.settings.lockOptgroupOrder&&a.sort(function(e,t){return(g.optgroups[e].$order||0)-(g.optgroups[t].$order||0)}),d=[],t=0,C=a.length;t<C;t++)l=a[t],g.optgroups.hasOwnProperty(l)&&o[l].length?(p=g.render("optgroup_header",g.optgroups[l])||"",p+=o[l].join(""),d.push(g.render("optgroup",_.extend({},g.optgroups[l],{html:p})))):d.push(o[l].join(""));if(y.html(d.join("")),g.settings.highlight&&w.query.length&&w.tokens.length)for(t=0,C=w.tokens.length;t<C;t++)!function(e,t){if("string"!=typeof t||t.length){var l="string"==typeof t?new RegExp(t,"i"):t,c=function(e){var t=0;if(3===e.nodeType){var i,n,o,a,r=e.data.search(l);0<=r&&0<e.data.length&&(i=e.data.match(l),(n=document.createElement("span")).className="highlight",(o=e.splitText(r)).splitText(i[0].length),a=o.cloneNode(!0),n.appendChild(a),o.parentNode.replaceChild(n,o),t=1)}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var s=0;s<e.childNodes.length;++s)s+=c(e.childNodes[s]);return t};e.each(function(){c(this)})}}(y,w.tokens[t].regex);if(!g.settings.hideSelected)for(t=0,C=g.items.length;t<C;t++)g.getOption(g.items[t]).addClass("selected");(u=g.canCreate(m))&&(y.prepend(g.render("option_create",{input:m})),f=_(y[0].childNodes[0])),g.hasOptions=0<w.items.length||u,g.hasOptions?(0<w.items.length?((v=b&&g.getOption(b))&&v.length?h=v:"single"===g.settings.mode&&g.items.length&&(h=g.getOption(g.items[0])),h&&h.length||(h=f&&!g.settings.addPrecedence?g.getAdjacentOption(f,1):y.find("[data-selectable]:first"))):h=f,g.setActiveOption(h),e&&!g.isOpen&&g.open()):(g.setActiveOption(null),e&&g.isOpen&&g.close())},addOption:function(e){var t,i,n,o=this;if(_.isArray(e))for(t=0,i=e.length;t<i;t++)o.addOption(e[t]);else(n=o.registerOption(e))&&(o.userOptions[n]=!0,o.lastQuery=null,o.trigger("option_add",n,e))},registerOption:function(e){var t=x(e[this.settings.valueField]);return!(!t||this.options.hasOwnProperty(t))&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=x(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var i,n,o,a,r,s,l,c=this;if(e=x(e),o=x(t[c.settings.valueField]),null!==e&&c.options.hasOwnProperty(e)){if("string"!=typeof o)throw new Error("Value must be set in option data");l=c.options[e].$order,o!==e&&(delete c.options[e],-1!==(a=c.items.indexOf(e))&&c.items.splice(a,1,o)),t.$order=t.$order||l,c.options[o]=t,r=c.renderCache.item,s=c.renderCache.option,r&&(delete r[e],delete r[o]),s&&(delete s[e],delete s[o]),-1!==c.items.indexOf(o)&&(i=c.getItem(e),n=_(c.render("item",t)),i.hasClass("active")&&n.addClass("active"),i.replaceWith(n)),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=x(e);var n=i.renderCache.item,o=i.renderCache.option;n&&delete n[e],o&&delete o[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,t){var i=this.$dropdown.find("[data-selectable]"),n=i.index(e)+t;return 0<=n&&n<i.length?i.eq(n):_()},getElementWithValue:function(e,t){if(null!=(e=x(e)))for(var i=0,n=t.length;i<n;i++)if(t[i].getAttribute("data-value")===e)return _(t[i]);return _()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(e,t){for(var i=_.isArray(e)?e:[e],n=0,o=i.length;n<o;n++)this.isPending=n<o-1,this.addItem(i[n],t)},addItem:function(s,l){i(this,l?[]:["change"],function(){var e,t,i,n,o,a=this,r=a.settings.mode;return s=x(s),-1!==a.items.indexOf(s)?void("single"===r&&a.close()):void(a.options.hasOwnProperty(s)&&("single"===r&&a.clear(l),"multi"===r&&a.isFull()||(e=_(a.render("item",a.options[s])),o=a.isFull(),a.items.splice(a.caretPos,0,s),a.insertAtCaret(e),a.isPending&&(o||!a.isFull())||a.refreshState(),a.isSetup&&(i=a.$dropdown_content.find("[data-selectable]"),a.isPending||(t=a.getOption(s),n=a.getAdjacentOption(t,1).attr("data-value"),a.refreshOptions(a.isFocused&&"single"!==r),n&&a.setActiveOption(a.getOption(n))),!i.length||a.isFull()?a.close():a.positionDropdown(),a.updatePlaceholder(),a.trigger("item_add",s,e),a.updateOriginalInput({silent:l})))))})},removeItem:function(e,t){var i,n,o=this,a="object"==typeof e?e:o.getItem(e);e=x(a.attr("data-value")),-1!==(i=o.items.indexOf(e))&&(a.remove(),a.hasClass("active")&&(n=o.$activeItems.indexOf(a[0]),o.$activeItems.splice(n,1)),o.items.splice(i,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(e)&&o.removeOption(e,t),i<o.caretPos&&o.setCaret(o.caretPos-1),o.refreshState(),o.updatePlaceholder(),o.updateOriginalInput({silent:t}),o.positionDropdown(),o.trigger("item_remove",e,a))},createItem:function(e,i){var n=this,o=n.caretPos;e=e||_.trim(n.$control_input.val()||"");var a=arguments[arguments.length-1];if("function"!=typeof a&&(a=function(){}),"boolean"!=typeof i&&(i=!0),!n.canCreate(e))return a(),!1;n.lock();var t,r,s="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},l=(r=!(t=function(e){if(n.unlock(),!e||"object"!=typeof e)return a();var t=x(e[n.settings.valueField]);return"string"!=typeof t?a():(n.setTextboxValue(""),n.addOption(e),n.setCaret(o),n.addItem(t),n.refreshOptions(i&&"single"!==n.settings.mode),void a(e))}),function(){r||(r=!0,t.apply(this,arguments))}),c=s.apply(this,[e,l]);return void 0!==c&&l(c),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e=this;e.isRequired&&(e.items.length&&(e.isInvalid=!1),e.$control_input.prop("required",void 0)),e.refreshClasses()},refreshClasses:function(){var e=this,t=e.isFull(),i=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",i).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!_.isEmptyObject(e.options)).toggleClass("has-items",0<e.items.length),e.$control_input.data("grow",!t&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,n,o,a=this;if(e=e||{},1===a.tagType){for(n=[],t=0,i=a.items.length;t<i;t++)o=a.options[a.items[t]][a.settings.labelField]||"",n.push('<option value="'+l(a.items[t])+'" selected="selected">'+l(o)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),a.$input.html(n.join(""))}else a.$input.val(a.getValue()),a.$input.attr("value",a.$input.val());a.isSetup&&(e.silent||a.trigger("change",a.$input.val()))},updatePlaceholder:function(){var e;this.settings.placeholder&&(e=this.$control_input,this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0}))},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length);0===t?this.$control.prepend(e):_(this.$control[0].childNodes[t]).before(e),this.setCaret(t+1)},deleteSelection:function(e){var t,i,n,o,a,r,s,l=this,c=e&&8===e.keyCode?-1:1,d=u(l.$control_input[0]);if(l.$activeOption&&!l.settings.hideSelected&&(a=l.getAdjacentOption(l.$activeOption,-1).attr("data-value")),n=[],l.$activeItems.length){for(s=l.$control.children(".active:"+(0<c?"last":"first")),o=l.$control.children(":not(input)").index(s),0<c&&o++,t=0,i=l.$activeItems.length;t<i;t++)n.push(_(l.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(l.isFocused||"single"===l.settings.mode)&&l.items.length&&(c<0&&0===d.start&&0===d.length?n.push(l.items[l.caretPos-1]):0<c&&d.start===l.$control_input.val().length&&n.push(l.items[l.caretPos]));if(!n.length||"function"==typeof l.settings.onDelete&&!1===l.settings.onDelete.apply(l,[n]))return!1;for(void 0!==o&&l.setCaret(o);n.length;)l.removeItem(n.pop());return l.showInput(),l.positionDropdown(),l.refreshOptions(!0),a&&((r=l.getOption(a)).length&&l.setActiveOption(r)),!0},advanceSelection:function(e,t){var i,n,o,a,r,s=this;0!==e&&(s.rtl&&(e*=-1),i=0<e?"last":"first",n=u(s.$control_input[0]),s.isFocused&&!s.isInputHidden?(a=s.$control_input.val().length,(e<0?0!==n.start||0!==n.length:n.start!==a)||a||s.advanceCaret(e,t)):(r=s.$control.children(".active:"+i)).length&&(o=s.$control.children(":not(input)").index(r),s.setActiveItem(null),s.setCaret(0<e?o+1:o)))},advanceCaret:function(e,t){var i,n,o=this;0!==e&&(i=0<e?"next":"prev",o.isShiftDown?(n=o.$control_input[i]()).length&&(o.hideInput(),o.setActiveItem(n),t&&t.preventDefault()):o.setCaret(o.caretPos+e))},setCaret:function(e){var t=this;if(e="single"===t.settings.mode?t.items.length:Math.max(0,Math.min(t.items.length,e)),!t.isPending)for(var i,n=t.$control.children(":not(input)"),o=0,a=n.length;o<a;o++)i=_(n[o]).detach(),o<e?t.$control_input.before(i):t.$control.append(i);t.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.$control_input.prop("disabled",!0).prop("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,i=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),_(window).off(t),_(document).off(t),_(document.body).off(t),delete e.$input[0].selectize},render:function(e,t){var i,n,o="",a=!1,r=this,s=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return"option"!==e&&"item"!==e||(a=!!(i=x(t[r.settings.valueField]))),a&&(c(r.renderCache[e])||(r.renderCache[e]={}),r.renderCache[e].hasOwnProperty(i))?r.renderCache[e][i]:(o=r.settings.render[e].apply(this,[t,l]),"option"!==e&&"option_create"!==e||(o=o.replace(s,"<$1 data-selectable")),"optgroup"===e&&(n=t[r.settings.optgroupValueField]||"",o=o.replace(s,'<$1 data-group="'+d(l(n))+'"')),"option"!==e&&"item"!==e||(o=o.replace(s,'<$1 data-value="'+d(l(i||""))+'"')),a&&(r.renderCache[e][i]=o),o)},clearCache:function(e){void 0===e?this.renderCache={}:delete this.renderCache[e]},canCreate:function(e){if(!this.settings.create)return!1;var t=this.settings.createFilter;return!(!e.length||"function"==typeof t&&!t.apply(this,[e])||"string"==typeof t&&!new RegExp(t).test(e)||t instanceof RegExp&&!t.test(e))}}),m.count=0,m.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},_.fn.selectize=function(o){function a(e,r){function s(e){var t=p&&e.attr(p);return"string"==typeof t&&t.length?JSON.parse(t):null}function l(e,t){e=_(e);var i,n,o=x(e.attr("value"));(o||d.allowEmptyOption)&&(c.hasOwnProperty(o)?t&&((i=c[o][v])?_.isArray(i)?i.push(t):c[o][v]=[i,t]:c[o][v]=t):((n=s(e)||{})[u]=n[u]||e.text(),n[h]=n[h]||o,n[v]=n[v]||t,c[o]=n,a.push(n),e.is(":selected")&&r.items.push(o)))}var t,i,n,o,a=r.options,c={};for(r.maxItems=e.attr("multiple")?null:1,t=0,i=(o=e.children()).length;t<i;t++)"optgroup"===(n=o[t].tagName.toLowerCase())?function(e){var t,i,n,o,a;for((n=(e=_(e)).attr("label"))&&((o=s(e)||{})[f]=n,o[g]=n,r.optgroups.push(o)),t=0,i=(a=_("option",e)).length;t<i;t++)l(a[t],n)}(o[t]):"option"===n&&l(o[t])}var r=_.fn.selectize.defaults,d=_.extend({},r,o),p=d.dataAttr,u=d.labelField,h=d.valueField,v=d.optgroupField,f=d.optgroupLabelField,g=d.optgroupValueField;return this.each(function(){var e,t,i,n;this.selectize||(e=_(this),t=this.tagName.toLowerCase(),(i=e.attr("placeholder")||e.attr("data-placeholder"))||d.allowEmptyOption||(i=e.children('option[value=""]').text()),("select"===t?a:function(e,t){var i,n,o,a,r=e.attr(p);if(r)for(t.options=JSON.parse(r),i=0,n=t.options.length;i<n;i++)t.items.push(t.options[i][h]);else{var s=_.trim(e.val()||"");if(!d.allowEmptyOption&&!s.length)return;for(i=0,n=(o=s.split(d.delimiter)).length;i<n;i++)(a={})[u]=o[i],a[h]=o[i],t.options.push(a);t.items=o}})(e,n={placeholder:i,options:[],optgroups:[],items:[]}),new m(e,_.extend(!0,{},r,n,o)))})},_.fn.selectize.defaults=m.defaults,_.fn.selectize.support={validity:$},m.define("drag_drop",function(){if(!_.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');var n,e,t,i;"multi"===this.settings.mode&&((n=this).lock=(i=n.lock,function(){var e=n.$control.data("sortable");return e&&e.disable(),i.apply(n,arguments)}),n.unlock=(t=n.unlock,function(){var e=n.$control.data("sortable");return e&&e.enable(),t.apply(n,arguments)}),n.setup=(e=n.setup,function(){e.apply(this,arguments);var i=n.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:n.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),i.css({overflow:"visible"})},stop:function(){i.css({overflow:"hidden"});var e=n.$activeItems?n.$activeItems.slice():null,t=[];i.children("[data-value]").each(function(){t.push(_(this).attr("data-value"))}),n.setValue(t),n.setActiveItem(e)}})}))}),m.define("dropdown_header",function(e){var t,i=this;e=_.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},e),i.setup=(t=i.setup,function(){t.apply(i,arguments),i.$dropdown_header=_(e.html(e)),i.$dropdown.prepend(i.$dropdown_header)})}),m.define("optgroup_columns",function(s){var a,l=this;s=_.extend({equalizeWidth:!0,equalizeHeight:!0},s),this.getAdjacentOption=function(e,t){var i=e.closest("[data-group]").find("[data-selectable]"),n=i.index(e)+t;return 0<=n&&n<i.length?i.eq(n):_()},this.onKeyDown=(a=l.onKeyDown,function(e){var t,i,n,o;return!this.isOpen||37!==e.keyCode&&39!==e.keyCode?a.apply(this,arguments):(l.ignoreHover=!0,t=(o=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((i=(n=(o=37===e.keyCode?o.prev("[data-group]"):o.next("[data-group]")).find("[data-selectable]")).eq(Math.min(n.length-1,t))).length&&this.setActiveOption(i)))});function e(){var e,t,i,n,o,a=_("[data-group]",l.$dropdown_content),r=a.length;if(r&&l.$dropdown_content.width()){if(s.equalizeHeight){for(e=t=0;e<r;e++)t=Math.max(t,a.eq(e).height());a.css({height:t})}s.equalizeWidth&&(o=l.$dropdown_content.innerWidth()-c(),i=Math.round(o/r),a.css({width:i}),1<r&&(n=o-i*(r-1),a.eq(r-1).css({width:n})))}}var c=function(){var e,t=c.width,i=document;return void 0===t&&((e=i.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,i.body.appendChild(e),t=c.width=e.offsetWidth-e.clientWidth,i.body.removeChild(e)),t};(s.equalizeHeight||s.equalizeWidth)&&(t.after(this,"positionDropdown",e),t.after(this,"refreshOptions",e))}),m.define("remove_button",function(e){var i,o,t;"single"!==this.settings.mode&&(e=_.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e),i=this,o='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+l(e.title)+'">'+e.label+"</a>",this.setup=(t=i.setup,function(){var n;e.append&&(n=i.settings.render.item,i.settings.render.item=function(){return e=n.apply(this,arguments),t=o,i=e.search(/(<\/[^>]+>\s*)$/),e.substring(0,i)+t+e.substring(i);var e,t,i}),t.apply(this,arguments),this.$control.on("click","."+e.className,function(e){var t;e.preventDefault(),i.isLocked||(t=_(e.currentTarget).parent(),i.setActiveItem(t),i.deleteSelection()&&i.setCaret(i.items.length))})}))}),m.define("restore_on_backspace",function(n){var o,e=this;n.text=n.text||function(e){return e[this.settings.labelField]},this.onKeyDown=(o=e.onKeyDown,function(e){var t,i;return 8===e.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(0<=(t=this.caretPos-1)&&t<this.items.length)?(i=this.options[this.items[t]],this.deleteSelection(e)&&(this.setTextboxValue(n.text.apply(this,[i])),this.refreshOptions(!0)),void e.preventDefault()):o.apply(this,arguments)})}),m}),function(v){v(document).on("ev-repeatable-sortable-stop",function(e,t){var i,n,o,a=v(".wp-editor-area",t).first();0!==a.length&&(i=a.attr("id"),n=a.parents(".wp-editor-wrap").first(),(o=a.clone()).removeClass("wp-editor-area"),o.removeAttr("aria-hidden"),o.removeAttr("style"),n.replaceWith(o),tinymce.remove("#"+i),o.wp_editor({}))}),v.fn.wp_editor=function(u){v(this);if(v(this).is("textarea")||console.warn("Element must be a textarea"),"undefined"!=typeof tinyMCEPreInit&&"undefined"!=typeof QTags&&"undefined"!=typeof ap_vars||console.warn("js_wp_editor( $settings ); must be loaded"),!v(this).is("textarea")||"undefined"==typeof tinyMCEPreInit||"undefined"==typeof QTags||"undefined"==typeof ap_vars)return this;var e={mode:"tmce",mceInit:{theme:"modern",skin:"lightgray",language:"en",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignleft"],deep:!1,remove:"none"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["aligncenter"],deep:!1,remove:"none"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignright"],deep:!1,remove:"none"}],strikethrough:{inline:"del",deep:!0,split:!0}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,paste_webkit_styles:"font-weight font-style color",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",wpeditimage_disable_captions:!1,wpeditimage_html5_captions:!1,plugins:"charmap,hr,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview,image",content_css:ap_vars.includes_url+"css/dashicons.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/mediaelementplayer.min.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/wp-mediaelement.css?ver=3.9,"+ap_vars.includes_url+"js/tinymce/skins/wordpress/wp-content.css?ver=3.9",selector:"#apid",resize:"vertical",menubar:!1,wpautop:!0,indent:!1,toolbar1:"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,fullscreen,wp_adv",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:":prev,:next",body_class:"apid"}},h=new RegExp("apid","g");tinyMCEPreInit.mceInit.apid&&(e.mceInit=tinyMCEPreInit.mceInit.apid);u=v.extend(!0,e,u);return void 0===switchEditors.evswitchto&&(switchEditors.evswitchto=function(e){var t=e.id,i=t.length,n=t.substr(0,i-5),o=t.substr(i-4);return this.go(n,o),!1}),this.each(function(){var i,e,t,n,o,a,r,s,l,c,d,p;v(this).is("textarea")?(i=v(this).attr("id"),v.each(u.mceInit,function(e,t){"string"==v.type(t)&&(u.mceInit[e]=t.replace(h,i))}),u.mode="tmce"==u.mode?"tmce":"html",e=v.extend({},u.mceInit,{selector:"#"+i}),tinyMCEPreInit.mceInit[i]=e,v(this).addClass("wp-editor-area").show(),v(t=this).closest(".wp-editor-wrap").length&&(n=v(this).closest(".wp-editor-wrap").parent(),v(this).closest(".wp-editor-wrap").before(v(this).clone()),v(this).closest(".wp-editor-wrap").remove(),t=n.find('textarea[id="'+i+'"]')),o=v('<div id="wp-'+i+'-wrap" class="wp-core-ui wp-editor-wrap '+u.mode+'-active" />'),a=v('<div id="wp-'+i+'-editor-tools" class="wp-editor-tools hide-if-no-js" />'),r=v('<div class="wp-editor-tabs" />'),s=v('<a id="'+i+'-html" class="ev-switch-editor switch-html" onclick="switchEditors.evswitchto(this);">'+ev_framework.editor.text+"</a>"),l=v('<a id="'+i+'-tmce" class="ev-switch-editor switch-tmce" onclick="switchEditors.evswitchto(this);">'+ev_framework.editor.visual+"</a>"),c=v('<div id="wp-'+i+'-media-buttons" class="wp-media-buttons" />'),d=v('<a href="#" id="insert-media-button" class="button insert-media add_media" data-editor="'+i+'" title="'+ev_framework.editor.add_media+'"><span class="wp-media-buttons-icon"></span> '+ev_framework.editor.add_media+"</a>"),p=v('<div id="wp-'+i+'-editor-container" class="wp-editor-container" />'),ap_vars.upload_files&&(d.appendTo(c),c.appendTo(a)),l.appendTo(r),s.appendTo(r),r.appendTo(a),a.appendTo(o),p.appendTo(o),p.append(v(t).clone().addClass("wp-editor-area")),v(t).before(o),v(t).remove(),new QTags(i),QTags._buttonsInit(),switchEditors.go(i,u.mode),v(o).on("click",".insert-media",function(e){var t=v(e.currentTarget),i=t.data("editor"),n={frame:"post",state:"insert",title:wp.media.view.l10n.addMedia,multiple:!0};e.preventDefault(),t.blur(),t.hasClass("gallery")&&(n.state="gallery",n.title=wp.media.view.l10n.createGalleryTitle),wp.media.editor.open(i,n)})):console.warn("Element must be a textarea")})}}(jQuery,window),function(l){function c(e){var t,i=l(window),n=u.test(e[0].nodeName);return{border:n?{top:0,left:0,bottom:0,right:0}:function(e,t){t=t||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var i=!(!document.defaultView||!document.defaultView.getComputedStyle),n={top:parseFloat(i?t.borderTopWidth:l.css(e,"borderTopWidth"))||0,left:parseFloat(i?t.borderLeftWidth:l.css(e,"borderLeftWidth"))||0,bottom:parseFloat(i?t.borderBottomWidth:l.css(e,"borderBottomWidth"))||0,right:parseFloat(i?t.borderRightWidth:l.css(e,"borderRightWidth"))||0};return{top:n.top,left:n.left,bottom:n.bottom,right:n.right,vertical:n.top+n.bottom,horizontal:n.left+n.right}}(e[0]),scroll:{top:(n?i:e).scrollTop(),left:(n?i:e).scrollLeft()},scrollbar:{right:n?0:e.innerWidth()-e[0].clientWidth,bottom:n?0:e.innerHeight()-e[0].clientHeight},rect:(t=e[0].getBoundingClientRect(),{top:n?0:t.top,left:n?0:t.left,bottom:n?e[0].clientHeight:t.bottom,right:n?e[0].clientWidth:t.right})}}var d={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},p={duration:"fast",direction:"both",easing:"linear",offset:0},u=/^(?:html)$/i;l.fn.extend({scrollintoview:function(t){(t=l.extend({},p,t)).direction=d["string"==typeof t.direction&&t.direction.toLowerCase()]||d.both;var e="";!0===t.direction.x&&(e="horizontal"),!0===t.direction.y&&(e=e?"both":"vertical");var i,n,o,a,r=this.eq(0),s=r.closest(":scrollable("+e+")");return 0<s.length&&(s=s.eq(0),i=c(r),n=c(s),o={top:i.rect.top-(n.rect.top+n.border.top),bottom:n.rect.bottom-n.border.bottom-n.scrollbar.bottom-i.rect.bottom,left:i.rect.left-(n.rect.left+n.border.left),right:n.rect.right-n.border.right-n.scrollbar.right-i.rect.right},a={},!0===t.direction.y&&(o.top<0?a.scrollTop=n.scroll.top+o.top:0<o.top&&o.bottom<0&&(a.scrollTop=n.scroll.top+Math.min(o.top,-o.bottom)),a.scrollTop+=parseInt(t.offset,10)),!0===t.direction.x&&(o.left<0?a.scrollLeft=n.scroll.left+o.left:0<o.left&&o.right<0&&(a.scrollLeft=n.scroll.left+Math.min(o.left,-o.right)),a.scrollLeft+=parseInt(t.offset,10)),l.isEmptyObject(a)?l.isFunction(t.complete)&&t.complete.call(s[0]):(u.test(s[0].nodeName)&&(s=l("html,body")),s.animate(a,t.duration,t.easing).eq(0).queue(function(e){l.isFunction(t.complete)&&t.complete.call(s[0]),e()}))),this}});var h={auto:!0,scroll:!0,visible:!1,hidden:!1};l.extend(l.expr[":"],{scrollable:function(e,t,i,n){var o=d["string"==typeof i[3]&&i[3].toLowerCase()]||d.both,a=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,r={x:h[a.overflowX.toLowerCase()]||!1,y:h[a.overflowY.toLowerCase()]||!1,isRoot:u.test(e.nodeName)};if(!r.x&&!r.y&&!r.isRoot)return!1;var s={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(r.x||r.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(r.y||r.isRoot)&&this.height.scroll>this.height.client}};return o.y&&s.scrollableY()||o.x&&s.scrollableX()}})}(jQuery),function(r){r.evf.history={},r.evf.history.push=function(e){history&&history.pushState&&history.pushState(null,null,e)},r.evf.history.pushQueryString=function(e,t){e=r(e);var i,n,o="",a=window.location.toString();e.attr("href")&&0===e.attr("href").indexOf("#")?o=e.attr("href"):e.attr("data-target")&&0===e.attr("data-target").indexOf("#")&&(o=e.attr("data-target")),""!==(o=o.replace("#",""))&&(""===window.location.search?a+="?"+t+"="+o:(i=window.location.search.substring(1),(n=r.deparam(i))[t]=o,a=a.replace(i,r.param(n))),r.evf.history.push(a))},r.evf.history.pushHash=function(e){var t="";(e=r(e)).attr("href")&&0===e.attr("href").indexOf("#")?t=e.attr("href"):e.attr("data-target")&&0===e.attr("data-target").indexOf("#")&&(t=e.attr("data-target")),""!==t&&r.evf.history.push(t)}}(jQuery),function(p){var r="ev-tooltip-container",e=".ev-tooltip";function s(e,t,i){var n=e.outerHeight(),o=e.outerWidth(),a=t.outerHeight()+8,r=t.outerWidth(),s={},l=e.offset().top,c=l-p(window).scrollTop();p("body").is(".admin-bar")&&(c-=p("#wpadminbar").outerHeight()),s.left=e.offset().left-r/2+o/2,t.removeClass("ev-tooltip-expand-top ev-tooltip-expand-bottom ev-tooltip-expand-left ev-tooltip-expand-right ev-tooltip-vertical ev-tooltip-horizontal");var d=i&&"vertical"!=i?"ev-tooltip-horizontal":"ev-tooltip-vertical";a<=c?(l+=2,t.addClass("ev-tooltip-expand-top"),s.top=l-a):(l-=2,t.addClass("ev-tooltip-expand-bottom"),s.top=l+n+8),t.addClass(d).css(s)}window.ev_tooltip_destroy=function(t){var e=p("body").get(0).style;"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e?p(this).on("transitionend.ev webkitTransitionEnd.ev oTransitionEnd.ev MSTransitionEnd.ev",function(e){t.remove()}):t.remove(),t.removeClass("ev-tooltip-active")},window.ev_seek_and_destroy_tooltips=function(){p("."+r).remove()},window.ev_create_tooltip=function(e,t,i){var n=p(e);if(!(void 0!==t&&t||void 0!==(t=n.attr("data-title")||n.attr("title"))&&""!==t))return!1;i=p.extend(!0,{},{class:"",mode:"horizontal"},i),ev_seek_and_destroy_tooltips();var o=r+" "+i.class,a=p('<div class="'+o+'"></div>').appendTo("body");return n.data("ev-tooltip",a),a.html(t).css({top:0,left:0}),p(window).on("resize scroll",function(){s(n,a,i.mode)}),s(n,a,i.mode),a.show(),a.addClass("ev-tooltip-active"),a},p.evf.delegate(e,"mouseover","tooltip",function(){ev_create_tooltip(p(this))}),p.evf.delegate(e,"mouseout click","tooltip",function(){var e=p(this).data("ev-tooltip");e&&window.ev_tooltip_destroy(e)}),p.evf.delegate(".ev-tooltip-container","click","tooltip",function(){window.ev_tooltip_destroy(p(this))})}(jQuery),function(t){window.Ev_MediaSelector=function(e){window.ev_ms_obj=this,window.ev_ms_obj.options=t.extend({},{title:void 0,multiple:!1,type:"",button:void 0,close:function(){},select:function(e){}},e),window.ev_ms_obj.frame=null,window.ev_ms_obj.open=function(e){var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"ev-media-selector",title:window.ev_ms_obj.options.title,allowLocalEdits:!1,displaySettings:!1,displayUserSettings:!1,multiple:window.ev_ms_obj.options.multiple,library:wp.media.query({type:window.ev_ms_obj.options.type})},wp.media.controller.Library.prototype.defaults)});window.ev_ms_obj.frame=wp.media({title:window.ev_ms_obj.options.title,button:{text:window.ev_ms_obj.options.button},state:"ev-media-selector",states:[new t]}),window.ev_ms_obj.frame.on("open",function(){var i=window.ev_ms_obj.frame.state("ev-media-selector").get("selection");i.reset(),_.each(e,function(e){var t=wp.media.attachment(e);t.fetch(),i.add(t?[t]:[])})}),window.ev_ms_obj.frame.on("select",function(){var e=window.ev_ms_obj.frame.state("ev-media-selector").get("selection"),t=window.ev_ms_obj.options.multiple?e.toJSON():e.first().toJSON();window.ev_ms_obj.options.select(t)}),window.ev_ms_obj.frame.on("close",function(){window.ev_ms_obj.options.close()}),window.ev_ms_obj.frame.open()}}}(jQuery),function(u){function d(e,p){e.each(function(d,e){u("[name]",e).each(function(){var e,t,i,n,o=u(this).attr("name"),a=new RegExp(/\[\d+\]/g),r=o.match(a),s=0;if(r&&r.length){for(var l=0;l<r.length;l++)r[l]=l===p-1?"["+d+"]":r[l];for(var c;null!==(c=a.exec(o));)e=o,t=c.index,i="["+d+"]",n=r[s].length,o=e.substr(0,t)+i+e.substr(t+n),s++;u(this).attr("name",o)}})})}u.evf.ui.add(".ev-sortable .ev-container-repeatable-inner-wrapper",function(){function n(){o=null,u("#wpbody").css("padding-bottom","")}var o=null;u(document).off("mousedown.ev_sortable").off("mouseup.ev_sortable"),u(document).on("mousedown.ev_sortable",".ev-sortable-handle",function(){!function(e){if(null!==o)return;var t=0,t=u(e).parents(".ev-bundle-fields-wrapper").length?u(e).parents(".ev-bundle-fields-wrapper").first():u(e).parents(".ev-field-inner").first();o=t.outerHeight(),u.evSaveRichTextareas(t),u("#wpbody").css("padding-bottom",o+10)}(u(this))}),u(document).on("mouseup.ev_sortable",".ev-sortable-handle",function(){n()}),u(this).sortable({handle:".ev-sortable-handle",items:"> .ev-field-inner, .ev-bundle-fields-wrapper",tolerance:"pointer",distance:10,start:function(e,t){var i={height:o};u(".ui-sortable-placeholder").css(i),n()},stop:function(e,t){var i=u(t.item).parents(".ev-sortable").first(),n=u("> .ev-field-inner, .ev-bundle-fields-wrapper",i),o=u(t.item).parents(".ev-repeatable").length;d(n,o),u(document).trigger("ev-repeatable-sortable-stop",[u(t.item)])}})}),u.evf.delegate(".ev-repeatable-remove","click","repeatable",function(){if(u(this).parents(".ev-attachment-placeholder").length)return!1;var e=u(this).parents(".ev-field").first(),t=u(".ev-container, .ev-bundle-fields-wrapper",e).first();return u(this).parents(".ev-field-inner, .ev-bundle-fields-wrapper").first().remove(),u(".ev-field-inner",t).length||e.addClass("ev-no-fields"),!1}),u.evf.delegate(".ev-repeat-remove-all","click","repeatable",function(){var e=u(this).parents(".ev-field").first(),t=u(".ev-container",e).first();return u(".ev-field-inner, .ev-bundle-fields-wrapper",t).remove(),e.addClass("ev-no-fields"),!1}),u.evf.delegate(".ev-field.ev-repeatable .ev-repeat","click","repeatable",function(){function e(i,e){var t;t=parseInt(c.attr("data-count"),10),t+=1,c.attr("data-count",t),e?"append"===e?i.insertAfter(s):"prepend"===e&&i.insertBefore(s):i.appendTo(l),u(".ev-field-inner",r).each(function(){u(".ev-repeatable-controls",this).first();var e=parseInt(c.attr("data-count"),10);u("[name]",a).each(function(){u(this).attr("name",this.name.replaceLast("[]","["+e+"]"))})});var n=u("> .ev-field-inner, .ev-bundle-fields-wrapper",l),o=u(r).parents(".ev-repeatable").length;d(n,o),r.removeClass("ev-no-fields"),setTimeout(function(){var e,t;u.evf.ui.build(),0<=(t=(e=u(e=i).get(0)).getBoundingClientRect()).top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)||u(e).scrollintoview({duration:300,direction:"vertical",offset:40})},1)}var a,t=u(this),r=t.parents(".ev-field.ev-repeatable").first(),s=t.parents(".ev-field-inner, .ev-bundle-fields-wrapper").first(),l=t.parents(".ev-container-repeatable-inner-wrapper").first(),c=u(".ev-empty-state",r),i=c.attr("data-key"),n=u("script[type='text/template'][data-template='"+i+"']"),o=t.attr("data-mode");return t.attr("data-action")?window[t.attr("data-action")](n,e):e(a=u(u.evf.template(n,{})),o),!1})}(jQuery),function(a){a.evf.delegate(".ev-close-persistent-message","click","messages",function(){return a(this).parents(".ev-persistent-message").first().remove(),!1}),window.ev_save_options_tab_button=function(e,t){return!1},window.ev_save_options_tab=function(e){a.evSaveRichTextareas(e);var t=a("form",e).first(),i=a(".ev-btn-type-save[data-callback]",t).first(),n=t.serialize().replace(/%5B%5D/g,"[]"),o=a("#ev").val();return n+="&action="+i.attr("data-callback"),n+="&nonce="+o,ev_idle_button(i),a.post(t.attr("action"),n,function(e){ev_unidle_button(i,e)},"json"),!1},a.evf.on(".ev-admin-page .ev-tab > form","submit","save-options-tab",function(){var e=a(this).parents(".ev-tab").first();return window.ev_save_options_tab(e),!1})}(jQuery),function(l){l.evf.ui.add(".ev-image-upload[data-multiple][data-sortable] .ev-image-placeholder-container",function(){l(this).sortable({items:"> .ev-image-placeholder",update:function(e,t){var i=l(e.target).parents(".ev-image-upload").first(),n=l("input[data-id]",i),o=[];l(".ev-image-placeholder",i).each(function(){o.push(l("img[data-id]",l(this)).attr("data-id"))}),n.val(o.join(","))}})}),l.evf.delegate(".ev-image-upload .ev-upload-remove","click","image_upload",function(){var e,t,i,n=l(this).parents(".ev-image-upload").first(),o=l(".ev-image-placeholder-container",n),a=void 0!==n.attr("data-multiple"),r=l("input[data-id]",n);return a?(l(this).parents(".ev-image-placeholder").first().remove(),(e=l(".ev-image-placeholder",n)).length?(t=[],e.each(function(){t.push(l("img[data-id]",l(this)).attr("data-id"))}),r.val(t.join(","))):(n.removeClass("ev-image-uploaded"),r.val(""),i=l("script[type='text/template'][data-template='ev-image-placeholder']"),o.append(l.evf.template(i,{url:"",id:""})))):(r.val(""),l("img",n).attr("src",""),n.removeClass("ev-image-uploaded")),!1}),l.evf.delegate(".ev-image-upload .ev-remove-all-action","click","image_upload",function(){var e=l(this).parents(".ev-image-upload").first(),t=l(".ev-image-placeholder",e),i=l("input[data-id]",e);return t.remove(),e.removeClass("ev-image-uploaded"),i.val(""),!1}),l.evf.delegate(".ev-image-upload .ev-edit-action, .ev-image-upload .ev-upload-action","click","image_upload",function(){var o=l(this).parents(".ev-image-upload").first(),a=l(".ev-image-placeholder-container",o),r=o.attr("data-thumb-size"),s=void 0!==o.attr("data-multiple"),e=l("input[data-id]",o).val();return new window.Ev_MediaSelector({type:"image",multiple:s,select:function(e){var t,i=l("script[type='text/template'][data-template='ev-image-placeholder']"),n="";a.html(""),s?(n=_.pluck(e,"id").join(","),l.each(e,function(){var e="";this.sizes&&this.sizes.full&&(e=this.sizes.full.url),this.sizes&&this.sizes[r]&&(e=this.sizes[r].url),a.append(l.evf.template(i,{url:e,id:this.id}))})):(t="",n=e.id,t=e.sizes&&e.sizes.full?e.sizes.full.url:e.url,e.sizes&&e.sizes[r]&&(t=e.sizes[r].url),a.append(l.evf.template(i,{url:t,id:n}))),o.addClass("ev-image-uploaded"),l("input[data-id]",o).val(n)}}).open(e.split(",")),!1})}(jQuery),function(l){l.evf.ui.add(".ev-attachment-upload-container[data-multiple][data-sortable]",function(){l(this).sortable({items:"> .ev-attachment-placeholder",update:function(e,t){var i=l(e.target),n=l("input[data-id]",i),o=[];l(".ev-attachment-placeholder",i).each(function(){o.push(l("[data-id]",l(this)).attr("data-id"))}),n.val(o.join(","))}})}),l.evf.delegate(".ev-attachment-placeholder .ev-upload-remove","click","attachment_upload",function(){var e,t,i=l(this).parents(".ev-attachment-placeholder").first(),n=l(this).parents(".ev-attachment-upload-container").first(),o=void 0!==n.attr("data-multiple"),a=l("input[data-id]",n);return i.remove(),o?(e=l(".ev-attachment-placeholder",n)).length?(t=[],e.each(function(){t.push(l("[data-id]",l(this)).attr("data-id"))}),a.val(t.join(","))):(n.removeClass("ev-attachment-uploaded"),a.val("")):(a.val(""),l("img",n).attr("src",""),n.removeClass("ev-attachment-uploaded")),!1}),l.evf.delegate(".ev-attachment-upload-container .ev-remove-all-action","click","attachment_upload",function(){var e=l(this).parents(".ev-attachment-upload-container").first(),t=l(".ev-attachment-placeholder",e),i=l("input[data-id]",e);return t.remove(),e.removeClass("ev-attachment-uploaded"),i.val(""),!1}),l.evf.delegate(".ev-attachment-upload-container .ev-edit-action, .ev-attachment-upload-container .ev-upload-action","click","attachment_upload",function(){var r=l(this).parents(".ev-attachment-upload-container").first(),e=r.attr("data-type"),s=(r.attr("data-thumb-size"),void 0!==r.attr("data-multiple")),t=l("input[data-id]",r).val();return new window.Ev_MediaSelector({type:e,multiple:s,select:function(e){var t,i,n="",o=l(".ev-attachment-upload-action",r),a=l("script[type='text/template'][data-template='ev-attachment-placeholder']");l(".ev-attachment-placeholder",r).remove(),s?(n=_.pluck(e,"id").join(","),l.each(e,function(){var e=this.url.split(/[\\/]/).pop()+" ("+this.filesizeHumanReadable+")",t=this.type;this.subtype&&(t+="-"+this.subtype),o.before(l.evf.template(a,{type:t,id:this.id,title:this.title,extension:e,url:this.url}))})):(n=e.id,t=e.url.split(/[\\/]/).pop()+" ("+e.filesizeHumanReadable+")",i=e.type,e.subtype&&(i+="-"+e.subtype),o.before(l.evf.template(a,{type:i,id:n,title:e.title,extension:t,url:e.url}))),r.addClass("ev-attachment-uploaded"),l("input[data-id]",r).val(n)}}).open(t.split(",")),!1})}(jQuery),function(s){s.evf.ui.add("select.ev-multiple-select-input-ajax",function(){s(this).each(function(){var i=s(this).attr("data-action"),e=s(this).attr("data-value-field"),t=s(this).attr("data-label-field"),n=s(this).attr("data-search-field"),o=s(this).attr("data-nonce"),a=s(this).attr("data-max")?parseInt(s(this).attr("data-max"),10):1e3,r=s(this).attr("data-create")?parseInt(s(this).attr("data-create"),10):0;s(this).selectize({plugins:["remove_button","drag_drop"],valueField:e,labelField:t,searchField:[n],dropdownParent:"body",create:r,maxItems:a,onDropdownOpen:function(e){s(e).addClass("ev-multiple-select")},load:function(e,t){if(!e.length)return t();s.ajax({url:ajaxurl,type:"POST",data:{action:i,search:e,nonce:o},error:function(){t()},success:function(e){t(s.parseJSON(e))}})},render:{item:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"},option:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"}}})})}),s.evf.ui.add("input.ev-multiple-select-input",function(){s(this).each(function(){var e=s.parseJSON(s(this).attr("data-options")),t=s(this).attr("data-max")?parseInt(s(this).attr("data-max"),10):e.length+1;s(this).selectize({plugins:["remove_button","drag_drop"],options:e,valueField:"val",labelField:"label",searchField:["label"],dropdownParent:"body",maxItems:t,create:!1,onDropdownOpen:function(e){s(e).addClass("ev-multiple-select")},render:{item:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.label),i+="</div>"},option:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.label),i+="</div>"}}})})})}(jQuery),function(c){c.evf.delegate(".ev-color-preset","click","color",function(){var e=c(this).parents(".ev-color-presets-manager-wrapper").first(),t=c("[data-hex-value-input]",e);return c(this).hasClass("ev-selected")?(c(this).removeClass("ev-selected"),t.val("")):(c(".ev-selected",e).removeClass("ev-selected"),c(this).addClass("ev-selected"),t.val(c(this).attr("data-hex"))),!1}),c.evf.delegate("[data-color-delete-preset]","click","color",function(){var e=c(this),t=c(this).parents(".ev-color-preset").first(),i=t.attr("data-id"),n=c(this).parents(".ev-color-user-presets").first(),o=c(this).parents(".ev-color-presets-wrapper").first();return i&&(t.remove(),window.ev_seek_and_destroy_tooltips(),c(".ev-color-preset",o).length||c("body").removeClass("ev-has-color-presets"),c(".ev-color-preset",n).length?n.addClass("ev-color-has-user-presets"):n.removeClass("ev-color-has-user-presets"),ev_framework.color.presets=_.without(ev_framework.color.presets,_.findWhere(ev_framework.color.presets,{user:!0,id:i})),c.post(ajaxurl,{action:"ev_color_delete_preset",nonce:e.attr("data-nonce"),id:i},function(e){})),!1}),c.evf.delegate("[data-color-save-preset]","click","color",function(){var t=c(this),e=t.parents(".ev-color-wrapper").first(),i=c(".ev-color-input",e).val();if(i){var n=prompt(ev_framework.color.new_preset_name);if(!n)return!1;ev_idle_button(t),c.post(ajaxurl,{action:"ev_color_save_preset",nonce:t.attr("data-nonce"),hex:i,name:n,id:ev_framework.color.presets.length+1},function(e){ev_framework.color.presets.user||(ev_framework.color.presets.user=[]),ev_framework.color.presets.user.push({user:!0,hex:i,label:n}),c("body").addClass("ev-has-color-presets"),ev_unidle_button(t)})}return!1}),c.evf.delegate("[data-color-presets]","click","color",function(){var a=c(this),e=a.parents(".ev-color-wrapper").first(),r=c(".ev-color-input",e),s=r.attr("data-opacity"),l=c("[data-input-color-opacity]",e),t={hex:r.val()};return new c.evf.modal("ev-color-presets",t,{simple:!0,save:function(e,t,i){var n,o;e.hex&&(s&&(-1===e.hex.indexOf("#")?l.val((o=(o=(o=(o=(o=e.hex).replace("rgba(","")).replace(")","")).replace(" ","")).split(","))[o.length-1]):l.val("1"),r.attr("data-opacity",l.val())),s||-1===e.hex.indexOf("rgba(")||(e.hex=(n=(n=e.hex).match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===n.length?"#"+("0"+parseInt(n[1],10).toString(16)).slice(-2)+("0"+parseInt(n[2],10).toString(16)).slice(-2)+("0"+parseInt(n[3],10).toString(16)).slice(-2):""),r.val(e.hex).trigger("keyup"))}}).open(function(t,e,i){var n={action:"ev_color_presets_modal_load",nonce:a.attr("data-nonce"),data:i},o=".ev-modal-container[data-key='"+e+"']";c(o+" .ev-modal-wrapper").addClass("ev-loading"),c.post(ajaxurl,n,function(e){e=c(e),c(o+" .ev-modal-wrapper").removeClass("ev-loading"),t.html(e),setTimeout(function(){c.evf.ui.build()},1)})}),!1}),c.evf.ui.add("input.ev-color-input",function(){c(this).each(function(){var i=c(this),n=i.parents(".ev-color-wrapper").first(),o=i.attr("data-opacity"),e={control:"wheel",change:function(e,t){i.css("border-color",e),void 0!==o&&c("[data-input-color-opacity]",n).val(t),""!==e?n.addClass("ev-color-can-be-saved"):n.removeClass("ev-color-can-be-saved")}};void 0!==o&&(e.opacity=!0,e.format="rgb"),c(this).minicolors(e).trigger("change")})})}(jQuery),function(t){window.evf_ui_rich_textareas=0,t.evf.ui.add("textarea.ev-rich",function(){t(this).each(function(){window.evf_ui_rich_textareas++;var e=t(this).attr("id");e=(e=e.replace(/\[/g,"_")).replace(/\]/g,"_"),t(this).attr("id",e+"-"+window.evf_ui_rich_textareas),t(this).wp_editor()})})}(jQuery),function(r){r.evf.delegate(".ev-selected-icon-wrapper","click","icon",function(){var a=r(this),n=a.parents(".ev-field").first(),o=r(".ev-selected-icon-wrapper",n),e={prefix:r("[data-prefix]",n).val(),set:r("[data-set]",n).val(),icon:r("[data-icon]",n).val(),color:r("[data-color]",n).val(),size:r("[data-size]",n).val()};return new r.evf.modal("ev-icon",e,{simple:!0,save:function(e,t,i){r("[data-prefix]",n).val(e.prefix),r("[data-set]",n).val(e.set),r("[data-icon]",n).val(e.icon),r("[data-color]",n).val(e.color.color),r("[data-size]",n).val(e.size),r("[data-preview]",n).attr("class","").css("color",""),r("[data-preview]",n).attr("class","ev-icon ev-component "+e.prefix+" "+e.icon).css("color",e.color.color),e.icon?o.removeClass("ev-empty"):o.addClass("ev-empty")}}).open(function(t,e,i){var n={action:"ev_icon_modal_load",data:i,nonce:a.attr("data-nonce")},o=".ev-modal-container[data-key='"+e+"']";r(o+" .ev-modal-wrapper").addClass("ev-loading"),r.post(ajaxurl,n,function(e){e=r(e),r(o+" .ev-modal-wrapper").removeClass("ev-loading"),t.html(e),r("[data-icon-search]",t).focus(),setTimeout(function(){r.evf.ui.build()},1)})}),!1}),r.evf.delegate(".ev-icon-remove","click","icon",function(){var e=r(this).parents(".ev-field").first();return r(".ev-selected-icon-wrapper",e).addClass("ev-empty"),r("[data-prefix]",e).val(""),r("[data-set]",e).val(""),r("[data-icon]",e).val(""),r("[data-color]",e).val(""),r("[data-size]",e).val(""),r("[data-preview]",e).attr("class","ev-icon ev-component").css("color",""),!1}),r.evf.delegate("input[data-icon-search]","keydown","icon",function(e){if(13==e.which)return!1}),r.evf.delegate("input[data-icon-search]","keyup","icon",function(){var e,t=r(this).parents(".ev-icon-sets-external-wrapper").first(),i=r(this).val(),n=r(".ev-icon",t);""!=i?r(".ev-icon-sets",t).addClass("ev-searching"):r(".ev-icon-sets",t).removeClass("ev-searching"),n.removeClass("ev-found"),n=n.filter('[data-icon-stripped*="'+i+'"]').addClass("ev-found"),r(".ev-icon-search-results",t).addClass("ev-search-icon-results-visible"),n.length?(e=1<n.length?2:1,r(".ev-icon-search-results",t).html(ev_icon_field[e].replace("%s",n.length))):""!=i?r(".ev-icon-search-results",t).html(ev_icon_field[0]):r(".ev-icon-search-results",t).removeClass("ev-search-icon-results-visible")}),r.evf.delegate(".ev-icon-sets i","click","icon",function(){var e=r(this),t=r(this).parents(".ev-icon-sets-external-wrapper").first(),i=r(".ev-icon",t),n=r("[name='color[color]']",t).val(),o=r("[data-icon-size]",t).val(),a=r(".ev-selected-icon-preview",t);i.removeClass("ev-found ev-selected"),e.addClass("ev-selected"),r(".ev-icon-sets",t).removeClass("ev-searching"),r("[data-icon-prefix]",t).val(e.attr("data-prefix")),r("[data-icon-set]",t).val(e.attr("data-set")),r("[data-icon-name]",t).val(e.attr("data-icon-name")),a.removeAttr("class").attr("class","ev-selected-icon-preview ev-icon ev-component "+e.attr("data-prefix")+" "+e.attr("data-icon-name")).css({color:n,"font-size":o}),r("input[data-icon-search]",t).val(""),r(".ev-icon-search-results",t).html("").removeClass("ev-search-icon-results-visible")}),r.evf.delegate(".ev-icon-sets-controls-field-wrapper [name='color[color]']","change","icon",function(){var e=r(this).parents(".ev-icon-sets-external-wrapper").first();r(".ev-selected-icon-preview",e).css({color:r(this).val()})}),r.evf.delegate(".ev-icon-sets-controls-field-wrapper [name='size']","input","icon",function(){var e=r(this).parents(".ev-icon-sets-external-wrapper").first();r(".ev-selected-icon-preview",e).css({"font-size":r(this).val()})})}(jQuery),function(h){function v(e){switch(e.attr("data-type")){case"radio":return h("input[type='radio'][name]:checked",e).first();case"select":return h("select[name]",e).first();case"checkbox":return h("input[type='checkbox'][name]",e).first()}return!1}function s(e){var t=e.parents(".ev-tab-container").first();e.parents(".ev-field-bundle").length&&(t=e.parents(".ev-field-bundle").first());var i=e.attr("data-slave"),n=h("[data-controller='"+i+"']",t),o=v(n);if(o){var a=o.val();o.is("[type='checkbox']")&&(a=o.is(":checked")?"1":"0");var r=e.attr("data-controller-value");if(-1!=r.indexOf(","))-1==(r=r.split(",")).indexOf(a)||n.hasClass("ev-hidden")?(e.addClass("ev-hidden"),h("[data-slave='"+e.attr("data-controller")+"']",t).addClass("ev-hidden")):(e.removeClass("ev-hidden"),h("[data-slave='"+e.attr("data-controller")+"']",t).removeClass("ev-hidden"));else{var s=!0;if(-1!==r.indexOf("!="))s=(r=r.replace("!=",""))==a;else if(0===r.indexOf("count")){var l,c,d=r.charAt(5),p=r.split(d),u=!1,p=isNaN(p)?(l=""+r,c=parseInt(l.match(/\d+/)[0],10),u=(u=(u=l.replace(c,"")).replace("count","")).replace(d,""),c):parseInt(p[1],10);if(-1!==a.indexOf(d))if(u)switch(u){case">":s=a.split(d).length<=p;break;case"<":s=a.split(d).length>=p}else s=a.split(d).length!=p;else s=!0}else s=r!=a;s||n.hasClass("ev-hidden")?(e.addClass("ev-hidden"),h("[data-slave='"+e.attr("data-controller")+"']",t).addClass("ev-hidden")):(e.removeClass("ev-hidden"),h("[data-slave='"+e.attr("data-controller")+"']",t).removeClass("ev-hidden"))}e.is("[data-controller]")&&v(e).trigger("change")}}h.evf.delegate(".ev-help-popup .ev-help-handle","click","field",function(){var n=h(".ev-help-popup-text",this).html();return new h.evf.modal("ev-help-popup",{},{simple:!0}).open(function(e,t,i){e.html(n)}),!1}),h.evf.ui.add("[data-slave]",function(){h(this).each(function(){s(h(this))})}),h.evf.delegate("[data-controller] :input","change","field",function(){var e,t,i,n,o,a,r=h(this).parents(".ev-field").first();h(this).is(v(r))&&(e=r.parents(".ev-tab-container").first(),r.parents(".ev-field-bundle").length&&(e=r.parents(".ev-field-bundle").first()),h(this).val(),t=h(this).parents("[data-controller]").first().attr("data-controller"),(i=h("[data-slave='"+t+"']",e)).each(function(){s(h(this))}),n=i.not(".ev-hidden").last(),o=h(this).parents(".ev-tabs").first(),n.length&&o.length&&o.css("overflow-y")&&(a=n.position().top+2*n.outerHeight(),o.get(0).scrollTop=a))})}(jQuery),function(s){s(document).on("input.ev_link",".ev-link-input-wrapper input",function(){""!==s(this).val()?s(this).parent().addClass("ev-not-empty"):s(this).parent().removeClass("ev-not-empty")}),s.evf.delegate(".ev-link-ctrl-btn","click","link",function(){var n=s(this),a=s(this).parents(".ev-link-ctrl").first(),r={url:s("[data-link-url]",a).val(),target:s("[data-link-target]",a).val(),rel:s("[data-link-rel]",a).val(),title:s("[data-link-title]",a).val(),class:s("[data-link-class]",a).val()};return new s.evf.modal("ev-link",r,{simple:!0,close:function(){s(window).off("keydown.ev_link")},save:function(e,t,i){s("[data-link-url]",a).val(e.url),s("[data-link-target]",a).val(e.target),s("[data-link-rel]",a).val(e.rel),s("[data-link-title]",a).val(e.title),s("[data-link-class]",a).val(e.class),n.removeClass("ev-link-on"),""!=e.url&&n.addClass("ev-link-on")}}).open(function(t,e,i){var n={action:"ev_link_modal_load",nonce:a.attr("data-nonce"),data:i},o=".ev-modal-container[data-key='"+e+"']";(i.rel||r.title||r.class)&&s(o).addClass("ev-link-modal-expanded"),s(o+" .ev-modal-wrapper").addClass("ev-loading"),s(window).off("keydown.ev_link"),s(window).on("keydown.ev_link",function(e){if(9==e.which)return s('.ev-modal-container[data-key="ev-link"]').addClass("ev-link-modal-expanded"),s(window).off("keydown.ev_link"),!1}),s.post(ajaxurl,n,function(e){e=s(e),s(o+" .ev-modal-wrapper").removeClass("ev-loading"),t.html(e),setTimeout(function(){s.evf.ui.build()},1)})}),!1}),s.evf.ui.add(".ev-link-input-wrapper input",function(){s(this).trigger("input.ev_link")}),s.evf.ui.add(".ev-link-url-wrapper [name='url']",function(){var i=s(this).attr("data-nonce");s(this).selectize({plugins:[],valueField:"id",labelField:"text",searchField:["text"],dropdownParent:"body",create:!0,createOnBlur:!0,maxItems:1,onDropdownOpen:function(e){s(e).addClass("ev-multiple-select")},load:function(e,t){if(!e.length||/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e))return t();s.ajax({url:ajaxurl,type:"POST",data:{action:"ev_link_search_entries",search:e,nonce:i},error:function(){t()},success:function(e){t(s.parseJSON(e))}})},render:{item:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"},option:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"},option_create:function(e,t){return'<div class="ev-link-create create">'+ev_framework.link.create+"</div>"}}}),s(this).get(0).selectize.focus()})}(jQuery),function(o){var a="ev-btn-idle";function r(e,t){var i=!1;o(e).addClass("ev-btn-complete"),t&&(o(e).addClass("ev-btn-"+t.type),i=ev_create_tooltip(e,t.message,{class:"ev-tooltip-response-"+t.type})),setTimeout(function(){o(e).removeAttr("data-title"),o(e).removeClass("ev-btn-complete"),t&&(i&&ev_tooltip_destroy(i),o(e).removeClass("ev-btn-"+t.type))},1500)}window.ev_idle_button=function(e){o(e).addClass(a).attr("disabled","disabled").trigger("start.ev_button")},window.ev_unidle_button=function(t,i){var n,e=o("body").get(0).style;"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e?(n="transitionend.ev webkitTransitionEnd.ev oTransitionEnd.ev MSTransitionEnd.ev",o(t).on(n,function(e){o(t).off(n),r(t,i)})):r(t,i),o(t).removeClass(a).removeAttr("disabled").trigger("done.ev_button")}}(jQuery),function(e){e.evf.ui.add(".ev-date-input",function(){e(this).each(function(){e(this).datepicker({dateFormat:e(this).attr("data-format"),dayNamesShort:ev_date_field.dayNamesShort,dayNames:ev_date_field.dayNames,monthNamesShort:ev_date_field.monthNamesShort,monthNames:ev_date_field.monthNames,prevText:ev_date_field.prevText,nextText:ev_date_field.nextText,showAnim:"",beforeShow:function(e,t){t.dpDiv.addClass("ev-datepicker-dropdown")}})})})}(jQuery);