"use strict";if(function(s){function o(e){return/string|number|boolean/.test(typeof e)}s.evExtendObject=function(e,i){if(o(e))return e;var n=e;return s.each(i,function(e,t){void 0===n[e]?o(i[e])?n[e]=t:n[e]={}:o(n[e])&&(n[e]=s.evExtendObject(n[e],i[e]))}),n},s.evSaveRichTextareas=function(e){"undefined"!=typeof tinymce&&s(".ev-rich",e).each(function(){tinymce.get(this.id).save()})},s.fn.serializeObject=function(){var o=this,a={},t={},r={validate:/^[a-zA-Z_][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(e,t,i){return e[t]=i,e},this.push_counter=function(e){return void 0===t[e]&&(t[e]=0),t[e]++},s.each(s(this).serializeArray(),function(){if(r.validate.test(this.name)){for(var e,t=this.name.match(r.key),i=this.value,n=this.name;void 0!==(e=t.pop());)n=n.replace(new RegExp("\\["+e+"\\]$"),""),e.match(r.push)?i=o.build([],o.push_counter(n),i):e.match(r.fixed)?i=o.build([],e,i):e.match(r.named)&&(i=o.build({},e,i));a=s.extend(!0,a,i)}}),s.each(a,function(e,t){a[e].push&&(a[e]=a[e].filter(function(e){return null!=e&&~e}))}),a}}(jQuery),function(u){"function"!=typeof u.deparam&&(u.deparam=function(e,c){var d={},p={true:!0,false:!1,null:null};return u.each(e.replace(/\+/g," ").split("&"),function(e,t){var i,n=t.split("="),o=decodeURIComponent(n[0]),a=d,r=0,s=o.split("]["),l=s.length-1;if(l=/\[/.test(s[0])&&/\]$/.test(s[l])?(s[l]=s[l].replace(/\]$/,""),(s=s.shift().split("[").concat(s)).length-1):0,2===n.length)if(i=decodeURIComponent(n[1]),c&&(i=i&&!isNaN(i)?+i:"undefined"===i?void 0:void 0!==p[i]?p[i]:i),l)for(;r<=l;r++)a=a[o=""===s[r]?a.length:s[r]]=r<l?a[o]||(s[r+1]&&isNaN(s[r+1])?{}:[]):i;else u.isArray(d[o])?d[o].push(i):void 0!==d[o]?d[o]=[d[o],i]:d[o]=i;else o&&(d[o]=c?void 0:"")}),d})}(jQuery),"function"!=typeof String.prototype.replaceLast&&(String.prototype.replaceLast=function(e,t){var i=this.lastIndexOf(e);return 0<=i?this.substring(0,i)+t+this.substring(i+e.length):this.toString()}),"undefined"==typeof jQuery)throw new Error("jQuery is required.");!function(o){o.evf={componentID:".ev-component",namespace:".evf",ui:{event:"ui-build",signature:"ev-ui",components:[],components_count:0,components_built:0,add:function(e,t){o.evf.ui.components.push({selector:e,callback:t}),o.evf.ui.components_count++},do_build:function(){o.each(o.evf.ui.components,function(){o.evf.ui.components_built++;var e=this.selector,t=this.callback,i=o(e);(i=i.filter(function(){return"1"!==o(this).attr("data-"+o.evf.ui.signature)})).length&&(i.attr("data-"+o.evf.ui.signature,"1"),t.call(i)),o.evf.ui.end_build()})},end_build:function(){o.evf.ui.components_count===o.evf.ui.components_built&&setTimeout(function(){o(".ev-tab-container").addClass("ev-tab-container-loaded")},5)},build:function(){o.evf.ui.components_built=0,o.evf.ui.do_build(),o(window).trigger(o.evf.resolveEventName(o.evf.ui.event,o.evf.namespace))}},resolveNamespace:function(e){return""!==e&&-1===e.indexOf(".")&&(e="."+e),o.evf.namespace+e},resolveEventName:function(e,t){var i="";return o.each(e.split(" "),function(){i+=" "+this+o.evf.resolveNamespace(t)}),i=i.trim()},on:function(e,t,i,n){o(e).on(o.evf.resolveEventName(t,i),n)},one:function(e,t,i,n){o(e).one(o.evf.resolveEventName(t,i),n)},delegate:function(e,t,i,n){o(document).on(o.evf.resolveEventName(t,i),e,n)},undelegate:function(e,t){o(document).off(o.evf.resolveEventName(e,t))},template:function(e,t){if("undefined"==typeof _)throw new Error("Underscore is required.");var i=e;if("string"==typeof e&&(i=o("script[type='text/template'][data-template='"+e+"']")),!i.length)throw new Error("Template '"+e+"' not found.");var n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return parseFloat(ev_framework.wp_version)<4.5?_.template(i.html(),t,n):_.template(i.html(),n)(t)}},o(document).on("ready",function(){o.evf.ui.build(),o.evf.tabs(".ev-tabs"+o.evf.componentID),o.evf.accordion(".ev-accordion"+o.evf.componentID)})}(jQuery),function(r){r.evf.key=function(i,n,o){if("function"!=typeof n)throw new Error("Callback is not a function.");o=r.extend({stop:!0,namespace:"ev",one:!1},o);var a={enter:13,left:37,up:38,right:39,down:40,esc:27,space:32,backspace:8,tab:9},e="ev";o.namespace&&(e="."+o.namespace);var t=function(e){if(a[i]&&e.which===a[i]){var t=n(e);if(void 0!==t)return t;if(o.stop)return!1}return!0};o.one?r(window).one("keydown."+e,t):r(window).on("keydown."+e,t)}}(jQuery),function(p){p.evf.tabs=function(c,d){function e(e,i){var t=null,n=p(i);if(1<p(d.triggersClass+"[id='"+n[0].id+"']").length&&0==n.parents(".ev-tabs").length)return p(d.triggersClass).removeClass(d.activeClass).removeAttr("aria-selected"),p(d.triggersClass+"[id='"+n[0].id+"']").not(n).trigger(d.eventTrigger+"."+d.namespace),n.addClass(d.activeClass).attr("aria-selected","true"),!1;"object"==typeof c?t=p(e):"string"==typeof c&&(t=n.parents(e).first());var o=p("> "+d.navClass,t),a=p(d.triggersClass,o),r=p("> "+d.panelsContainerClass,t),s=p("> "+d.tabsClass,r),l=0;switch(a.each(function(e,t){this===i&&(l=e)}),t.data("push")){case"hash":p.evf.history.pushHash(n);break;case"querystring":p.evf.history.pushQueryString(n,"tab")}return t.trigger(p.evf.resolveEventName("switch",d.namespace)),a.removeClass(d.activeClass).removeAttr("aria-selected"),s.removeClass(d.activeClass).attr("aria-hidden","true"),n.addClass(d.activeClass).attr("aria-selected","true"),s.eq(l).addClass(d.activeClass).removeAttr("aria-hidden"),t.trigger(p.evf.resolveEventName("switched",d.namespace)),!1}if(d=p.extend({namespace:"tabs",navClass:".ev-tabs-nav",triggersClass:".ev-tab-trigger",panelsContainerClass:".ev-tab-container",tabsClass:".ev-tab",activeClass:"ev-active",eventTrigger:"click"},d),"object"==typeof c?p.evf.on(d.triggersClass,d.eventTrigger,d.namespace,function(){return e(c,this)}):"string"==typeof c&&p.evf.delegate(d.triggersClass,d.eventTrigger,d.namespace,function(){return e(c,this)}),""!=window.location.hash){var t=d.triggersClass+"[href='"+window.location.hash+"']";t+=","+d.triggersClass+"[data-target='"+window.location.hash+"']",p(t).trigger(p.evf.resolveEventName(d.eventTrigger,d.namespace))}}}(jQuery),function(d){d.evf.accordion=function(l,c){function e(e,i){var t=null,n=d(i);"object"==typeof l?t=d(e):"string"==typeof l&&(t=n.parents(e).first());var o=!1!==c.mode?c.mode:t.attr("data-mode"),a=d(c.triggersClass,t),r=d(c.toggleClass,t),s=0;switch(a.each(function(e,t){this===i&&(s=e)}),t.data("push")){case"hash":d.evf.history.pushHash(n);break;case"querystring":d.evf.history.pushQueryString(n,"toggle")}return t.trigger(d.evf.resolveEventName("switch",c.namespace)),"toggle"!==o?"true"==n.attr("aria-selected")?(n.removeAttr("aria-selected"),r.eq(s).removeClass(c.activeClass).attr("aria-hidden","true")):(a.removeAttr("aria-selected"),n.attr("aria-selected","true"),r.removeClass(c.activeClass).attr("aria-hidden","true"),r.eq(s).addClass(c.activeClass).removeAttr("aria-hidden")):"true"==n.attr("aria-selected")?(n.removeAttr("aria-selected"),r.eq(s).removeClass(c.activeClass).attr("aria-hidden","true")):(n.attr("aria-selected","true"),r.eq(s).addClass(c.activeClass).removeAttr("aria-hidden")),t.trigger(d.evf.resolveEventName("switched",c.namespace)),!1}if(c=d.extend({namespace:"accordion",accordionClass:".ev-accordion",toggleClass:".ev-toggle",triggersClass:".ev-toggle-trigger",contentClass:".ev-toggle-content",activeClass:"ev-active",eventTrigger:"click focus",mode:!1},c),"object"==typeof l?d.evf.on(c.triggersClass,c.eventTrigger,c.namespace,function(){return e(l,this)}):"string"==typeof l&&d.evf.delegate(c.triggersClass,c.eventTrigger,c.namespace,function(){return e(l,this)}),""!=window.location.hash){var t=c.triggersClass+"[href='"+window.location.hash+"']";t+=","+c.triggersClass+"[data-target='"+window.location.hash+"']",d(t).trigger(d.evf.resolveEventName(c.eventTrigger,c.namespace))}}}(jQuery),function(l){l.evf.delegate(".ev-modal-close","click","modal",function(e){return l(this).parents(".ev-modal-container").first().data("ev-modal").close(),!1}),l.evf.key("esc",function(){var e=l(".ev-modal-container");if(e.length)return e.last().data("ev-modal").close(),!1}),l.evf.modal=function(o,a,r){r=l.extend({save:function(){},close:function(){},class:"",wait:!1,simple:!1},r);var s=this;s.config=r,this.close=function(){r.close(),l(".ev-modal-container[data-key='"+o+"']").nextAll(".ev-modal-container").remove(),l(".ev-modal-container[data-key='"+o+"']").remove(),l(".ev-modal-container").length||l("body").removeClass("ev-modal-open"),l(window).trigger("ev-modal-close")},this.save=function(e){var t=l(".ev-modal-container[data-key='"+o+"']"+" .ev-modal-footer .ev-save").attr("data-nonce");r.wait?r.save(e,this.close,t):(r.save(e,null,t),this.close())},this.open=function(e){if("function"!=typeof e)throw new Error("Content is not a function.");var t=".ev-modal-container[data-key='"+o+"']";l(t).remove();var i=r.class;r.simple&&(i+=" ev-modal-container-simple");var n='<div class="ev-modal-container '+i+'" data-key="'+o+'">';n+='<div class="ev-modal-wrapper">',n+='<a class="ev-modal-close" href="#"><i data-icon="ev-modal-close" class="ev-icon ev-component" aria-hidden="true"></i></a>',n+='<div class="ev-modal-wrapper-inner">',n+="</div>",n+="</div>",n=l(n+="</div>"),l("body").hasClass("ev-modal-open")?l(".ev-modal-container").last().after(n):(n.appendTo(l("#ev-modals-container")),l("body").addClass("ev-modal-open")),l(".ev-modal-container").last().data("ev-modal",s),e(l(t+" .ev-modal-wrapper-inner"),o,a)},this.init=function(){var e=".ev-modal-container[data-key='"+o+"']",t=e+" .ev-modal-footer .ev-save",i=e+" form",n="modal-form-"+o;l.evf.undelegate("submit",n),l.evf.undelegate("click",n),l.evf.delegate(t,"click",n,function(){return l(i).trigger("submit."+n),!1}),l.evf.delegate(i,"submit",n,function(){return l.evSaveRichTextareas(this),ev_idle_button(l(t)),s.save(l(this).serializeObject()),l.evf.undelegate("submit",n),l.evf.undelegate("click",n),!1})},this.init()}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(S){function c(e){var t=e.parent();e.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),t.before(e).remove()}function d(e){var t=e.parent(),i=t.find(".minicolors-panel"),n=e.data("minicolors-settings");!e.data("minicolors-initialized")||e.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus")||(p(),t.addClass("minicolors-focus"),i.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(e.get(0))}))}function p(){S(".minicolors-focus").each(function(){var e=S(this),t=e.find(".minicolors-input"),i=e.find(".minicolors-panel"),n=t.data("minicolors-settings");i.fadeOut(n.hideSpeed,function(){n.hide&&n.hide.call(t.get(0)),e.removeClass("minicolors-focus")})})}function i(e,t,i){var n,o,a,r,s=e.parents(".minicolors").find(".minicolors-input"),l=s.data("minicolors-settings"),c=e.find("[class$=-picker]"),d=e.offset().left,p=e.offset().top,u=Math.round(t.pageX-d),h=Math.round(t.pageY-p),v=i?l.animationSpeed:0;t.originalEvent.changedTouches&&(u=t.originalEvent.changedTouches[0].pageX-d,h=t.originalEvent.changedTouches[0].pageY-p),u<0&&(u=0),h<0&&(h=0),u>e.width()&&(u=e.width()),h>e.height()&&(h=e.height()),e.parent().is(".minicolors-slider-wheel")&&c.parent().is(".minicolors-grid")&&(n=75-u,o=75-h,a=Math.sqrt(n*n+o*o),(r=Math.atan2(o,n))<0&&(r+=2*Math.PI),75<a&&(u=(a=75)-75*Math.cos(r),h=75-75*Math.sin(r)),u=Math.round(u),h=Math.round(h)),e.is(".minicolors-grid")?c.stop(!0).animate({top:h+"px",left:u+"px"},v,l.animationEasing,function(){f(s,e)}):c.stop(!0).animate({top:h+"px"},v,l.animationEasing,function(){f(s,e)})}function f(e,t){function i(e,t){var i,n;return e.length&&t?(i=e.offset().left,n=e.offset().top,{x:i-t.offset().left+e.outerWidth()/2,y:n-t.offset().top+e.outerHeight()/2}):null}var n,o,a,r,s,l,c,d=e.val(),p=e.attr("data-opacity"),u=e.parent(),h=e.data("minicolors-settings"),v=u.find(".minicolors-input-swatch"),f=u.find(".minicolors-grid"),g=u.find(".minicolors-slider"),m=u.find(".minicolors-opacity-slider"),w=f.find("[class$=-picker]"),y=g.find("[class$=-picker]"),b=m.find("[class$=-picker]"),C=i(w,f),_=i(y,g),x=i(b,m);if(t.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(h.control){case"wheel":r=f.width()/2-C.x,s=f.height()/2-C.y,l=Math.sqrt(r*r+s*s),(c=Math.atan2(s,r))<0&&(c+=2*Math.PI),75<l&&(l=75,C.x=69-75*Math.cos(c),C.y=69-75*Math.sin(c)),o=A(l/.75,0,100),d=M({h:n=A(180*c/Math.PI,0,360),s:o,b:a=A(100-Math.floor(_.y*(100/g.height())),0,100)}),g.css("backgroundColor",M({h:n,s:o,b:100}));break;case"saturation":d=M({h:n=A(parseInt(C.x*(360/f.width()),10),0,360),s:o=A(100-Math.floor(_.y*(100/g.height())),0,100),b:a=A(100-Math.floor(C.y*(100/f.height())),0,100)}),g.css("backgroundColor",M({h:n,s:100,b:a})),u.find(".minicolors-grid-inner").css("opacity",o/100);break;case"brightness":d=M({h:n=A(parseInt(C.x*(360/f.width()),10),0,360),s:o=A(100-Math.floor(C.y*(100/f.height())),0,100),b:a=A(100-Math.floor(_.y*(100/g.height())),0,100)}),g.css("backgroundColor",M({h:n,s:o,b:100})),u.find(".minicolors-grid-inner").css("opacity",1-a/100);break;default:d=M({h:n=A(360-parseInt(_.y*(360/g.height()),10),0,360),s:o=A(Math.floor(C.x*(100/f.width())),0,100),b:a=A(100-Math.floor(C.y*(100/f.height())),0,100)}),f.css("backgroundColor",M({h:n,s:100,b:100}))}k(e,d,p=h.opacity?parseFloat(1-x.y/m.height()).toFixed(2):1)}else v.find("span").css({backgroundColor:d,opacity:p}),I(e,d,p)}function k(e,t,i){var n,o=e.parent(),a=e.data("minicolors-settings"),r=o.find(".minicolors-input-swatch");a.opacity&&e.attr("data-opacity",i),t="rgb"===a.format?(n=D(t)?z(t,!0):N(j(t,!0)),i=""===e.attr("data-opacity")?1:A(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),(isNaN(i)||!a.opacity)&&(i=1),e.minicolors("rgbObject").a<=1&&n&&a.opacity?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(i)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):(D(t)&&(t=P(t)),T(t,a.letterCase)),e.val(t),r.find("span").css({backgroundColor:t,opacity:i}),I(e,t,i)}function u(e,t){var i,n,o,a,r,s,l,c,d,p,u,h,v,f,g,m,w=e.parent(),y=e.data("minicolors-settings"),b=w.find(".minicolors-input-swatch"),C=w.find(".minicolors-grid"),_=w.find(".minicolors-slider"),x=w.find(".minicolors-opacity-slider"),k=C.find("[class$=-picker]"),O=_.find("[class$=-picker]"),$=x.find("[class$=-picker]");switch(D(e.val())?(i=P(e.val()),(r=A(parseFloat(E(e.val())).toFixed(2),0,1))&&e.attr("data-opacity",r)):i=T(j(e.val(),!0),y.letterCase),i||(i=T(F(y.defaultValue,!0),y.letterCase)),h=N(i),v={h:0,s:0,b:0},f=Math.min(h.r,h.g,h.b),g=Math.max(h.r,h.g,h.b),m=g-f,v.b=g,v.s=0!==g?255*m/g:0,0!==v.s?h.r===g?v.h=(h.g-h.b)/m:h.g===g?v.h=2+(h.b-h.r)/m:v.h=4+(h.r-h.g)/m:v.h=-1,v.h*=60,v.h<0&&(v.h+=360),v.s*=100/255,v.b*=100/255,0===(u=v).s&&(u.h=360),n=u,a=y.keywords?S.map(y.keywords.split(","),function(e){return S.trim(e.toLowerCase())}):[],s=""!==e.val()&&-1<S.inArray(e.val().toLowerCase(),a)?T(e.val()):D(e.val())?z(e.val()):i,t||e.val(s),y.opacity&&(o=""===e.attr("data-opacity")?1:A(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),isNaN(o)&&(o=1),e.attr("data-opacity",o),b.find("span").css("opacity",o),c=A(x.height()-x.height()*o,0,x.height()),$.css("top",c+"px")),"transparent"===e.val().toLowerCase()&&b.find("span").css("opacity",0),b.find("span").css("backgroundColor",i),y.control){case"wheel":d=A(Math.ceil(.75*n.s),0,C.height()/2),p=n.h*Math.PI/180,l=A(75-Math.cos(p)*d,0,C.width()),c=A(75-Math.sin(p)*d,0,C.height()),k.css({top:c+"px",left:l+"px"}),c=150-n.b/(100/C.height()),""===i&&(c=0),O.css("top",c+"px"),_.css("backgroundColor",M({h:n.h,s:n.s,b:100}));break;case"saturation":l=A(5*n.h/12,0,150),c=A(C.height()-Math.ceil(n.b/(100/C.height())),0,C.height()),k.css({top:c+"px",left:l+"px"}),c=A(_.height()-n.s*(_.height()/100),0,_.height()),O.css("top",c+"px"),_.css("backgroundColor",M({h:n.h,s:100,b:n.b})),w.find(".minicolors-grid-inner").css("opacity",n.s/100);break;case"brightness":l=A(5*n.h/12,0,150),c=A(C.height()-Math.ceil(n.s/(100/C.height())),0,C.height()),k.css({top:c+"px",left:l+"px"}),c=A(_.height()-n.b*(_.height()/100),0,_.height()),O.css("top",c+"px"),_.css("backgroundColor",M({h:n.h,s:n.s,b:100})),w.find(".minicolors-grid-inner").css("opacity",1-n.b/100);break;default:l=A(Math.ceil(n.s/(100/C.width())),0,C.width()),c=A(C.height()-Math.ceil(n.b/(100/C.height())),0,C.height()),k.css({top:c+"px",left:l+"px"}),c=A(_.height()-n.h/(360/_.height()),0,_.height()),O.css("top",c+"px"),C.css("backgroundColor",M({h:n.h,s:100,b:100}))}e.data("minicolors-initialized")&&I(e,s,o)}function I(e,t,i){var n,o,a=e.data("minicolors-settings"),r=e.data("minicolors-lastChange");if(!r||r.value!==t||r.opacity!==i){if(e.data("minicolors-lastChange",{value:t,opacity:i}),a.swatches&&0!==a.swatches.length){for(n=D(t)?z(t,!0):N(t),-1,o=0;o<a.swatches.length;++o)if(n.r===a.swatches[o].r&&n.g===a.swatches[o].g&&n.b===a.swatches[o].b&&n.a===a.swatches[o].a){o;break}e.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==o&&e.parent().find(".minicolors-swatches .minicolors-swatch").eq(o).addClass("selected")}a.change&&(a.changeDelay?(clearTimeout(e.data("minicolors-changeTimeout")),e.data("minicolors-changeTimeout",setTimeout(function(){a.change.call(e.get(0),t,i)},a.changeDelay))):a.change.call(e.get(0),t,i)),e.trigger("change").trigger("input")}}function T(e,t){return"uppercase"===t?e.toUpperCase():e.toLowerCase()}function j(e,t){return(e=e.replace(/^#/g,"")).match(/^[A-F0-9]{3,6}/gi)?3!==e.length&&6!==e.length?"":(3===e.length&&t&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#"+e):""}function z(e,t){var i=e.replace(/[^\d,.]/g,"").split(",");return i[0]=A(parseInt(i[0],10),0,255),i[1]=A(parseInt(i[1],10),0,255),i[2]=A(parseInt(i[2],10),0,255),i[3]&&(i[3]=A(parseFloat(i[3],10),0,1)),t?{r:i[0],g:i[1],b:i[2],a:i[3]?i[3]:null}:void 0!==i[3]&&i[3]<=1?"rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")":"rgb("+i[0]+", "+i[1]+", "+i[2]+")"}function F(e,t){return D(e)?z(e):j(e,t)}function A(e,t,i){return e<t&&(e=t),i<e&&(e=i),e}function D(e){var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!t||4!==t.length)}function E(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===e.length?e[4]:"1"}function P(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}function h(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return S.each(i,function(e,t){1===t.length&&(i[e]="0"+t)}),"#"+i.join("")}function M(e){return h(function(e){var t={},i=Math.round(e.h),n=Math.round(255*e.s/100),o=Math.round(255*e.b/100);if(0===n)t.r=t.g=t.b=o;else{var a=o,r=(255-n)*o/255,s=i%60*(a-r)/60;360===i&&(i=0),i<60?(t.r=a,t.b=r,t.g=r+s):i<120?(t.g=a,t.b=r,t.r=a-s):i<180?(t.g=a,t.r=r,t.b=r+s):i<240?(t.b=a,t.r=r,t.g=a-s):i<300?(t.b=a,t.g=r,t.r=r+s):t.b=i<360?(t.r=a,t.g=r,a-s):(t.r=0,t.g=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}(e))}function N(e){return{r:(e=parseInt(-1<e.indexOf("#")?e.substring(1):e,16))>>16,g:(65280&e)>>8,b:255&e}}S.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},S.extend(S.fn,{minicolors:function(e,t){switch(e){case"destroy":return S(this).each(function(){c(S(this))}),S(this);case"hide":return p(),S(this);case"opacity":return void 0===t?S(this).attr("data-opacity"):(S(this).each(function(){u(S(this).attr("data-opacity",t))}),S(this));case"rgbObject":return r=S(this),s=N(j(S(r).val(),!0)),l=S(r).attr("data-opacity"),s?(void 0!==l&&S.extend(s,{a:parseFloat(l)}),s):null;case"rgbString":case"rgbaString":return i=S(this),n="rgbaString"===e,o=N(j(S(i).val(),!0)),a=S(i).attr("data-opacity"),o?(void 0===a&&(a=1),n?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(a)+")":"rgb("+o.r+", "+o.g+", "+o.b+")"):null;case"settings":return void 0===t?S(this).data("minicolors-settings"):(S(this).each(function(){var e=S(this).data("minicolors-settings")||{};c(S(this)),S(this).minicolors(S.extend(!0,e,t))}),S(this));case"show":return d(S(this).eq(0)),S(this);case"value":return void 0===t?S(this).val():(S(this).each(function(){"object"==typeof t&&null!==typeof t?(t.opacity&&S(this).attr("data-opacity",A(t.opacity,0,1)),t.color&&S(this).val(t.color)):S(this).val(t),u(S(this))}),S(this));default:return"create"!==e&&(t=e),S(this).each(function(){!function(t,e){var i,n,o,a,r,s=S('<div class="minicolors" />'),l=S.minicolors.defaults;if(!t.data("minicolors-initialized")){if(e=S.extend(!0,{},l,e),s.addClass("minicolors-theme-"+e.theme).toggleClass("minicolors-with-opacity",e.opacity).toggleClass("minicolors-no-data-uris",!0!==e.dataUris),void 0!==e.position&&S.each(e.position.split(" "),function(){s.addClass("minicolors-position-"+this)}),i="rgb"===e.format?e.opacity?"25":"20":e.keywords?"11":"7",t.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",e).prop("size",i).wrap(s).after('<div class="minicolors-panel minicolors-slider-'+e.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),e.inline||(t.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),t.next(".minicolors-input-swatch").on("click",function(e){e.preventDefault(),t.focus()})),(a=t.parent().find(".minicolors-panel")).on("selectstart",function(){return!1}).end(),e.swatches&&0!==e.swatches.length)for(7<e.swatches.length&&(e.swatches.length=7),a.addClass("minicolors-with-swatches"),n=S('<ul class="minicolors-swatches"></ul>').appendTo(a),r=0;r<e.swatches.length;++r)o=D(o=e.swatches[r])?z(o,!0):N(j(o,!0)),S('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(n).data("swatch-color",e.swatches[r]).find(".minicolors-swatch-color").css({backgroundColor:h(o),opacity:o.a}),e.swatches[r]=o;e.inline&&t.parent().addClass("minicolors-inline"),u(t,!1),t.data("minicolors-initialized",!0)}}(S(this),t)}),S(this)}var i,n,o,a,r,s,l}}),S(document).on("mousedown.minicolors touchstart.minicolors",function(e){S(e.target).parents().add(e.target).hasClass("minicolors")||p()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var t=S(this);e.preventDefault(),S(document).data("minicolors-target",t),i(t,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var t=S(document).data("minicolors-target");t&&i(t,e)}).on("mouseup.minicolors touchend.minicolors",function(){S(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(e){e.preventDefault();var t=S(this),i=t.parents(".minicolors").find(".minicolors-input"),n=t.data("swatch-color");k(i,n,E(n)),u(i)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(e){var t=S(this).parent().find(".minicolors-input");e.preventDefault(),d(t)}).on("focus.minicolors",".minicolors-input",function(){var e=S(this);e.data("minicolors-initialized")&&d(e)}).on("blur.minicolors",".minicolors-input",function(){var e,t,i,n,o,a=S(this),r=a.data("minicolors-settings");a.data("minicolors-initialized")&&(e=r.keywords?S.map(r.keywords.split(","),function(e){return S.trim(e.toLowerCase())}):[],o=""!==a.val()&&-1<S.inArray(a.val().toLowerCase(),e)?a.val():null===(i=D(a.val())?z(a.val(),!0):(t=j(a.val(),!0))?N(t):null)?r.defaultValue:"rgb"===r.format?z(r.opacity?"rgba("+i.r+","+i.g+","+i.b+","+a.attr("data-opacity")+")":"rgb("+i.r+","+i.g+","+i.b+")"):h(i),n=r.opacity?a.attr("data-opacity"):1,"transparent"===o.toLowerCase()&&(n=0),a.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",n),a.val(o),""===a.val()&&a.val(F(r.defaultValue,!0)),a.val(T(a.val(),r.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var t=S(this);if(t.data("minicolors-initialized"))switch(e.keyCode){case 9:p();break;case 13:case 27:p(),t.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=S(this);e.data("minicolors-initialized")&&u(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=S(this);e.data("minicolors-initialized")&&setTimeout(function(){u(e,!0)},1)})}),function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(!(e=s(String(e||"").toLowerCase()))||!e.length)return[];var t,i,n,o,a=[],r=e.split(/ +/);for(t=0,i=r.length;t<i;t++){if(n=l(r[t]),this.settings.diacritics)for(o in c)c.hasOwnProperty(o)&&(n=n.replace(new RegExp(o,"g"),c[o]));a.push({string:r[t],regex:new RegExp(n,"i")})}return a},e.prototype.iterator=function(e,t){(r(e)?Array.prototype.forEach||function(e){for(var t=0,i=this.length;t<i;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)}).apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var o,a,r;e=this.prepareSearch(e,t),a=e.tokens,o=e.options.fields,r=a.length;var s,l=function(e,t){var i,n;return e?-1===(n=(e=String(e||"")).search(t.regex))?0:(i=t.string.length/e.length,0===n&&(i+=.5),i):0},c=(s=o.length)?1===s?function(e,t){return l(t[o[0]],e)}:function(e,t){for(var i=0,n=0;i<s;i++)n+=l(t[o[i]],e);return n/s}:function(){return 0};return r?1===r?function(e){return c(a[0],e)}:"and"===e.options.conjunction?function(e){for(var t,i=0,n=0;i<r;i++){if((t=c(a[i],e))<=0)return 0;n+=t}return n/r}:function(e){for(var t=0,i=0;t<r;t++)i+=c(a[t],e);return i/r}:function(){return 0}},e.prototype.getSortFunction=function(e,t){var i,n,o,a,r,s,l,c,d,p,u;if(u=!(e=(o=this).prepareSearch(e,t)).query&&t.sort_empty||t.sort,d=function(e,t){return"$score"===e?t.score:o.items[t.id][e]},r=[],u)for(i=0,n=u.length;i<n;i++)(e.query||"$score"!==u[i].field)&&r.push(u[i]);if(e.query){for(p=!0,i=0,n=r.length;i<n;i++)if("$score"===r[i].field){p=!1;break}p&&r.unshift({field:"$score",direction:"desc"})}else for(i=0,n=r.length;i<n;i++)if("$score"===r[i].field){r.splice(i,1);break}for(c=[],i=0,n=r.length;i<n;i++)c.push("desc"===r[i].direction?-1:1);return(s=r.length)?1===s?(a=r[0].field,l=c[0],function(e,t){return l*h(d(a,e),d(a,t))}):function(e,t){var i,n,o;for(i=0;i<s;i++)if(o=r[i].field,n=c[i]*h(d(o,e),d(o,t)))return n;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;var i=(t=a({},t)).fields,n=t.sort,o=t.sort_empty;return i&&!r(i)&&(t.fields=[i]),n&&!r(n)&&(t.sort=[n]),o&&!r(o)&&(t.sort_empty=[o]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,i){var n,o,t,a,r=this;return o=this.prepareSearch(e,i),i=o.options,e=o.query,a=i.score||r.getScoreFunction(o),e.length?r.iterator(r.items,function(e,t){n=a(e),(!1===i.filter||0<n)&&o.items.push({score:n,id:t})}):r.iterator(r.items,function(e,t){o.items.push({score:1,id:t})}),(t=r.getSortFunction(o,i))&&o.items.sort(t),o.total=o.items.length,"number"==typeof i.limit&&(o.items=o.items.slice(0,i.limit)),o};var h=function(e,t){return"number"==typeof e&&"number"==typeof t||(e=i(String(e||"")),t=i(String(t||""))),t<e?1:e<t?-1:0},a=function(e){var t,i,n,o;for(t=1,i=arguments.length;t<i;t++)if(o=arguments[t])for(n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);return e},s=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},l=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},i=function(){var e,t,i,n,o="",a={};for(i in c)if(c.hasOwnProperty(i))for(o+=n=c[i].substring(2,c[i].length-1),e=0,t=n.length;e<t;e++)a[n.charAt(e)]=i;var r=new RegExp("["+o+"]","g");return function(e){return e.replace(r,function(e){return a[e]}).toLowerCase()}}();return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={mixin:function(n){n.plugins={},n.prototype.initializePlugins=function(e){var t,i,n,o=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},a.isArray(e))for(t=0,i=e.length;t<i;t++)"string"==typeof e[t]?o.push(e[t]):(this.plugins.settings[e[t].name]=e[t].options,o.push(e[t].name));else if(e)for(n in e)e.hasOwnProperty(n)&&(this.plugins.settings[n]=e[n],o.push(n));for(;o.length;)this.require(o.shift())},n.prototype.loadPlugin=function(e){var t=this.plugins,i=n.plugins[e];if(!n.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');t.requested[e]=!0,t.loaded[e]=i.fn.apply(this,[this.plugins.settings[e]||{}]),t.names.push(e)},n.prototype.require=function(e){var t=this.plugins;if(!this.plugins.loaded.hasOwnProperty(e)){if(t.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');this.loadPlugin(e)}return t.loaded[e]},n.define=function(e,t){n.plugins[e]={name:e,fn:t}}}},a={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(_,p,e){var x=function(e,t){if("string"!=typeof t||t.length){var l="string"==typeof t?new RegExp(t,"i"):t,c=function(e){var t=0;if(3===e.nodeType){var i=e.data.search(l);if(0<=i&&0<e.data.length){var n=e.data.match(l),o=document.createElement("span");o.className="highlight";var a=e.splitText(i),r=(a.splitText(n[0].length),a.cloneNode(!0));o.appendChild(r),a.parentNode.replaceChild(o,a),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var s=0;s<e.childNodes.length;++s)s+=c(e.childNodes[s]);return t};return e.each(function(){c(this)})}},n=function(){};n.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=0)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},n.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=n.prototype[t[i]]};var b=/Mac/.test(navigator.userAgent),C=b?91:17,k=b?18:17,O=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,c=function(e){return void 0!==e},$=function(e){return null==e?null:"boolean"==typeof e?e?"1":"0":e+""},l=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},d=function(e){return(e+"").replace(/\$/g,"$$$$")},t={before:function(e,t,i){var n=e[t];e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)}},after:function(t,e,i){var n=t[e];t[e]=function(){var e=n.apply(t,arguments);return i.apply(t,arguments),e}}},i=function(t,i,e){var n,o=t.trigger,a={};for(n in t.trigger=function(){var e=arguments[0];return-1===i.indexOf(e)?o.apply(t,arguments):void(a[e]=arguments)},e.apply(t,[]),t.trigger=o,a)a.hasOwnProperty(n)&&o.apply(t,a[n])},u=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-n,t.length=n}return t},S=function(d){var p=null,e=function(e,t){var i,n,o,a,r,s,l,c;t=t||{},(e=e||window.event||{}).metaKey||e.altKey||(t.force||!1!==d.data("grow"))&&(i=d.val(),e.type&&"keydown"===e.type.toLowerCase()&&(o=97<=(n=e.keyCode)&&n<=122||65<=n&&n<=90||48<=n&&n<=57||32===n,46===n||8===n?(c=u(d[0])).length?i=i.substring(0,c.start)+i.substring(c.start+c.length):8===n&&c.start?i=i.substring(0,c.start-1)+i.substring(c.start+1):46===n&&void 0!==c.start&&(i=i.substring(0,c.start)+i.substring(c.start+1)):o&&(s=e.shiftKey,l=String.fromCharCode(e.keyCode),i+=l=s?l.toUpperCase():l.toLowerCase())),a=d.attr("placeholder"),!i&&a&&(i=a),(r=function(e,t){if(!e)return 0;var i=_("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(e).appendTo("body");!function(e,t,i){var n,o,a={};if(i)for(n=0,o=i.length;n<o;n++)a[i[n]]=e.css(i[n]);else a=e.css();t.css(a)}(t,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var n=i.width();return i.remove(),n}(i,d)+4)!==p&&(p=r,d.width(r),d.triggerHandler("resize")))};d.on("keydown keyup update blur",e),e()},w=function(e,t){var i,n,o,a,r=this;(a=e[0]).selectize=r;var s,l,c,d=window.getComputedStyle&&window.getComputedStyle(a,null);if(o=(o=d?d.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction)||e.parents("[dir]:first").attr("dir")||"",_.extend(r,{order:0,settings:t,$input:e,tabIndex:e.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(o),eventNS:".selectize"+ ++w.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===t.loadThrottle?r.onSearchChange:(s=r.onSearchChange,l=t.loadThrottle,function(){var e=this,t=arguments;window.clearTimeout(c),c=window.setTimeout(function(){s.apply(e,t)},l)})}),r.sifter=new p(this.options,{diacritics:t.diacritics}),r.settings.options){for(i=0,n=r.settings.options.length;i<n;i++)r.registerOption(r.settings.options[i]);delete r.settings.options}if(r.settings.optgroups){for(i=0,n=r.settings.optgroups.length;i<n;i++)r.registerOptionGroup(r.settings.optgroups[i]);delete r.settings.optgroups}r.settings.mode=r.settings.mode||(1===r.settings.maxItems?"single":"multi"),"boolean"!=typeof r.settings.hideSelected&&(r.settings.hideSelected="multi"===r.settings.mode),r.initializePlugins(r.settings.plugins),r.setupCallbacks(),r.setupTemplates(),r.setup()};return n.mixin(w),e.mixin(w),_.extend(w.prototype,{setup:function(){var e,t,i,n,o,a,r,s,l,c,d,p,u,h=this,v=h.settings,f=h.eventNS,g=_(window),m=_(document),w=h.$input;if(r=h.settings.mode,s=w.attr("class")||"",e=_("<div>").addClass(v.wrapperClass).addClass(s).addClass(r),t=_("<div>").addClass(v.inputClass).addClass("items").appendTo(e),i=_('<input type="text" autocomplete="off" />').appendTo(t).attr("tabindex",w.is(":disabled")?"-1":h.tabIndex),a=_(v.dropdownParent||e),n=_("<div>").addClass(v.dropdownClass).addClass(r).hide().appendTo(a),o=_("<div>").addClass(v.dropdownContentClass).appendTo(n),h.settings.copyClassesToDropdown&&n.addClass(s),e.css({width:w[0].style.width}),h.plugins.names.length&&(l="plugin-"+h.plugins.names.join(" plugin-"),e.addClass(l),n.addClass(l)),(null===v.maxItems||1<v.maxItems)&&1===h.tagType&&w.attr("multiple","multiple"),h.settings.placeholder&&i.attr("placeholder",v.placeholder),!h.settings.splitOn&&h.settings.delimiter){var y=h.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");h.settings.splitOn=new RegExp("\\s*"+y+"+\\s*")}w.attr("autocorrect")&&i.attr("autocorrect",w.attr("autocorrect")),w.attr("autocapitalize")&&i.attr("autocapitalize",w.attr("autocapitalize")),h.$wrapper=e,h.$control=t,h.$control_input=i,h.$dropdown=n,h.$dropdown_content=o,n.on("mouseenter","[data-selectable]",function(){return h.onOptionHover.apply(h,arguments)}),n.on("mousedown click","[data-selectable]",function(){return h.onOptionSelect.apply(h,arguments)}),d="mousedown",p="*:not(input)",u=function(){return h.onItemSelect.apply(h,arguments)},(c=t).on(d,p,function(e){for(var t=e.target;t&&t.parentNode!==c[0];)t=t.parentNode;return e.currentTarget=t,u.apply(this,[e])}),S(i),t.on({mousedown:function(){return h.onMouseDown.apply(h,arguments)},click:function(){return h.onClick.apply(h,arguments)}}),i.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return h.onKeyDown.apply(h,arguments)},keyup:function(){return h.onKeyUp.apply(h,arguments)},keypress:function(){return h.onKeyPress.apply(h,arguments)},resize:function(){h.positionDropdown.apply(h,[])},blur:function(){return h.onBlur.apply(h,arguments)},focus:function(){return h.ignoreBlur=!1,h.onFocus.apply(h,arguments)},paste:function(){return h.onPaste.apply(h,arguments)}}),m.on("keydown"+f,function(e){h.isCmdDown=e[b?"metaKey":"ctrlKey"],h.isCtrlDown=e[b?"altKey":"ctrlKey"],h.isShiftDown=e.shiftKey}),m.on("keyup"+f,function(e){e.keyCode===k&&(h.isCtrlDown=!1),16===e.keyCode&&(h.isShiftDown=!1),e.keyCode===C&&(h.isCmdDown=!1)}),m.on("mousedown"+f,function(e){if(h.isFocused){if(e.target===h.$dropdown[0]||e.target.parentNode===h.$dropdown[0])return!1;h.$control.has(e.target).length||e.target===h.$control[0]||h.blur(e.target)}}),g.on(["scroll"+f,"resize"+f].join(" "),function(){h.isOpen&&h.positionDropdown.apply(h,arguments)}),g.on("mousemove"+f,function(){h.ignoreHover=!1}),this.revertSettings={$children:w.children().detach(),tabindex:w.attr("tabindex")},w.attr("tabindex",-1).hide().after(h.$wrapper),_.isArray(v.items)&&(h.setValue(v.items),delete v.items),O&&w.on("invalid"+f,function(e){e.preventDefault(),h.isInvalid=!0,h.refreshState()}),h.updateOriginalInput(),h.refreshItems(),h.refreshState(),h.updatePlaceholder(),h.isSetup=!0,w.is(":disabled")&&h.disable(),h.on("change",this.onChange),w.data("selectize",h),w.addClass("selectized"),h.trigger("initialize"),!0===v.preload&&h.onSearchChange("")},setupTemplates:function(){var i=this.settings.labelField,n=this.settings.optgroupLabelField,e={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[i])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[i])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};this.settings.render=_.extend({},e,this.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)i.hasOwnProperty(e)&&((t=this.settings[i[e]])&&this.on(e,t))},onClick:function(e){this.isFocused||(this.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,i=e.isDefaultPrevented();if(_(e.target),t.isFocused){if(e.target!==t.$control_input[0])return"single"===t.settings.mode?t.isOpen?t.close():t.open():i||t.setActiveItem(null),!1}else i||window.setTimeout(function(){t.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var n=this;n.isFull()||n.isInputHidden||n.isLocked?e.preventDefault():n.settings.splitOn&&setTimeout(function(){for(var e=_.trim(n.$control_input.val()||"").split(n.settings.splitOn),t=0,i=e.length;t<i;t++)n.createItem(e[t])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target,this.$control_input[0],this);if(!t.isLocked){switch(e.keyCode){case 65:if(t.isCmdDown)return void t.selectAll();break;case 27:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,-1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case 13:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case 37:return void t.advanceSelection(-1,e);case 39:return void t.advanceSelection(1,e);case 9:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case 8:case 46:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(b?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()}9!==e.keyCode&&e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(t){var i=this,n=i.settings.load;n&&(i.loadedSearches.hasOwnProperty(t)||(i.loadedSearches[t]=!0,i.load(function(e){n.apply(i,[t,e])})))},onFocus:function(e){var t=this,i=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(e);var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),(t||document.body).focus(),i.ignoreFocus=!1,i.trigger("blur")};i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,i,n=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),(i=_(e.currentTarget)).hasClass("create")?n.createItem(null,function(){n.settings.closeAfterSelect&&n.close()}):void 0!==(t=i.attr("data-value"))&&(n.lastQuery=null,n.setTextboxValue(""),n.addItem(t),n.settings.closeAfterSelect?n.close():!n.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&n.setActiveOption(n.getOption(t)))},onItemSelect:function(e){this.isLocked||"multi"===this.settings.mode&&(e.preventDefault(),this.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){i(this,t?[]:["change"],function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(e,t){var i,n,o,a,r,s,l,c,d=this;if("single"!==d.settings.mode){if(!(e=_(e)).length)return _(d.$activeItems).removeClass("active"),d.$activeItems=[],void(d.isFocused&&d.showInput());if("mousedown"===(i=t&&t.type.toLowerCase())&&d.isShiftDown&&d.$activeItems.length){for(c=d.$control.children(".active:last"),a=Array.prototype.indexOf.apply(d.$control[0].childNodes,[c[0]]),(r=Array.prototype.indexOf.apply(d.$control[0].childNodes,[e[0]]))<a&&(l=a,a=r,r=l),n=a;n<=r;n++)s=d.$control[0].childNodes[n],-1===d.$activeItems.indexOf(s)&&(_(s).addClass("active"),d.$activeItems.push(s));t.preventDefault()}else"mousedown"===i&&d.isCtrlDown||"keydown"===i&&this.isShiftDown?e.hasClass("active")?(o=d.$activeItems.indexOf(e[0]),d.$activeItems.splice(o,1),e.removeClass("active")):d.$activeItems.push(e.addClass("active")[0]):(_(d.$activeItems).removeClass("active"),d.$activeItems=[e.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(e,t,i){var n,o,a,r,s,l=this;l.$activeOption&&l.$activeOption.removeClass("active"),l.$activeOption=null,(e=_(e)).length&&(l.$activeOption=e.addClass("active"),(t||!c(t))&&(n=l.$dropdown_content.height(),o=l.$activeOption.outerHeight(!0),t=l.$dropdown_content.scrollTop()||0,s=(r=a=l.$activeOption.offset().top-l.$dropdown_content.offset().top+t)-n+o,n+t<a+o?l.$dropdown_content.stop().animate({scrollTop:s},i?l.settings.scrollDuration:0):a<t&&l.$dropdown_content.stop().animate({scrollTop:r},i?l.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(e){var t,i,n,o=this,a=o.settings,r=this.getSearchOptions();if(a.score&&"function"!=typeof(n=o.settings.score.apply(this,[e])))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==o.lastQuery?(o.lastQuery=e,i=o.sifter.search(e,_.extend(r,{score:n})),o.currentResults=i):i=_.extend(!0,{},o.currentResults),a.hideSelected)for(t=i.items.length-1;0<=t;t--)-1!==o.items.indexOf($(i.items[t].id))&&i.items.splice(t,1);return i},refreshOptions:function(e){var t,i,n,o,a,r,s,l,c,d,p,u,h,v,f,g;void 0===e&&(e=!0);var m=this,w=_.trim(m.$control_input.val()),y=m.search(w),b=m.$dropdown_content,C=m.$activeOption&&$(m.$activeOption.attr("data-value"));for(o=y.items.length,"number"==typeof m.settings.maxOptions&&(o=Math.min(o,m.settings.maxOptions)),a={},r=[],t=0;t<o;t++)for(s=m.options[y.items[t].id],l=m.render("option",s),c=s[m.settings.optgroupField]||"",i=0,n=(d=_.isArray(c)?c:[c])&&d.length;i<n;i++)c=d[i],m.optgroups.hasOwnProperty(c)||(c=""),a.hasOwnProperty(c)||(a[c]=[],r.push(c)),a[c].push(l);for(this.settings.lockOptgroupOrder&&r.sort(function(e,t){return(m.optgroups[e].$order||0)-(m.optgroups[t].$order||0)}),p=[],t=0,o=r.length;t<o;t++)c=r[t],m.optgroups.hasOwnProperty(c)&&a[c].length?(u=m.render("optgroup_header",m.optgroups[c])||"",u+=a[c].join(""),p.push(m.render("optgroup",_.extend({},m.optgroups[c],{html:u})))):p.push(a[c].join(""));if(b.html(p.join("")),m.settings.highlight&&y.query.length&&y.tokens.length)for(t=0,o=y.tokens.length;t<o;t++)x(b,y.tokens[t].regex);if(!m.settings.hideSelected)for(t=0,o=m.items.length;t<o;t++)m.getOption(m.items[t]).addClass("selected");(h=m.canCreate(w))&&(b.prepend(m.render("option_create",{input:w})),g=_(b[0].childNodes[0])),m.hasOptions=0<y.items.length||h,m.hasOptions?(0<y.items.length?((f=C&&m.getOption(C))&&f.length?v=f:"single"===m.settings.mode&&m.items.length&&(v=m.getOption(m.items[0])),v&&v.length||(v=g&&!m.settings.addPrecedence?m.getAdjacentOption(g,1):b.find("[data-selectable]:first"))):v=g,m.setActiveOption(v),e&&!m.isOpen&&m.open()):(m.setActiveOption(null),e&&m.isOpen&&m.close())},addOption:function(e){var t,i,n,o=this;if(_.isArray(e))for(t=0,i=e.length;t<i;t++)o.addOption(e[t]);else(n=o.registerOption(e))&&(o.userOptions[n]=!0,o.lastQuery=null,o.trigger("option_add",n,e))},registerOption:function(e){var t=$(e[this.settings.valueField]);return!(!t||this.options.hasOwnProperty(t))&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=$(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var i,n,o,a,r,s,l,c=this;if(e=$(e),o=$(t[c.settings.valueField]),null!==e&&c.options.hasOwnProperty(e)){if("string"!=typeof o)throw new Error("Value must be set in option data");l=c.options[e].$order,o!==e&&(delete c.options[e],-1!==(a=c.items.indexOf(e))&&c.items.splice(a,1,o)),t.$order=t.$order||l,c.options[o]=t,r=c.renderCache.item,s=c.renderCache.option,r&&(delete r[e],delete r[o]),s&&(delete s[e],delete s[o]),-1!==c.items.indexOf(o)&&(i=c.getItem(e),n=_(c.render("item",t)),i.hasClass("active")&&n.addClass("active"),i.replaceWith(n)),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=$(e);var n=i.renderCache.item,o=i.renderCache.option;n&&delete n[e],o&&delete o[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,t){var i=this.$dropdown.find("[data-selectable]"),n=i.index(e)+t;return 0<=n&&n<i.length?i.eq(n):_()},getElementWithValue:function(e,t){if(null!=(e=$(e)))for(var i=0,n=t.length;i<n;i++)if(t[i].getAttribute("data-value")===e)return _(t[i]);return _()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(e,t){for(var i=_.isArray(e)?e:[e],n=0,o=i.length;n<o;n++)this.isPending=n<o-1,this.addItem(i[n],t)},addItem:function(s,l){i(this,l?[]:["change"],function(){var e,t,i,n,o,a=this,r=a.settings.mode;return s=$(s),-1!==a.items.indexOf(s)?void("single"===r&&a.close()):void(a.options.hasOwnProperty(s)&&("single"===r&&a.clear(l),"multi"===r&&a.isFull()||(e=_(a.render("item",a.options[s])),o=a.isFull(),a.items.splice(a.caretPos,0,s),a.insertAtCaret(e),(!a.isPending||!o&&a.isFull())&&a.refreshState(),a.isSetup&&(i=a.$dropdown_content.find("[data-selectable]"),a.isPending||(t=a.getOption(s),n=a.getAdjacentOption(t,1).attr("data-value"),a.refreshOptions(a.isFocused&&"single"!==r),n&&a.setActiveOption(a.getOption(n))),!i.length||a.isFull()?a.close():a.positionDropdown(),a.updatePlaceholder(),a.trigger("item_add",s,e),a.updateOriginalInput({silent:l})))))})},removeItem:function(e,t){var i,n,o,a=this;i="object"==typeof e?e:a.getItem(e),e=$(i.attr("data-value")),-1!==(n=a.items.indexOf(e))&&(i.remove(),i.hasClass("active")&&(o=a.$activeItems.indexOf(i[0]),a.$activeItems.splice(o,1)),a.items.splice(n,1),a.lastQuery=null,!a.settings.persist&&a.userOptions.hasOwnProperty(e)&&a.removeOption(e,t),n<a.caretPos&&a.setCaret(a.caretPos-1),a.refreshState(),a.updatePlaceholder(),a.updateOriginalInput({silent:t}),a.positionDropdown(),a.trigger("item_remove",e,i))},createItem:function(e,i){var n=this,o=n.caretPos;e=e||_.trim(n.$control_input.val()||"");var a=arguments[arguments.length-1];if("function"!=typeof a&&(a=function(){}),"boolean"!=typeof i&&(i=!0),!n.canCreate(e))return a(),!1;n.lock();var t,r,s="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},l=(r=!(t=function(e){if(n.unlock(),!e||"object"!=typeof e)return a();var t=$(e[n.settings.valueField]);return"string"!=typeof t?a():(n.setTextboxValue(""),n.addOption(e),n.setCaret(o),n.addItem(t),n.refreshOptions(i&&"single"!==n.settings.mode),void a(e))}),function(){r||(r=!0,t.apply(this,arguments))}),c=s.apply(this,[e,l]);return void 0!==c&&l(c),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e=this;e.isRequired&&(e.items.length&&(e.isInvalid=!1),e.$control_input.prop("required",void 0)),e.refreshClasses()},refreshClasses:function(){var e=this,t=e.isFull(),i=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",i).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!_.isEmptyObject(e.options)).toggleClass("has-items",0<e.items.length),e.$control_input.data("grow",!t&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,n,o,a=this;if(e=e||{},1===a.tagType){for(n=[],t=0,i=a.items.length;t<i;t++)o=a.options[a.items[t]][a.settings.labelField]||"",n.push('<option value="'+l(a.items[t])+'" selected="selected">'+l(o)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),a.$input.html(n.join(""))}else a.$input.val(a.getValue()),a.$input.attr("value",a.$input.val());a.isSetup&&(e.silent||a.trigger("change",a.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length);0===t?this.$control.prepend(e):_(this.$control[0].childNodes[t]).before(e),this.setCaret(t+1)},deleteSelection:function(e){var t,i,n,o,a,r,s,l,c,d=this;if(n=e&&8===e.keyCode?-1:1,o=u(d.$control_input[0]),d.$activeOption&&!d.settings.hideSelected&&(s=d.getAdjacentOption(d.$activeOption,-1).attr("data-value")),a=[],d.$activeItems.length){for(c=d.$control.children(".active:"+(0<n?"last":"first")),r=d.$control.children(":not(input)").index(c),0<n&&r++,t=0,i=d.$activeItems.length;t<i;t++)a.push(_(d.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(d.isFocused||"single"===d.settings.mode)&&d.items.length&&(n<0&&0===o.start&&0===o.length?a.push(d.items[d.caretPos-1]):0<n&&o.start===d.$control_input.val().length&&a.push(d.items[d.caretPos]));if(!a.length||"function"==typeof d.settings.onDelete&&!1===d.settings.onDelete.apply(d,[a]))return!1;for(void 0!==r&&d.setCaret(r);a.length;)d.removeItem(a.pop());return d.showInput(),d.positionDropdown(),d.refreshOptions(!0),s&&((l=d.getOption(s)).length&&d.setActiveOption(l)),!0},advanceSelection:function(e,t){var i,n,o,a,r,s=this;0!==e&&(s.rtl&&(e*=-1),i=0<e?"last":"first",n=u(s.$control_input[0]),s.isFocused&&!s.isInputHidden?(a=s.$control_input.val().length,(e<0?0===n.start&&0===n.length:n.start===a)&&!a&&s.advanceCaret(e,t)):(r=s.$control.children(".active:"+i)).length&&(o=s.$control.children(":not(input)").index(r),s.setActiveItem(null),s.setCaret(0<e?o+1:o)))},advanceCaret:function(e,t){var i,n,o=this;0!==e&&(i=0<e?"next":"prev",o.isShiftDown?(n=o.$control_input[i]()).length&&(o.hideInput(),o.setActiveItem(n),t&&t.preventDefault()):o.setCaret(o.caretPos+e))},setCaret:function(e){var t,i,n,o,a=this;if(e="single"===a.settings.mode?a.items.length:Math.max(0,Math.min(a.items.length,e)),!a.isPending)for(t=0,i=(n=a.$control.children(":not(input)")).length;t<i;t++)o=_(n[t]).detach(),t<e?a.$control_input.before(o):a.$control.append(o);a.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.$control_input.prop("disabled",!0).prop("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,i=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),_(window).off(t),_(document).off(t),_(document.body).off(t),delete e.$input[0].selectize},render:function(e,t){var i,n,o="",a=!1,r=this,s=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===e||"item"===e)&&(a=!!(i=$(t[r.settings.valueField]))),a&&(c(r.renderCache[e])||(r.renderCache[e]={}),r.renderCache[e].hasOwnProperty(i))?r.renderCache[e][i]:(o=r.settings.render[e].apply(this,[t,l]),("option"===e||"option_create"===e)&&(o=o.replace(s,"<$1 data-selectable")),"optgroup"===e&&(n=t[r.settings.optgroupValueField]||"",o=o.replace(s,'<$1 data-group="'+d(l(n))+'"')),("option"===e||"item"===e)&&(o=o.replace(s,'<$1 data-value="'+d(l(i||""))+'"')),a&&(r.renderCache[e][i]=o),o)},clearCache:function(e){void 0===e?this.renderCache={}:delete this.renderCache[e]},canCreate:function(e){if(!this.settings.create)return!1;var t=this.settings.createFilter;return!(!e.length||"function"==typeof t&&!t.apply(this,[e])||"string"==typeof t&&!new RegExp(t).test(e)||t instanceof RegExp&&!t.test(e))}}),w.count=0,w.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},_.fn.selectize=function(o){var a=_.fn.selectize.defaults,p=_.extend({},a,o),u=p.dataAttr,h=p.labelField,v=p.valueField,f=p.optgroupField,g=p.optgroupLabelField,m=p.optgroupValueField;return this.each(function(){if(!this.selectize){var e=_(this),t=this.tagName.toLowerCase(),i=e.attr("placeholder")||e.attr("data-placeholder");i||p.allowEmptyOption||(i=e.children('option[value=""]').text());var n={placeholder:i,options:[],optgroups:[],items:[]};"select"===t?function(e,r){var t,i,n,o,a=r.options,s={},l=function(e){var t=u&&e.attr(u);return"string"==typeof t&&t.length?JSON.parse(t):null},c=function(e,t){e=_(e);var i=$(e.attr("value"));if(i||p.allowEmptyOption)if(s.hasOwnProperty(i)){if(t){var n=s[i][f];n?_.isArray(n)?n.push(t):s[i][f]=[n,t]:s[i][f]=t}}else{var o=l(e)||{};o[h]=o[h]||e.text(),o[v]=o[v]||i,o[f]=o[f]||t,s[i]=o,a.push(o),e.is(":selected")&&r.items.push(i)}},d=function(e){var t,i,n,o,a;for((n=(e=_(e)).attr("label"))&&((o=l(e)||{})[g]=n,o[m]=n,r.optgroups.push(o)),t=0,i=(a=_("option",e)).length;t<i;t++)c(a[t],n)};for(r.maxItems=e.attr("multiple")?null:1,t=0,i=(o=e.children()).length;t<i;t++)"optgroup"===(n=o[t].tagName.toLowerCase())?d(o[t]):"option"===n&&c(o[t])}(e,n):function(e,t){var i,n,o,a,r=e.attr(u);if(r)for(t.options=JSON.parse(r),i=0,n=t.options.length;i<n;i++)t.items.push(t.options[i][v]);else{var s=_.trim(e.val()||"");if(!p.allowEmptyOption&&!s.length)return;for(i=0,n=(o=s.split(p.delimiter)).length;i<n;i++)(a={})[h]=o[i],a[v]=o[i],t.options.push(a);t.items=o}}(e,n),new w(e,_.extend(!0,{},a,n,o))}})},_.fn.selectize.defaults=w.defaults,_.fn.selectize.support={validity:O},w.define("drag_drop",function(){if(!_.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var n=this;n.lock=(i=n.lock,function(){var e=n.$control.data("sortable");return e&&e.disable(),i.apply(n,arguments)}),n.unlock=(t=n.unlock,function(){var e=n.$control.data("sortable");return e&&e.enable(),t.apply(n,arguments)}),n.setup=(e=n.setup,function(){e.apply(this,arguments);var i=n.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:n.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),i.css({overflow:"visible"})},stop:function(){i.css({overflow:"hidden"});var e=n.$activeItems?n.$activeItems.slice():null,t=[];i.children("[data-value]").each(function(){t.push(_(this).attr("data-value"))}),n.setValue(t),n.setActiveItem(e)}})})}var e,t,i}),w.define("dropdown_header",function(e){var t,i=this;e=_.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},e),i.setup=(t=i.setup,function(){t.apply(i,arguments),i.$dropdown_header=_(e.html(e)),i.$dropdown.prepend(i.$dropdown_header)})}),w.define("optgroup_columns",function(s){var a,l=this;s=_.extend({equalizeWidth:!0,equalizeHeight:!0},s),this.getAdjacentOption=function(e,t){var i=e.closest("[data-group]").find("[data-selectable]"),n=i.index(e)+t;return 0<=n&&n<i.length?i.eq(n):_()},this.onKeyDown=(a=l.onKeyDown,function(e){var t,i,n,o;return!this.isOpen||37!==e.keyCode&&39!==e.keyCode?a.apply(this,arguments):(l.ignoreHover=!0,t=(o=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((i=(n=(o=37===e.keyCode?o.prev("[data-group]"):o.next("[data-group]")).find("[data-selectable]")).eq(Math.min(n.length-1,t))).length&&this.setActiveOption(i)))});var c=function(){var e,t=c.width,i=document;return void 0===t&&((e=i.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,i.body.appendChild(e),t=c.width=e.offsetWidth-e.clientWidth,i.body.removeChild(e)),t},e=function(){var e,t,i,n,o,a,r;if((t=(r=_("[data-group]",l.$dropdown_content)).length)&&l.$dropdown_content.width()){if(s.equalizeHeight){for(e=i=0;e<t;e++)i=Math.max(i,r.eq(e).height());r.css({height:i})}s.equalizeWidth&&(a=l.$dropdown_content.innerWidth()-c(),n=Math.round(a/t),r.css({width:n}),1<t&&(o=a-n*(t-1),r.eq(t-1).css({width:o})))}};(s.equalizeHeight||s.equalizeWidth)&&(t.after(this,"positionDropdown",e),t.after(this,"refreshOptions",e))}),w.define("remove_button",function(e){if("single"!==this.settings.mode){e=_.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e);var i=this,o='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+l(e.title)+'">'+e.label+"</a>";this.setup=(t=i.setup,function(){if(e.append){var n=i.settings.render.item;i.settings.render.item=function(){return e=n.apply(this,arguments),t=o,i=e.search(/(<\/[^>]+>\s*)$/),e.substring(0,i)+t+e.substring(i);var e,t,i}}t.apply(this,arguments),this.$control.on("click","."+e.className,function(e){if(e.preventDefault(),!i.isLocked){var t=_(e.currentTarget).parent();i.setActiveItem(t),i.deleteSelection()&&i.setCaret(i.items.length)}})})}var t}),w.define("restore_on_backspace",function(n){var o,e=this;n.text=n.text||function(e){return e[this.settings.labelField]},this.onKeyDown=(o=e.onKeyDown,function(e){var t,i;return 8===e.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&0<=(t=this.caretPos-1)&&t<this.items.length?(i=this.options[this.items[t]],this.deleteSelection(e)&&(this.setTextboxValue(n.text.apply(this,[i])),this.refreshOptions(!0)),void e.preventDefault()):o.apply(this,arguments)})}),w}),function(v,e){v(document).on("ev-repeatable-sortable-stop",function(e,t){var i=v(".wp-editor-area",t).first();if(0!==i.length){var n=i.attr("id"),o=i.parents(".wp-editor-wrap").first(),a=i.clone();a.removeClass("wp-editor-area"),a.removeAttr("aria-hidden"),a.removeAttr("style"),o.replaceWith(a),tinymce.remove("#"+n),a.wp_editor({})}}),v.fn.wp_editor=function(u){v(this);if(v(this).is("textarea")||console.warn("Element must be a textarea"),"undefined"!=typeof tinyMCEPreInit&&"undefined"!=typeof QTags&&"undefined"!=typeof ap_vars||console.warn("js_wp_editor( $settings ); must be loaded"),!v(this).is("textarea")||"undefined"==typeof tinyMCEPreInit||"undefined"==typeof QTags||"undefined"==typeof ap_vars)return this;var e={mode:"tmce",mceInit:{theme:"modern",skin:"lightgray",language:"en",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignleft"],deep:!1,remove:"none"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["aligncenter"],deep:!1,remove:"none"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},deep:!1,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignright"],deep:!1,remove:"none"}],strikethrough:{inline:"del",deep:!0,split:!0}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,paste_webkit_styles:"font-weight font-style color",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",wpeditimage_disable_captions:!1,wpeditimage_html5_captions:!1,plugins:"charmap,hr,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview,image",content_css:ap_vars.includes_url+"css/dashicons.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/mediaelementplayer.min.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/wp-mediaelement.css?ver=3.9,"+ap_vars.includes_url+"js/tinymce/skins/wordpress/wp-content.css?ver=3.9",selector:"#apid",resize:"vertical",menubar:!1,wpautop:!0,indent:!1,toolbar1:"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,fullscreen,wp_adv",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:":prev,:next",body_class:"apid"}},h=new RegExp("apid","g");tinyMCEPreInit.mceInit.apid&&(e.mceInit=tinyMCEPreInit.mceInit.apid);u=v.extend(!0,e,u);return void 0===switchEditors.evswitchto&&(switchEditors.evswitchto=function(e){var t=e.id,i=t.length,n=t.substr(0,i-5),o=t.substr(i-4);return this.go(n,o),!1}),this.each(function(){if(v(this).is("textarea")){var i=v(this).attr("id");v.each(u.mceInit,function(e,t){"string"==v.type(t)&&(u.mceInit[e]=t.replace(h,i))}),u.mode="tmce"==u.mode?"tmce":"html";var e=v.extend({},u.mceInit,{selector:"#"+i});tinyMCEPreInit.mceInit[i]=e,v(this).addClass("wp-editor-area").show();var t=this;if(v(this).closest(".wp-editor-wrap").length){var n=v(this).closest(".wp-editor-wrap").parent();v(this).closest(".wp-editor-wrap").before(v(this).clone()),v(this).closest(".wp-editor-wrap").remove(),t=n.find('textarea[id="'+i+'"]')}var o=v('<div id="wp-'+i+'-wrap" class="wp-core-ui wp-editor-wrap '+u.mode+'-active" />'),a=v('<div id="wp-'+i+'-editor-tools" class="wp-editor-tools hide-if-no-js" />'),r=v('<div class="wp-editor-tabs" />'),s=v('<a id="'+i+'-html" class="ev-switch-editor switch-html" onclick="switchEditors.evswitchto(this);">'+ev_framework.editor.text+"</a>"),l=v('<a id="'+i+'-tmce" class="ev-switch-editor switch-tmce" onclick="switchEditors.evswitchto(this);">'+ev_framework.editor.visual+"</a>"),c=v('<div id="wp-'+i+'-media-buttons" class="wp-media-buttons" />'),d=v('<a href="#" id="insert-media-button" class="button insert-media add_media" data-editor="'+i+'" title="'+ev_framework.editor.add_media+'"><span class="wp-media-buttons-icon"></span> '+ev_framework.editor.add_media+"</a>"),p=v('<div id="wp-'+i+'-editor-container" class="wp-editor-container" />');ap_vars.upload_files&&(d.appendTo(c),c.appendTo(a)),l.appendTo(r),s.appendTo(r),r.appendTo(a),a.appendTo(o),p.appendTo(o),p.append(v(t).clone().addClass("wp-editor-area")),v(t).before(o),v(t).remove(),new QTags(i),QTags._buttonsInit(),switchEditors.go(i,u.mode),v(o).on("click",".insert-media",function(e){var t=v(e.currentTarget),i=t.data("editor"),n={frame:"post",state:"insert",title:wp.media.view.l10n.addMedia,multiple:!0};e.preventDefault(),t.blur(),t.hasClass("gallery")&&(n.state="gallery",n.title=wp.media.view.l10n.createGalleryTitle),wp.media.editor.open(i,n)})}else console.warn("Element must be a textarea")})}}(jQuery,window),function(l){var c={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},d={duration:"fast",direction:"both",easing:"linear",offset:0},p=/^(?:html)$/i,u=function(e){var t,i=l(window),n=p.test(e[0].nodeName);return{border:n?{top:0,left:0,bottom:0,right:0}:function(e,t){t=t||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var i=!(!document.defaultView||!document.defaultView.getComputedStyle),n={top:parseFloat(i?t.borderTopWidth:l.css(e,"borderTopWidth"))||0,left:parseFloat(i?t.borderLeftWidth:l.css(e,"borderLeftWidth"))||0,bottom:parseFloat(i?t.borderBottomWidth:l.css(e,"borderBottomWidth"))||0,right:parseFloat(i?t.borderRightWidth:l.css(e,"borderRightWidth"))||0};return{top:n.top,left:n.left,bottom:n.bottom,right:n.right,vertical:n.top+n.bottom,horizontal:n.left+n.right}}(e[0]),scroll:{top:(n?i:e).scrollTop(),left:(n?i:e).scrollLeft()},scrollbar:{right:n?0:e.innerWidth()-e[0].clientWidth,bottom:n?0:e.innerHeight()-e[0].clientHeight},rect:(t=e[0].getBoundingClientRect(),{top:n?0:t.top,left:n?0:t.left,bottom:n?e[0].clientHeight:t.bottom,right:n?e[0].clientWidth:t.right})}};l.fn.extend({scrollintoview:function(t){(t=l.extend({},d,t)).direction=c["string"==typeof t.direction&&t.direction.toLowerCase()]||c.both;var e="";!0===t.direction.x&&(e="horizontal"),!0===t.direction.y&&(e=e?"both":"vertical");var i=this.eq(0),n=i.closest(":scrollable("+e+")");if(0<n.length){n=n.eq(0);var o=u(i),a=u(n),r={top:o.rect.top-(a.rect.top+a.border.top),bottom:a.rect.bottom-a.border.bottom-a.scrollbar.bottom-o.rect.bottom,left:o.rect.left-(a.rect.left+a.border.left),right:a.rect.right-a.border.right-a.scrollbar.right-o.rect.right},s={};!0===t.direction.y&&(r.top<0?s.scrollTop=a.scroll.top+r.top:0<r.top&&r.bottom<0&&(s.scrollTop=a.scroll.top+Math.min(r.top,-r.bottom)),s.scrollTop+=parseInt(t.offset,10)),!0===t.direction.x&&(r.left<0?s.scrollLeft=a.scroll.left+r.left:0<r.left&&r.right<0&&(s.scrollLeft=a.scroll.left+Math.min(r.left,-r.right)),s.scrollLeft+=parseInt(t.offset,10)),l.isEmptyObject(s)?l.isFunction(t.complete)&&t.complete.call(n[0]):(p.test(n[0].nodeName)&&(n=l("html,body")),n.animate(s,t.duration,t.easing).eq(0).queue(function(e){l.isFunction(t.complete)&&t.complete.call(n[0]),e()}))}return this}});var h={auto:!0,scroll:!0,visible:!1,hidden:!1};l.extend(l.expr[":"],{scrollable:function(e,t,i,n){var o=c["string"==typeof i[3]&&i[3].toLowerCase()]||c.both,a=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,r={x:h[a.overflowX.toLowerCase()]||!1,y:h[a.overflowY.toLowerCase()]||!1,isRoot:p.test(e.nodeName)};if(!r.x&&!r.y&&!r.isRoot)return!1;var s={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(r.x||r.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(r.y||r.isRoot)&&this.height.scroll>this.height.client}};return o.y&&s.scrollableY()||o.x&&s.scrollableX()}})}(jQuery),function(r){r.evf.history={},r.evf.history.push=function(e){history&&history.pushState&&history.pushState(null,null,e)},r.evf.history.pushQueryString=function(e,t){e=r(e);var i="",n=window.location.toString();if(e.attr("href")&&0===e.attr("href").indexOf("#")?i=e.attr("href"):e.attr("data-target")&&0===e.attr("data-target").indexOf("#")&&(i=e.attr("data-target")),""!==(i=i.replace("#",""))){if(""===window.location.search)n+="?"+t+"="+i;else{var o=window.location.search.substring(1),a=r.deparam(o);a[t]=i,n=n.replace(o,r.param(a))}r.evf.history.push(n)}},r.evf.history.pushHash=function(e){var t="";(e=r(e)).attr("href")&&0===e.attr("href").indexOf("#")?t=e.attr("href"):e.attr("data-target")&&0===e.attr("data-target").indexOf("#")&&(t=e.attr("data-target")),""!==t&&r.evf.history.push(t)}}(jQuery),function(p){var r="ev-tooltip-container",e=".ev-tooltip";function s(e,t,i){var n=e.outerHeight(),o=e.outerWidth(),a=t.outerHeight()+8,r=t.outerWidth(),s={},l=e.offset().top,c=l-p(window).scrollTop();p("body").is(".admin-bar")&&(c-=p("#wpadminbar").outerHeight()),s.left=e.offset().left-r/2+o/2,t.removeClass("ev-tooltip-expand-top ev-tooltip-expand-bottom ev-tooltip-expand-left ev-tooltip-expand-right ev-tooltip-vertical ev-tooltip-horizontal");var d=i&&"vertical"!=i?"ev-tooltip-horizontal":"ev-tooltip-vertical";s.top=a<=c?(l+=2,t.addClass("ev-tooltip-expand-top"),l-a):(l-=2,t.addClass("ev-tooltip-expand-bottom"),l+n+8),t.addClass(d).css(s)}window.ev_tooltip_destroy=function(t){var e=p("body").get(0).style;if("transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e){p(this).on("transitionend.ev webkitTransitionEnd.ev oTransitionEnd.ev MSTransitionEnd.ev",function(e){t.remove()})}else t.remove();t.removeClass("ev-tooltip-active")},window.ev_seek_and_destroy_tooltips=function(){p("."+r).remove()},window.ev_create_tooltip=function(e,t,i){var n=p(e);if(!(void 0!==t&&t||void 0!==(t=n.attr("data-title")||n.attr("title"))&&""!==t))return!1;i=p.extend(!0,{},{class:"",mode:"horizontal"},i),ev_seek_and_destroy_tooltips();var o=r+" "+i.class,a=p('<div class="'+o+'"></div>').appendTo("body");return n.data("ev-tooltip",a),a.html(t).css({top:0,left:0}),p(window).on("resize scroll",function(){s(n,a,i.mode)}),s(n,a,i.mode),a.show(),a.addClass("ev-tooltip-active"),a},p.evf.delegate(e,"mouseover","tooltip",function(){ev_create_tooltip(p(this))}),p.evf.delegate(e,"mouseout click","tooltip",function(){var e=p(this).data("ev-tooltip");e&&window.ev_tooltip_destroy(e)}),p.evf.delegate(".ev-tooltip-container","click","tooltip",function(){window.ev_tooltip_destroy(p(this))})}(jQuery),function(t){window.Ev_MediaSelector=function(e){window.ev_ms_obj=this,window.ev_ms_obj.options=t.extend({},{title:void 0,multiple:!1,type:"",button:void 0,close:function(){},select:function(e){}},e),window.ev_ms_obj.frame=null,window.ev_ms_obj.open=function(e){var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"ev-media-selector",title:window.ev_ms_obj.options.title,allowLocalEdits:!1,displaySettings:!1,displayUserSettings:!1,multiple:window.ev_ms_obj.options.multiple,library:wp.media.query({type:window.ev_ms_obj.options.type})},wp.media.controller.Library.prototype.defaults)});window.ev_ms_obj.frame=wp.media({title:window.ev_ms_obj.options.title,button:{text:window.ev_ms_obj.options.button},state:"ev-media-selector",states:[new t]}),window.ev_ms_obj.frame.on("open",function(){var i=window.ev_ms_obj.frame.state("ev-media-selector").get("selection");i.reset(),_.each(e,function(e){var t=wp.media.attachment(e);t.fetch(),i.add(t?[t]:[])})}),window.ev_ms_obj.frame.on("select",function(){var e=window.ev_ms_obj.frame.state("ev-media-selector").get("selection"),t=window.ev_ms_obj.options.multiple?e.toJSON():e.first().toJSON();window.ev_ms_obj.options.select(t)}),window.ev_ms_obj.frame.on("close",function(){window.ev_ms_obj.options.close()}),window.ev_ms_obj.frame.open()}}}(jQuery),function(u){var d=function(e,p){e.each(function(d,e){u("[name]",e).each(function(){var e,t,i,n,o=u(this).attr("name"),a=new RegExp(/\[\d+\]/g),r=o.match(a),s=0;if(r&&r.length){for(var l=0;l<r.length;l++)r[l]=l===p-1?"["+d+"]":r[l];for(var c=null;null!==(c=a.exec(o));)e=o,t=c.index,i="["+d+"]",n=r[s].length,o=e.substr(0,t)+i+e.substr(t+n),s++;u(this).attr("name",o)}})})};u.evf.ui.add(".ev-sortable .ev-container-repeatable-inner-wrapper",function(){var n=null,o=function(){n=null,u("#wpbody").css("padding-bottom","")};u(document).off("mousedown.ev_sortable").off("mouseup.ev_sortable"),u(document).on("mousedown.ev_sortable",".ev-sortable-handle",function(){!function(e){if(null!==n)return;var t=0;t=u(e).parents(".ev-bundle-fields-wrapper").length?u(e).parents(".ev-bundle-fields-wrapper").first():u(e).parents(".ev-field-inner").first(),n=t.outerHeight(),u.evSaveRichTextareas(t),u("#wpbody").css("padding-bottom",n+10)}(u(this))}),u(document).on("mouseup.ev_sortable",".ev-sortable-handle",function(){o()}),u(this).sortable({handle:".ev-sortable-handle",items:"> .ev-field-inner, .ev-bundle-fields-wrapper",tolerance:"pointer",distance:10,start:function(e,t){var i={height:n};u(".ui-sortable-placeholder").css(i),o()},stop:function(e,t){var i=u(t.item).parents(".ev-sortable").first(),n=u("> .ev-field-inner, .ev-bundle-fields-wrapper",i),o=u(t.item).parents(".ev-repeatable").length;d(n,o),u(document).trigger("ev-repeatable-sortable-stop",[u(t.item)])}})}),u.evf.delegate(".ev-repeatable-remove","click","repeatable",function(){if(u(this).parents(".ev-attachment-placeholder").length)return!1;var e=u(this).parents(".ev-field").first(),t=u(".ev-container, .ev-bundle-fields-wrapper",e).first();return u(this).parents(".ev-field-inner, .ev-bundle-fields-wrapper").first().remove(),u(".ev-field-inner",t).length||e.addClass("ev-no-fields"),!1}),u.evf.delegate(".ev-repeat-remove-all","click","repeatable",function(){var e=u(this).parents(".ev-field").first(),t=u(".ev-container",e).first();return u(".ev-field-inner, .ev-bundle-fields-wrapper",t).remove(),e.addClass("ev-no-fields"),!1}),u.evf.delegate(".ev-field.ev-repeatable .ev-repeat","click","repeatable",function(){var e=u(this),a=e.parents(".ev-field.ev-repeatable").first(),r=e.parents(".ev-field-inner, .ev-bundle-fields-wrapper").first(),s=e.parents(".ev-container-repeatable-inner-wrapper").first(),l=u(".ev-empty-state",a),t=l.attr("data-key"),i=u("script[type='text/template'][data-template='"+t+"']"),n=e.attr("data-mode"),o=function(i,e){var t;t=parseInt(l.attr("data-count"),10),t+=1,l.attr("data-count",t);e?"append"===e?i.insertAfter(r):"prepend"===e&&i.insertBefore(r):i.appendTo(s),u(".ev-field-inner",a).each(function(){u(".ev-repeatable-controls",this).first();var e=parseInt(l.attr("data-count"),10);u("[name]",c).each(function(){u(this).attr("name",this.name.replaceLast("[]","["+e+"]"))})});var n=u("> .ev-field-inner, .ev-bundle-fields-wrapper",s),o=u(a).parents(".ev-repeatable").length;d(n,o),a.removeClass("ev-no-fields"),setTimeout(function(){var e,t;u.evf.ui.build(),0<=(t=(e=u(e=i).get(0)).getBoundingClientRect()).top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)||u(e).scrollintoview({duration:300,direction:"vertical",offset:40})},1)};if(e.attr("data-action"))window[e.attr("data-action")](i,o);else{var c=u(u.evf.template(i,{}));o(c,n)}return!1})}(jQuery),function(a){a.evf.delegate(".ev-close-persistent-message","click","messages",function(){return a(this).parents(".ev-persistent-message").first().remove(),!1}),window.ev_save_options_tab_button=function(e,t){return!1},window.ev_save_options_tab=function(e){a.evSaveRichTextareas(e);var t=a("form",e).first(),i=a(".ev-btn-type-save[data-callback]",t).first(),n=t.serialize().replace(/%5B%5D/g,"[]"),o=a("#ev").val();return n+="&action="+i.attr("data-callback"),n+="&nonce="+o,ev_idle_button(i),a.post(t.attr("action"),n,function(e){ev_unidle_button(i,e)},"json"),!1},a.evf.on(".ev-admin-page .ev-tab > form","submit","save-options-tab",function(){var e=a(this).parents(".ev-tab").first();return window.ev_save_options_tab(e),!1})}(jQuery),function(l){l.evf.ui.add(".ev-image-upload[data-multiple][data-sortable] .ev-image-placeholder-container",function(){l(this).sortable({items:"> .ev-image-placeholder",update:function(e,t){var i=l(e.target).parents(".ev-image-upload").first(),n=l("input[data-id]",i),o=[];l(".ev-image-placeholder",i).each(function(){o.push(l("img[data-id]",l(this)).attr("data-id"))}),n.val(o.join(","))}})}),l.evf.delegate(".ev-image-upload .ev-upload-remove","click","image_upload",function(){var e=l(this).parents(".ev-image-upload").first(),t=l(".ev-image-placeholder-container",e),i=void 0!==e.attr("data-multiple"),n=l("input[data-id]",e);if(i){l(this).parents(".ev-image-placeholder").first().remove();var o=l(".ev-image-placeholder",e);if(o.length){var a=[];o.each(function(){a.push(l("img[data-id]",l(this)).attr("data-id"))}),n.val(a.join(","))}else{e.removeClass("ev-image-uploaded"),n.val("");var r=l("script[type='text/template'][data-template='ev-image-placeholder']");t.append(l.evf.template(r,{url:"",id:""}))}}else n.val(""),l("img",e).attr("src",""),e.removeClass("ev-image-uploaded");return!1}),l.evf.delegate(".ev-image-upload .ev-remove-all-action","click","image_upload",function(){var e=l(this).parents(".ev-image-upload").first(),t=l(".ev-image-placeholder",e),i=l("input[data-id]",e);return t.remove(),e.removeClass("ev-image-uploaded"),i.val(""),!1}),l.evf.delegate(".ev-image-upload .ev-edit-action, .ev-image-upload .ev-upload-action","click","image_upload",function(){var o=l(this).parents(".ev-image-upload").first(),a=l(".ev-image-placeholder-container",o),r=o.attr("data-thumb-size"),s=void 0!==o.attr("data-multiple"),e=l("input[data-id]",o).val();return new window.Ev_MediaSelector({type:"image",multiple:s,select:function(e){var t=l("script[type='text/template'][data-template='ev-image-placeholder']"),i="";if(a.html(""),s)i=_.pluck(e,"id").join(","),l.each(e,function(){var e="";this.sizes&&this.sizes.full&&(e=this.sizes.full.url),this.sizes&&this.sizes[r]&&(e=this.sizes[r].url),a.append(l.evf.template(t,{url:e,id:this.id}))});else{var n="";i=e.id,n=e.sizes&&e.sizes.full?e.sizes.full.url:e.url,e.sizes&&e.sizes[r]&&(n=e.sizes[r].url),a.append(l.evf.template(t,{url:n,id:i}))}o.addClass("ev-image-uploaded"),l("input[data-id]",o).val(i)}}).open(e.split(",")),!1})}(jQuery),function(l){l.evf.ui.add(".ev-attachment-upload-container[data-multiple][data-sortable]",function(){l(this).sortable({items:"> .ev-attachment-placeholder",update:function(e,t){var i=l(e.target),n=l("input[data-id]",i),o=[];l(".ev-attachment-placeholder",i).each(function(){o.push(l("[data-id]",l(this)).attr("data-id"))}),n.val(o.join(","))}})}),l.evf.delegate(".ev-attachment-placeholder .ev-upload-remove","click","attachment_upload",function(){var e=l(this).parents(".ev-attachment-placeholder").first(),t=l(this).parents(".ev-attachment-upload-container").first(),i=void 0!==t.attr("data-multiple"),n=l("input[data-id]",t);if(e.remove(),i){var o=l(".ev-attachment-placeholder",t);if(o.length){var a=[];o.each(function(){a.push(l("[data-id]",l(this)).attr("data-id"))}),n.val(a.join(","))}else t.removeClass("ev-attachment-uploaded"),n.val("")}else n.val(""),l("img",t).attr("src",""),t.removeClass("ev-attachment-uploaded");return!1}),l.evf.delegate(".ev-attachment-upload-container .ev-remove-all-action","click","attachment_upload",function(){var e=l(this).parents(".ev-attachment-upload-container").first(),t=l(".ev-attachment-placeholder",e),i=l("input[data-id]",e);return t.remove(),e.removeClass("ev-attachment-uploaded"),i.val(""),!1}),l.evf.delegate(".ev-attachment-upload-container .ev-edit-action, .ev-attachment-upload-container .ev-upload-action","click","attachment_upload",function(){var r=l(this).parents(".ev-attachment-upload-container").first(),e=r.attr("data-type"),s=(r.attr("data-thumb-size"),void 0!==r.attr("data-multiple")),t=l("input[data-id]",r).val();return new window.Ev_MediaSelector({type:e,multiple:s,select:function(e){var t="",i=l(".ev-attachment-upload-action",r),n=l("script[type='text/template'][data-template='ev-attachment-placeholder']");if(l(".ev-attachment-placeholder",r).remove(),s)t=_.pluck(e,"id").join(","),l.each(e,function(){var e=this.url.split(/[\\/]/).pop()+" ("+this.filesizeHumanReadable+")",t=this.type;this.subtype&&(t+="-"+this.subtype),i.before(l.evf.template(n,{type:t,id:this.id,title:this.title,extension:e,url:this.url}))});else{t=e.id;var o=e.url.split(/[\\/]/).pop()+" ("+e.filesizeHumanReadable+")",a=e.type;e.subtype&&(a+="-"+e.subtype),i.before(l.evf.template(n,{type:a,id:t,title:e.title,extension:o,url:e.url}))}r.addClass("ev-attachment-uploaded"),l("input[data-id]",r).val(t)}}).open(t.split(",")),!1})}(jQuery),function(s){s.evf.ui.add("select.ev-multiple-select-input-ajax",function(){s(this).each(function(){var i=s(this).attr("data-action"),e=s(this).attr("data-value-field"),t=s(this).attr("data-label-field"),n=s(this).attr("data-search-field"),o=s(this).attr("data-nonce"),a=s(this).attr("data-max")?parseInt(s(this).attr("data-max"),10):1e3,r=s(this).attr("data-create")?parseInt(s(this).attr("data-create"),10):0;s(this).selectize({plugins:["remove_button","drag_drop"],valueField:e,labelField:t,searchField:[n],dropdownParent:"body",create:r,maxItems:a,onDropdownOpen:function(e){s(e).addClass("ev-multiple-select")},load:function(e,t){if(!e.length)return t();s.ajax({url:ajaxurl,type:"POST",data:{action:i,search:e,nonce:o},error:function(){t()},success:function(e){t(s.parseJSON(e))}})},render:{item:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"},option:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"}}})})}),s.evf.ui.add("input.ev-multiple-select-input",function(){s(this).each(function(){var e=s.parseJSON(s(this).attr("data-options")),t=s(this).attr("data-max")?parseInt(s(this).attr("data-max"),10):e.length+1;s(this).selectize({plugins:["remove_button","drag_drop"],options:e,valueField:"val",labelField:"label",searchField:["label"],dropdownParent:"body",maxItems:t,create:!1,onDropdownOpen:function(e){s(e).addClass("ev-multiple-select")},render:{item:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.label),i+="</div>"},option:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.label),i+="</div>"}}})})})}(jQuery),function(c){c.evf.delegate(".ev-color-preset","click","color",function(){var e=c(this).parents(".ev-color-presets-manager-wrapper").first(),t=c("[data-hex-value-input]",e);return c(this).hasClass("ev-selected")?(c(this).removeClass("ev-selected"),t.val("")):(c(".ev-selected",e).removeClass("ev-selected"),c(this).addClass("ev-selected"),t.val(c(this).attr("data-hex"))),!1}),c.evf.delegate("[data-color-delete-preset]","click","color",function(){var e=c(this),t=c(this).parents(".ev-color-preset").first(),i=t.attr("data-id"),n=c(this).parents(".ev-color-user-presets").first(),o=c(this).parents(".ev-color-presets-wrapper").first();return i&&(t.remove(),window.ev_seek_and_destroy_tooltips(),c(".ev-color-preset",o).length||c("body").removeClass("ev-has-color-presets"),c(".ev-color-preset",n).length?n.addClass("ev-color-has-user-presets"):n.removeClass("ev-color-has-user-presets"),ev_framework.color.presets=_.without(ev_framework.color.presets,_.findWhere(ev_framework.color.presets,{user:!0,id:i})),c.post(ajaxurl,{action:"ev_color_delete_preset",nonce:e.attr("data-nonce"),id:i},function(e){})),!1}),c.evf.delegate("[data-color-save-preset]","click","color",function(){var t=c(this),e=t.parents(".ev-color-wrapper").first(),i=c(".ev-color-input",e).val();if(i){var n=prompt(ev_framework.color.new_preset_name);if(!n)return!1;ev_idle_button(t),c.post(ajaxurl,{action:"ev_color_save_preset",nonce:t.attr("data-nonce"),hex:i,name:n,id:ev_framework.color.presets.length+1},function(e){ev_framework.color.presets.user||(ev_framework.color.presets.user=[]),ev_framework.color.presets.user.push({user:!0,hex:i,label:n}),c("body").addClass("ev-has-color-presets"),ev_unidle_button(t)})}return!1}),c.evf.delegate("[data-color-presets]","click","color",function(){var a=c(this),e=a.parents(".ev-color-wrapper").first(),r=c(".ev-color-input",e),s=r.attr("data-opacity"),l=c("[data-input-color-opacity]",e),t={hex:r.val()};return new c.evf.modal("ev-color-presets",t,{simple:!0,save:function(e,t,i){var n,o;e.hex&&(s&&(-1===e.hex.indexOf("#")?l.val((o=(o=(o=(o=(o=e.hex).replace("rgba(","")).replace(")","")).replace(" ","")).split(","))[o.length-1]):l.val("1"),r.attr("data-opacity",l.val())),s||-1===e.hex.indexOf("rgba(")||(e.hex=(n=(n=e.hex).match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===n.length?"#"+("0"+parseInt(n[1],10).toString(16)).slice(-2)+("0"+parseInt(n[2],10).toString(16)).slice(-2)+("0"+parseInt(n[3],10).toString(16)).slice(-2):""),r.val(e.hex).trigger("keyup"))}}).open(function(t,e,i){var n={action:"ev_color_presets_modal_load",nonce:a.attr("data-nonce"),data:i},o=".ev-modal-container[data-key='"+e+"']";c(o+" .ev-modal-wrapper").addClass("ev-loading"),c.post(ajaxurl,n,function(e){e=c(e),c(o+" .ev-modal-wrapper").removeClass("ev-loading"),t.html(e),setTimeout(function(){c.evf.ui.build()},1)})}),!1}),c.evf.ui.add("input.ev-color-input",function(){c(this).each(function(){var i=c(this),n=i.parents(".ev-color-wrapper").first(),o=i.attr("data-opacity"),e={control:"wheel",change:function(e,t){i.css("border-color",e),void 0!==o&&c("[data-input-color-opacity]",n).val(t),""!==e?n.addClass("ev-color-can-be-saved"):n.removeClass("ev-color-can-be-saved")}};void 0!==o&&(e.opacity=!0,e.format="rgb"),c(this).minicolors(e).trigger("change")})})}(jQuery),function(t){window.evf_ui_rich_textareas=0,t.evf.ui.add("textarea.ev-rich",function(){t(this).each(function(){window.evf_ui_rich_textareas++;var e=t(this).attr("id");e=(e=e.replace(/\[/g,"_")).replace(/\]/g,"_"),t(this).attr("id",e+"-"+window.evf_ui_rich_textareas),t(this).wp_editor()})})}(jQuery),function(r){r.evf.delegate(".ev-selected-icon-wrapper","click","icon",function(){var a=r(this),n=a.parents(".ev-field").first(),o=r(".ev-selected-icon-wrapper",n),e={prefix:r("[data-prefix]",n).val(),set:r("[data-set]",n).val(),icon:r("[data-icon]",n).val(),color:r("[data-color]",n).val(),size:r("[data-size]",n).val()};return new r.evf.modal("ev-icon",e,{simple:!0,save:function(e,t,i){r("[data-prefix]",n).val(e.prefix),r("[data-set]",n).val(e.set),r("[data-icon]",n).val(e.icon),r("[data-color]",n).val(e.color.color),r("[data-size]",n).val(e.size),r("[data-preview]",n).attr("class","").css("color",""),r("[data-preview]",n).attr("class","ev-icon ev-component "+e.prefix+" "+e.icon).css("color",e.color.color),e.icon?o.removeClass("ev-empty"):o.addClass("ev-empty")}}).open(function(t,e,i){var n={action:"ev_icon_modal_load",data:i,nonce:a.attr("data-nonce")},o=".ev-modal-container[data-key='"+e+"']";r(o+" .ev-modal-wrapper").addClass("ev-loading"),r.post(ajaxurl,n,function(e){e=r(e),r(o+" .ev-modal-wrapper").removeClass("ev-loading"),t.html(e),r("[data-icon-search]",t).focus(),setTimeout(function(){r.evf.ui.build()},1)})}),!1}),r.evf.delegate(".ev-icon-remove","click","icon",function(){var e=r(this).parents(".ev-field").first();return r(".ev-selected-icon-wrapper",e).addClass("ev-empty"),r("[data-prefix]",e).val(""),r("[data-set]",e).val(""),r("[data-icon]",e).val(""),r("[data-color]",e).val(""),r("[data-size]",e).val(""),r("[data-preview]",e).attr("class","ev-icon ev-component").css("color",""),!1}),r.evf.delegate("input[data-icon-search]","keydown","icon",function(e){if(13==e.which)return!1}),r.evf.delegate("input[data-icon-search]","keyup","icon",function(){var e=r(this).parents(".ev-icon-sets-external-wrapper").first(),t=r(this).val(),i=r(".ev-icon",e);if(""!=t?r(".ev-icon-sets",e).addClass("ev-searching"):r(".ev-icon-sets",e).removeClass("ev-searching"),i.removeClass("ev-found"),i=i.filter('[data-icon-stripped*="'+t+'"]').addClass("ev-found"),r(".ev-icon-search-results",e).addClass("ev-search-icon-results-visible"),i.length){var n=1<i.length?2:1;r(".ev-icon-search-results",e).html(ev_icon_field[n].replace("%s",i.length))}else""!=t?r(".ev-icon-search-results",e).html(ev_icon_field[0]):r(".ev-icon-search-results",e).removeClass("ev-search-icon-results-visible")}),r.evf.delegate(".ev-icon-sets i","click","icon",function(){var e=r(this),t=r(this).parents(".ev-icon-sets-external-wrapper").first(),i=r(".ev-icon",t),n=r("[name='color[color]']",t).val(),o=r("[data-icon-size]",t).val(),a=r(".ev-selected-icon-preview",t);i.removeClass("ev-found ev-selected"),e.addClass("ev-selected"),r(".ev-icon-sets",t).removeClass("ev-searching"),r("[data-icon-prefix]",t).val(e.attr("data-prefix")),r("[data-icon-set]",t).val(e.attr("data-set")),r("[data-icon-name]",t).val(e.attr("data-icon-name")),a.removeAttr("class").attr("class","ev-selected-icon-preview ev-icon ev-component "+e.attr("data-prefix")+" "+e.attr("data-icon-name")).css({color:n,"font-size":o}),r("input[data-icon-search]",t).val(""),r(".ev-icon-search-results",t).html("").removeClass("ev-search-icon-results-visible")}),r.evf.delegate(".ev-icon-sets-controls-field-wrapper [name='color[color]']","change","icon",function(){var e=r(this).parents(".ev-icon-sets-external-wrapper").first();r(".ev-selected-icon-preview",e).css({color:r(this).val()})}),r.evf.delegate(".ev-icon-sets-controls-field-wrapper [name='size']","input","icon",function(){var e=r(this).parents(".ev-icon-sets-external-wrapper").first();r(".ev-selected-icon-preview",e).css({"font-size":r(this).val()})})}(jQuery),function(h){function v(e){switch(e.attr("data-type")){case"radio":return h("input[type='radio'][name]:checked",e).first();case"select":return h("select[name]",e).first();case"checkbox":return h("input[type='checkbox'][name]",e).first()}return!1}function s(e){var t=e.parents(".ev-tab-container").first();e.parents(".ev-field-bundle").length&&(t=e.parents(".ev-field-bundle").first());var i=e.attr("data-slave"),n=h("[data-controller='"+i+"']",t),o=v(n);if(o){var a=o.val();o.is("[type='checkbox']")&&(a=o.is(":checked")?"1":"0");var r=e.attr("data-controller-value");if(-1!=r.indexOf(","))-1==(r=r.split(",")).indexOf(a)||n.hasClass("ev-hidden")?(e.addClass("ev-hidden"),h("[data-slave='"+e.attr("data-controller")+"']",t).addClass("ev-hidden")):(e.removeClass("ev-hidden"),h("[data-slave='"+e.attr("data-controller")+"']",t).removeClass("ev-hidden"));else{var s=!0;if(-1!==r.indexOf("!="))s=(r=r.replace("!=",""))==a;else if(0===r.indexOf("count")){var l=r.charAt(5),c=r.split(l),d=!1;if(isNaN(c)){var p=""+r,u=parseInt(p.match(/\d+/)[0],10);d=(d=(d=p.replace(u,"")).replace("count","")).replace(l,""),c=u}else c=parseInt(c[1],10);if(-1!==a.indexOf(l))if(d)switch(d){case">":s=a.split(l).length<=c;break;case"<":s=a.split(l).length>=c}else s=a.split(l).length!=c;else s=!0}else s=r!=a;s||n.hasClass("ev-hidden")?(e.addClass("ev-hidden"),h("[data-slave='"+e.attr("data-controller")+"']",t).addClass("ev-hidden")):(e.removeClass("ev-hidden"),h("[data-slave='"+e.attr("data-controller")+"']",t).removeClass("ev-hidden"))}e.is("[data-controller]")&&v(e).trigger("change")}}h.evf.delegate(".ev-help-popup .ev-help-handle","click","field",function(){var n=h(".ev-help-popup-text",this).html();return new h.evf.modal("ev-help-popup",{},{simple:!0}).open(function(e,t,i){e.html(n)}),!1}),h.evf.ui.add("[data-slave]",function(){h(this).each(function(){s(h(this))})}),h.evf.delegate("[data-controller] :input","change","field",function(){var e=h(this).parents(".ev-field").first();if(h(this).is(v(e))){var t=e.parents(".ev-tab-container").first();e.parents(".ev-field-bundle").length&&(t=e.parents(".ev-field-bundle").first());h(this).val();var i=h(this).parents("[data-controller]").first().attr("data-controller"),n=h("[data-slave='"+i+"']",t);n.each(function(){s(h(this))});var o=n.not(".ev-hidden").last(),a=h(this).parents(".ev-tabs").first();if(o.length&&a.length&&a.css("overflow-y")){var r=o.position().top+2*o.outerHeight();a.get(0).scrollTop=r}}})}(jQuery),function(s){s(document).on("input.ev_link",".ev-link-input-wrapper input",function(){""!==s(this).val()?s(this).parent().addClass("ev-not-empty"):s(this).parent().removeClass("ev-not-empty")}),s.evf.delegate(".ev-link-ctrl-btn","click","link",function(){var n=s(this),a=s(this).parents(".ev-link-ctrl").first(),r={url:s("[data-link-url]",a).val(),target:s("[data-link-target]",a).val(),rel:s("[data-link-rel]",a).val(),title:s("[data-link-title]",a).val(),class:s("[data-link-class]",a).val()};return new s.evf.modal("ev-link",r,{simple:!0,close:function(){s(window).off("keydown.ev_link")},save:function(e,t,i){s("[data-link-url]",a).val(e.url),s("[data-link-target]",a).val(e.target),s("[data-link-rel]",a).val(e.rel),s("[data-link-title]",a).val(e.title),s("[data-link-class]",a).val(e.class),n.removeClass("ev-link-on"),""!=e.url&&n.addClass("ev-link-on")}}).open(function(t,e,i){var n={action:"ev_link_modal_load",nonce:a.attr("data-nonce"),data:i},o=".ev-modal-container[data-key='"+e+"']";(i.rel||r.title||r.class)&&s(o).addClass("ev-link-modal-expanded"),s(o+" .ev-modal-wrapper").addClass("ev-loading"),s(window).off("keydown.ev_link"),s(window).on("keydown.ev_link",function(e){if(9==e.which)return s('.ev-modal-container[data-key="ev-link"]').addClass("ev-link-modal-expanded"),s(window).off("keydown.ev_link"),!1}),s.post(ajaxurl,n,function(e){e=s(e),s(o+" .ev-modal-wrapper").removeClass("ev-loading"),t.html(e),setTimeout(function(){s.evf.ui.build()},1)})}),!1}),s.evf.ui.add(".ev-link-input-wrapper input",function(){s(this).trigger("input.ev_link")}),s.evf.ui.add(".ev-link-url-wrapper [name='url']",function(){var i=s(this).attr("data-nonce");s(this).selectize({plugins:[],valueField:"id",labelField:"text",searchField:["text"],dropdownParent:"body",create:!0,createOnBlur:!0,maxItems:1,onDropdownOpen:function(e){s(e).addClass("ev-multiple-select")},load:function(e,t){if(!e.length||/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e))return t();s.ajax({url:ajaxurl,type:"POST",data:{action:"ev_link_search_entries",search:e,nonce:i},error:function(){t()},success:function(e){t(s.parseJSON(e))}})},render:{item:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"},option:function(e,t){var i="<div>";return e.spec&&""!==e.spec&&(i+="<span>"+t(e.spec)+"</span>"),i+=t(e.text),i+="</div>"},option_create:function(e,t){return'<div class="ev-link-create create">'+ev_framework.link.create+"</div>"}}}),s(this).get(0).selectize.focus()})}(jQuery),function(o){var a="ev-btn-idle";function r(e,t){var i=!1;o(e).addClass("ev-btn-complete"),t&&(o(e).addClass("ev-btn-"+t.type),i=ev_create_tooltip(e,t.message,{class:"ev-tooltip-response-"+t.type})),setTimeout(function(){o(e).removeAttr("data-title"),o(e).removeClass("ev-btn-complete"),t&&(i&&ev_tooltip_destroy(i),o(e).removeClass("ev-btn-"+t.type))},1500)}window.ev_idle_button=function(e){o(e).addClass(a).attr("disabled","disabled").trigger("start.ev_button")},window.ev_unidle_button=function(t,i){var e=o("body").get(0).style;if("transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e){var n="transitionend.ev webkitTransitionEnd.ev oTransitionEnd.ev MSTransitionEnd.ev";o(t).on(n,function(e){o(t).off(n),r(t,i)})}else r(t,i);o(t).removeClass(a).removeAttr("disabled").trigger("done.ev_button")}}(jQuery),function(e){e.evf.ui.add(".ev-date-input",function(){e(this).each(function(){e(this).datepicker({dateFormat:e(this).attr("data-format"),dayNamesShort:ev_date_field.dayNamesShort,dayNames:ev_date_field.dayNames,monthNamesShort:ev_date_field.monthNamesShort,monthNames:ev_date_field.monthNames,prevText:ev_date_field.prevText,nextText:ev_date_field.nextText,showAnim:"",beforeShow:function(e,t){t.dpDiv.addClass("ev-datepicker-dropdown")}})})})}(jQuery);