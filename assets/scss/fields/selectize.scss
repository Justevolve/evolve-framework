@import "../libs";

// -----------------------------------------------------------------------------
// $Selectize
// -----------------------------------------------------------------------------

.selectize-input {
	padding: $gutter/5;
	border-radius: $radius;
	display: block;
	width: 100%;
	position: relative;
	float: left;
	@include box-sizing( border-box );
	border: 1px solid $grey_1;
	@include transition( border-color $transition_time*2 ease );

	&.has-items {
		padding-left: $gutter/10;
		padding-right: $gutter/10;

		.ev-multiple-select-vertical & {
			padding: $gutter/10 $gutter/5;
		}
	}

	&:not( .has-items ):not( .disabled ) {
		cursor: text;
	}

	// &.full:not( .disabled ) {
	// 	> input {
	// 		display: none !important;
	// 	}
	// }

	&:hover:not( .disabled ) {
		> div {
			@include box-shadow( #{$ui_el_shadow} );
			border-color: $grey_3;
		}
	}

	&.dropdown-active,
	&:hover:not( .disabled ) {
		@include ui_input_hover;
	}

	&.dropdown-active {
		border-color: $grey_3;
		border-bottom-left-radius: 0;
		border-bottom-right-radius: 0;
		@include box-shadow( #{$ui_el_shadow_hover} );
	}

	> input {
		color: $grey_6;
		display: inline-block !important;
		padding: ($gutter/5) 0 ($gutter/5 + 1) ($baseline/3 - 1) !important;
		min-height: 0 !important;
		max-height: none !important;
		max-width: 100% !important;
		margin: 0 $baseline/6 0 0 !important;
		text-indent: 0 !important;
		border: 0 none !important;
		background: none !important;
		line-height: inherit !important;
		-webkit-user-select: auto !important;
		-webkit-box-shadow: none !important;
		box-shadow: none !important;
		font-size: $main_fsz !important;
		@include box-sizing( border-box );
		float: left;

		.ev-multiple-select-vertical & {
			left: 0 !important;
			position: relative !important;
		}

		&::-ms-clear {
			display: none;
		}

		&:after {
			content: ' ';
			display: block;
			clear: left;
		}

		&:focus { outline: none !important; }
	}

	[data-value] + input {
		padding-left: 0 !important;
		float: none;
	}

	> div {
		display: block;
		float: left;
		padding: $gutter/5 $baseline/3;
		border: 1px solid $grey_1;
		background-color: $white;
		font-size: 12px;
		border-radius: $radius - 1;
		@include box-sizing( border-box );
		margin-left: $gutter/10;
		margin-right: $gutter/10;
		cursor: pointer;
		position: relative;

		&:hover {
			border-color: $grey_4 !important;
			@include box-shadow( #{$ui_el_shadow_hover} );
		}

		.ev-multiple-select-vertical & {
			width: 100%;
			margin: $gutter/10 0;
		}

		.plugin-remove_button:not( .single ) & {
			padding-right: $baseline/3 + $baseline/2 + $baseline/3;
		}

		.remove {
			@include position( absolute, 50% $baseline/3 null null );
			@include size( $baseline/2 $baseline );
			margin-top: -$baseline/2;
			text-align: center;
			line-height: $baseline;
			font-size: 16px;
			text-decoration: none;
			display: block;
			color: $grey_3;
			font-weight: bold;

			&:hover {
				color: $red;
			}
		}

		span {
			margin-right: $gutter/4;
			color: $grey_4;
		}

		// Sortable ------------------------------------------------------------

		&.ui-sortable-placeholder {
			background-color: $grey_3 !important;
			border-color: $grey_3 !important;
			-webkit-box-shadow: none !important;
			box-shadow: none !important;
			max-height: $baseline + 4 !important;
		}

		&.ui-sortable-helper {
			@include box-shadow( 0 2px 10px rgba( #000, .1 ) );
			overflow: hidden;
			white-space: nowrap;
			text-overflow: ellipsis;
			max-height: $baseline + 4 !important;
		}

	}
}

.selectize-control {
	position: relative;
	@include clearfix;
	background-color: $grey_0;

// -----------------------------------------------------------------------------
// $Single input
// -----------------------------------------------------------------------------

	&.single  {
		.selectize-input {
			padding-right: $baseline*2;
			cursor: pointer;

			&.focus {
				cursor: text;
			}

			&:before {
				content: "";
				display: block;
				@include position( absolute, 50% $baseline/2+1 null null );
				@include triangle( 12px, $grey_3, down );
				margin-top: -3px;
				@include transition( border-color $transition_time*2 ease );
			}

			&:after {
				content: "";
				display: block;
				@include position( absolute, 50% $baseline*1.5 null null );
				margin-top: -$baseline/2;
				@include size( 0 $baseline );
				border-left: 1px solid $grey_1;
				@include transition( border-color $transition_time*2 ease );
			}

			&:hover {
				&:before {
					border-top-color: $grey_6;
				}
				&:after {
					border-left-color: $grey_3;
				}
			}

			> div {
				background-color: transparent !important;
				border-color: transparent !important;
				font-size: 14px;
				padding-right: 0;
				margin-left: 0;
				margin-right: 0;
			}

			&:hover:not( .disabled ) {
				> div {
					box-shadow: none;
					border-color: transparent;
				}
			}

			&.full {
				> input {
					margin-left: 0 !important;
				}
			}
		}
	}
}

// -----------------------------------------------------------------------------
// $Dropdown
// -----------------------------------------------------------------------------

.selectize-dropdown {
	@include position( absolute, 100% null null 0 );
	z-index: 10000;

	[data-selectable] {
		padding: $baseline/8 $gutter/2;
		color: $grey_4;
		cursor: pointer;

		&:first-child {
			margin-top: $baseline/4;

			&:last-child {
				margin-bottom: $baseline/4;
			}
		}

		&.create + [data-selectable] {
			margin-top: $baseline/4;
		}

		&:last-child {
			margin-bottom: $baseline/4;
		}

		&.active {
			color: $grey_6;
		}
	}
}

.selectize-dropdown-content {
	overflow-y: auto;
	overflow-x: hidden;
	max-height: 200px;

	border: 1px solid $grey_3;
	background-color: $white;
	margin: -1px 0 0 0;
	@include box-sizing( border-box );
	@include box-shadow( #{$ui_el_shadow_hover} );
	color: $grey_4;
	padding: 0;

	.highlight {
		background-color: lightYellow;
		text-decoration: underline;
	}
}


// // TODO: Rifare senza usare la skin di default

// // -----------------------------------------------------------------------------
// // $Selectize
// // -----------------------------------------------------------------------------

// // base styles

// $selectize-font-family: inherit;
// $selectize-font-smoothing: inherit;
// $selectize-font-size: 14px;
// $selectize-line-height: 18px;

// $selectize-color-text: $white;
// $selectize-color-border: $grey_1;
// $selectize-color-highlight: rgba(125,168,208,0.2);
// $selectize-color-input: $white;
// $selectize-color-input-full: $selectize-color-input;
// $selectize-color-disabled: $grey_0;
// $selectize-color-item: $green;
// $selectize-color-item-text: $selectize-color-text;
// $selectize-color-item-border: lighten( $green, 10 );
// $selectize-color-item-active: $green_0;
// $selectize-color-item-active-text: $selectize-color-text;
// $selectize-color-item-active-border: lighten( desaturate( $green_0, 40 ), 10 );
// $selectize-color-dropdown: $white;
// $selectize-color-dropdown-border: $selectize-color-border;
// $selectize-color-dropdown-border-top: $grey_1;
// $selectize-color-dropdown-item-active: $grey_3;
// $selectize-color-dropdown-item-active-text: $grey_6;
// $selectize-color-dropdown-item-create-text: rgba(red($selectize-color-text), green($selectize-color-text), blue($selectize-color-text), 0.5);
// $selectize-color-dropdown-item-create-active-text: $selectize-color-dropdown-item-active-text;
// $selectize-color-optgroup: $selectize-color-dropdown;
// $selectize-color-optgroup-text: $selectize-color-text;
// $selectize-lighten-disabled-item: 30%;
// $selectize-lighten-disabled-item-text: 30%;
// $selectize-lighten-disabled-item-border: 30%;
// $selectize-opacity-disabled: 0.5;

// $selectize-shadow-input: inset 0 1px 2px rgba( 0,0,0,.07 );
// $selectize-shadow-input-focus: 0 0 2px rgba( $green_0, .8 );
// $selectize-border: 1px solid $selectize-color-border;
// $selectize-dropdown-border: 1px solid $green;

// $selectize-width-item-border: 0;
// $selectize-max-height-dropdown: 200px;

// $selectize-padding-x: 5px;
// $selectize-padding-y: 8px;
// $selectize-padding-item-x: 6px;
// $selectize-padding-item-y: 4px;
// $selectize-padding-dropdown-item-x: $selectize-padding-x;
// $selectize-padding-dropdown-item-y: 5px;
// $selectize-margin-item-x: 3px;
// $selectize-margin-item-y: 3px;

// $selectize-arrow-size: 5px;
// $selectize-arrow-color: #808080;
// $selectize-arrow-offset: 15px;

// $selectize-caret-margin: 0 2px 0 0;
// $selectize-caret-margin-rtl: 0 4px 0 -2px;

// // -----------------------------------------------------------------------------

// .selectize-control {
// 	position: relative;

// 	&.ev-multiple-select-vertical {

// 		.selectize-input {
// 			div {
// 				display: block;
// 				margin-right: 0 !important;
// 			}

// 			> input {
// 				display: inline-block !important;
// 				position: relative !important;
// 				left: 0 !important;
// 			}
// 		}

// 		.full {
// 			> input {
// 				display: none !important;
// 			}
// 		}
// 	}

// 	.full {
// 		> input {
// 			display: none !important;
// 		}
// 	}
// }

// .selectize-dropdown,
// .selectize-input,
// .selectize-input input {
// 	// color: $selectize-color-text;
// 	font-family: $selectize-font-family;
// 	font-size: $selectize-font-size;
// 	line-height: $selectize-line-height;
// 	-webkit-font-smoothing: $selectize-font-smoothing;
// }

// .ev-multiple-select-input-ajax {
// 	&.selectize-dropdown [data-selectable] .highlight {
// 		margin-right: 0;

// 		&:after {
// 			display: none;
// 		}
// 	}

// 	.selectize-input {
// 		> input {
// 			padding: 0 !important;
// 		}

// 		&.full {
// 			> input {
// 				display: inline-block !important;
// 			}
// 		}
// 	}
// }

// .selectize-input,
// .selectize-control.single .selectize-input.input-active {
// 	background: $selectize-color-input;
// 	cursor: text;
// 	display: inline-block;
// }

// .selectize-input {
// 	border: $selectize-border;
// 	padding: $selectize-padding-y $selectize-padding-x;
// 	border-radius: $radius;
// 	display: inline-block;
// 	width: 100%;
// 	overflow: visible !important;
// 	position: relative;
// 	z-index: 1;
// 	@include box-sizing( border-box );
// 	background-color: $grey_0;

// 	&:hover {
// 		@include ui_input_hover;

// 		.selectize-control.multi & > div {
// 			@include box-shadow( #{$ui_el_shadow} );
// 			border-color: $grey_3;
// 		}

// 	}

// 	.selectize-control.multi &.has-items {
// 		color: $selectize-color-text;
// 		padding: 6px 6px 3px;
// 	}

// 	&:not( .has-items ) {
// 		> input {
// 			padding: 7px 0 6px !important;
// 		}
// 	}

// 	&.disabled,
// 	&.disabled * {
// 		cursor: default !important;
// 	}

// 	&.focus {
// 		border-color: $grey_3;
// 		@include box-shadow( #{$ui_el_shadow_hover} );
// 		// @include box-shadow( $selectize-shadow-input-focus );
// 	}

// 	&.dropdown-active {}

// 	> * {
// 		vertical-align: baseline;
// 		display: -moz-inline-stack;
// 		display: inline-block;
// 		zoom: 1;
// 		*display: inline;
// 	}

// 	.selectize-control & > div {
// 		span {
// 			margin-right: 5px;

// 			&:after {
// 				content: ":";
// 				display: inline-block;
// 			}
// 		}
// 	}

// 	.selectize-control.multi & > div {
// 		cursor: pointer;
// 		margin: 0 $selectize-margin-item-x $selectize-margin-item-y 0;
// 		padding: 8px 8px;
// 		background: $white;
// 		color: $grey_6;
// 		border: 1px solid $grey_1;
// 		border-radius: 2px;

// 		&.active {
// 			background: $selectize-color-item-active;
// 			color: $selectize-color-item-active-text;
// 		}
// 	}

// 	.selectize-control.multi &.disabled > div {
// 		&,
// 		&.active {
// 			color: lighten(desaturate($selectize-color-item-text, 100%), $selectize-lighten-disabled-item-text);
// 			background: lighten(desaturate($selectize-color-item, 100%), $selectize-lighten-disabled-item);
// 		}
// 	}

// 	> input {
// 		color: $grey_6;
// 		display: inline-block !important;
// 		padding: $selectize-padding-item-y 0 !important;
// 		min-height: 0 !important;
// 		max-height: none !important;
// 		max-width: 100% !important;
// 		margin: $selectize-caret-margin !important;
// 		text-indent: 0 !important;
// 		border: 0 none !important;
// 		background: none !important;
// 		line-height: inherit !important;
// 		-webkit-user-select: auto !important;
// 		-webkit-box-shadow: none !important;
// 		box-shadow: none !important;

// 		&::-ms-clear {
// 			display: none;
// 		}

// 		&:focus { outline: none !important; }
// 	}
// }

// .selectize-input::after {
// 	content: ' ';
// 	display: block;
// 	clear: left;
// }

// .selectize-input.dropdown-active::before {
// 	content: ' ';
// 	display: block;
// 	position: absolute;
// 	background: $selectize-color-dropdown-border-top;
// 	height: 1px;
// 	bottom: 0;
// 	left: 0;
// 	right: 0;
// }

// .selectize-dropdown {
// 	position: absolute;
// 	z-index: 10000;
// 	border: 1px solid $grey_3;
// 	background: $white;
// 	margin: -1px 0 0 0;
// 	border-top: 0 none;
// 	@include box-sizing( border-box );
// 	@include box-shadow( 0 1px 3px rgba( #000, .1 ) );
// 	color: $grey_4;
// 	padding: $baseline/4 0;

// 	[data-selectable] {
// 		cursor: pointer;
// 		overflow: hidden;

// 		.highlight {
// 			// background: $grey_1;
// 		}
// 	}

// 	[data-selectable], .optgroup-header {
// 		padding: $baseline/4 $gutter/2;
// 	}

// 	.optgroup:first-child .optgroup-header {
// 		border-top: 0 none;
// 	}

// 	.optgroup-header {
// 		color: $selectize-color-optgroup-text;
// 		background: $selectize-color-optgroup;
// 		cursor: default;
// 	}

// 	// span {
// 	// 	margin-right: 4px;

// 	// 	&:after {
// 	// 		content: ":";
// 	// 		display: inline-block;
// 	// 	}
// 	// }

// 	.active {
// 		color: $grey_6;

// 		&.create {
// 			color: $selectize-color-dropdown-item-create-active-text;
// 		}
// 	}

// 	.create {
// 		color: $selectize-color-dropdown-item-create-text;
// 	}
// }

// .selectize-dropdown-content {
// 	overflow-y: auto;
// 	overflow-x: hidden;
// 	max-height: $selectize-max-height-dropdown;

// 	> div {
// 		span {
// 			margin-right: 5px;
// 		}
// 	}
// }

// .selectize-control.single .selectize-input {
// 	&,
// 	input { cursor: pointer; }

// 	&.input-active,
// 	&.input-active input { cursor: text; }

// 	&:after {
// 		content: ' ';
// 		display: block;
// 		position: absolute;
// 		top: 50%;
// 		right: $selectize-arrow-offset;
// 		margin-top: round((-1 * $selectize-arrow-size / 2));
// 		width: 0;
// 		height: 0;
// 		border-style: solid;
// 		border-width: $selectize-arrow-size $selectize-arrow-size 0 $selectize-arrow-size;
// 		border-color: $selectize-arrow-color transparent transparent transparent;
// 	}

// 	&.dropdown-active:after {
// 		margin-top: $selectize-arrow-size * -0.8;
// 		border-width: 0 $selectize-arrow-size $selectize-arrow-size $selectize-arrow-size;
// 		border-color: transparent transparent $selectize-arrow-color transparent;
// 	}
// }

// .selectize-control.rtl {
// 	&.single .selectize-input:after {
// 		left: $selectize-arrow-offset;
// 		right: auto;
// 	}
// 	.selectize-input > input {
// 		margin: $selectize-caret-margin-rtl !important;
// 	}
// }

// .selectize-control .selectize-input.disabled {
// 	opacity: $selectize-opacity-disabled;
// 	background-color: $selectize-color-disabled;
// }

// // -----------------------------------------------------------------------------
// // $Remove button plugin
// // -----------------------------------------------------------------------------

// .selectize-control.plugin-remove_button {
// 	[data-value] {
// 		position: relative;
// 	}

// 	&.multi {
// 		[data-value] {
// 			padding-right: 12px + 24px !important;
// 		}
// 	}

// 	[data-value] .remove {
// 		z-index: 1; /* fixes ie bug (see #392) */
// 		position: absolute;
// 		top: 0;
// 		right: 0;
// 		bottom: 0;
// 		width: 24px;
// 		text-align: center;
// 		font-weight: bold;
// 		font-size: 14px;
// 		color: inherit;
// 		text-decoration: none;
// 		vertical-align: middle;
// 		display: inline-block;
// 		padding: 8px 0 0 0;
// 		// border-left: 1px solid $selectize-color-item-border;
// 		// border-radius: 0 2px 2px 0;
// 		@include box-sizing( border-box );
// 	}

// 	[data-value] .remove:hover {
// 		// background: rgba( #000, 0.1 );
// 	}

// 	[data-value].active .remove {
// 		// border-left-color: $selectize-color-item-active-border;
// 	}

// 	.disabled [data-value] .remove:hover {
// 		// background: none;
// 	}

// 	.disabled [data-value] .remove {
// 		// border-left-color: lighten(desaturate($selectize-color-item-border, 100%), $selectize-lighten-disabled-item-border);
// 	}
// }

// // -----------------------------------------------------------------------------
// // $Drag & Drop plugin
// // -----------------------------------------------------------------------------

// .selectize-control.plugin-drag_drop {
// 	&.multi > .selectize-input > div.ui-sortable-placeholder {
// 		visibility: visible !important;
// 		background: $grey_3 !important;
// 	}

// 	.ui-sortable-placeholder::after {
// 		content: '!';
// 		visibility: hidden;
// 	}

// 	.ui-sortable-helper {
// 		@include box-shadow( 0 1px 10px rgba( #000, .1 ) );
// 	}
// }
